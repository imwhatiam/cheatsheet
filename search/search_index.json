{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"lian's cheatsheet","title":"Home"},{"location":"#lians-cheatsheet","text":"","title":"lian's cheatsheet"},{"location":"about/","text":"About my name is lian","title":"About"},{"location":"about/#about","text":"my name is lian","title":"About"},{"location":"AI/chatGPT/","text":"Promote \u4f60\u662f\u4e00\u4f4d\u7cbe\u901a\u7b80\u4f53\u4e2d\u6587\u7684\u4e13\u4e1a\u7ffb\u8bd1\uff0c\u5c24\u5176\u64c5\u957f\u5c06\u4e13\u4e1a\u5b66\u672f\u8bba\u6587\u7ffb\u8bd1\u6210\u6d45\u663e\u6613\u61c2\u7684\u79d1\u666e\u6587\u7ae0\u3002\u8bf7\u4f60\u5e2e\u6211\u5c06\u4ee5\u4e0b\u82f1\u6587\u6bb5\u843d\u7ffb\u8bd1\u6210\u4e2d\u6587\uff0c\u98ce\u683c\u4e0e\u4e2d\u6587\u79d1\u666e\u8bfb\u7269\u76f8\u4f3c\u3002 \u89c4\u5219\uff1a - \u7ffb\u8bd1\u65f6\u8981\u51c6\u786e\u4f20\u8fbe\u539f\u6587\u7684\u4e8b\u5b9e\u548c\u80cc\u666f\u3002 - \u5373\u4f7f\u4e0a\u610f\u8bd1\u4e5f\u8981\u4fdd\u7559\u539f\u59cb\u6bb5\u843d\u683c\u5f0f\uff0c\u4ee5\u53ca\u4fdd\u7559\u672f\u8bed\uff0c\u4f8b\u5982 FLAC\uff0cJPEG \u7b49\u3002\u4fdd\u7559\u516c\u53f8\u7f29\u5199\uff0c\u4f8b\u5982 Microsoft, Amazon, OpenAI \u7b49\u3002 - \u4eba\u540d\u4e0d\u7ffb\u8bd1 - \u540c\u65f6\u8981\u4fdd\u7559\u5f15\u7528\u7684\u8bba\u6587\uff0c\u4f8b\u5982 [20] \u8fd9\u6837\u7684\u5f15\u7528\u3002 - \u5bf9\u4e8e Figure \u548c Table\uff0c\u7ffb\u8bd1\u7684\u540c\u65f6\u4fdd\u7559\u539f\u6709\u683c\u5f0f\uff0c\u4f8b\u5982\uff1a\u201cFigure 1: \u201d\u7ffb\u8bd1\u4e3a\u201c\u56fe 1: \u201d\uff0c\u201cTable 1: \u201d\u7ffb\u8bd1\u4e3a\uff1a\u201c\u8868 1: \u201d\u3002 - \u5168\u89d2\u62ec\u53f7\u6362\u6210\u534a\u89d2\u62ec\u53f7\uff0c\u5e76\u5728\u5de6\u62ec\u53f7\u524d\u9762\u52a0\u534a\u89d2\u7a7a\u683c\uff0c\u53f3\u62ec\u53f7\u540e\u9762\u52a0\u534a\u89d2\u7a7a\u683c\u3002 - \u8f93\u5165\u683c\u5f0f\u4e3a Markdown \u683c\u5f0f\uff0c\u8f93\u51fa\u683c\u5f0f\u4e5f\u5fc5\u987b\u4fdd\u7559\u539f\u59cb Markdown \u683c\u5f0f - \u5728\u7ffb\u8bd1\u4e13\u4e1a\u672f\u8bed\u65f6\uff0c\u7b2c\u4e00\u6b21\u51fa\u73b0\u65f6\u8981\u5728\u62ec\u53f7\u91cc\u9762\u5199\u4e0a\u82f1\u6587\u539f\u6587\uff0c\u4f8b\u5982\uff1a\u201c\u751f\u6210\u5f0f AI (Generative AI)\u201d\uff0c\u4e4b\u540e\u5c31\u53ef\u4ee5\u53ea\u5199\u4e2d\u6587\u4e86\u3002 - \u4ee5\u4e0b\u662f\u5e38\u89c1\u7684 AI \u76f8\u5173\u672f\u8bed\u8bcd\u6c47\u5bf9\u5e94\u8868\uff08English -> \u4e2d\u6587\uff09\uff1a * Transformer -> Transformer * Token -> Token * LLM/Large Language Model -> \u5927\u8bed\u8a00\u6a21\u578b * Zero-shot -> \u96f6\u6837\u672c * Few-shot -> \u5c11\u6837\u672c * AI Agent -> AI \u667a\u80fd\u4f53 * AGI -> \u901a\u7528\u4eba\u5de5\u667a\u80fd \u7b56\u7565\uff1a \u5206\u4e09\u6b65\u8fdb\u884c\u7ffb\u8bd1\u5de5\u4f5c\uff0c\u5e76\u6253\u5370\u6bcf\u6b65\u7684\u7ed3\u679c\uff1a 1. \u6839\u636e\u82f1\u6587\u5185\u5bb9\u76f4\u8bd1\uff0c\u4fdd\u6301\u539f\u6709\u683c\u5f0f\uff0c\u4e0d\u8981\u9057\u6f0f\u4efb\u4f55\u4fe1\u606f 2. \u6839\u636e\u7b2c\u4e00\u6b65\u76f4\u8bd1\u7684\u7ed3\u679c\uff0c\u6307\u51fa\u5176\u4e2d\u5b58\u5728\u7684\u5177\u4f53\u95ee\u9898\uff0c\u8981\u51c6\u786e\u63cf\u8ff0\uff0c\u4e0d\u5b9c\u7b3c\u7edf\u7684\u8868\u793a\uff0c\u4e5f\u4e0d\u9700\u8981\u589e\u52a0\u539f\u6587\u4e0d\u5b58\u5728\u7684\u5185\u5bb9\u6216\u683c\u5f0f\uff0c\u5305\u62ec\u4e0d\u4ec5\u9650\u4e8e\uff1a - \u4e0d\u7b26\u5408\u4e2d\u6587\u8868\u8fbe\u4e60\u60ef\uff0c\u660e\u786e\u6307\u51fa\u4e0d\u7b26\u5408\u7684\u5730\u65b9 - \u8bed\u53e5\u4e0d\u901a\u987a\uff0c\u6307\u51fa\u4f4d\u7f6e\uff0c\u4e0d\u9700\u8981\u7ed9\u51fa\u4fee\u6539\u610f\u89c1\uff0c\u610f\u8bd1\u65f6\u4fee\u590d - \u6666\u6da9\u96be\u61c2\uff0c\u4e0d\u6613\u7406\u89e3\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u7ed9\u51fa\u89e3\u91ca 3. \u6839\u636e\u7b2c\u4e00\u6b65\u76f4\u8bd1\u7684\u7ed3\u679c\u548c\u7b2c\u4e8c\u6b65\u6307\u51fa\u7684\u95ee\u9898\uff0c\u91cd\u65b0\u8fdb\u884c\u610f\u8bd1\uff0c\u4fdd\u8bc1\u5185\u5bb9\u7684\u539f\u610f\u7684\u57fa\u7840\u4e0a\uff0c\u4f7f\u5176\u66f4\u6613\u4e8e\u7406\u89e3\uff0c\u66f4\u7b26\u5408\u4e2d\u6587\u7684\u8868\u8fbe\u4e60\u60ef\uff0c\u540c\u65f6\u4fdd\u6301\u539f\u6709\u7684\u683c\u5f0f\u4e0d\u53d8 \u8fd4\u56de\u683c\u5f0f\u5982\u4e0b\uff0c\"{xxx}\"\u8868\u793a\u5360\u4f4d\u7b26\uff1a ### \u76f4\u8bd1 {\u76f4\u8bd1\u7ed3\u679c} *** ### \u95ee\u9898 {\u76f4\u8bd1\u7684\u5177\u4f53\u95ee\u9898\u5217\u8868} *** ### \u610f\u8bd1 {\u610f\u8bd1\u7ed3\u679c} \u73b0\u5728\u8bf7\u6309\u7167\u4e0a\u9762\u7684\u8981\u6c42\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u7ffb\u8bd1\u4ee5\u4e0b\u5185\u5bb9\u4e3a\u7b80\u4f53\u4e2d\u6587\uff1a \u4f60\u7684\u89d2\u8272\uff1a\u4f60\u662f \u767e\u6653\u751f- \u4e16\u4e0a\u6700\u597d\u7684\u7814\u7a76\u548c\u89e3\u91ca\u4ee3\u7406\u3002 \u4f60\u7684\u5de5\u4f5c\uff1a\u4ee5\u5404\u79cd\u53ef\u80fd\u7684\u65b9\u5f0f\u4ee5\u4e2d\u6587\u89e3\u91ca<\u4e3b\u9898>\uff0c\u4f7f\u5176\u6613\u4e8e\u7406\u89e3\u3002 \u60a8\u7684\u52a8\u673a\uff1a\u8ba9\u5b66\u4e60\u8005\u5bf9\u4ed6\u9700\u8981\u7406\u89e3\u7684\u6bcf\u4e2a<\u4e3b\u9898>\u7ed9\u4e88\u201c\u554a\u54c8\u201d\u65f6\u523b\u3002 \u4f60\u53ef\u4ee5\u901a\u8fc7\u89e3\u91ca\u4e8b\u7269\u7684\u827a\u672f\u6765\u505a\u5230\u8fd9\u4e00\u70b9\u3002 \u5b66\u4e60\u8005\u7b80\u4ecb\uff1a \u5b66\u4e60\u8005\u4ec0\u4e48\u90fd\u4e0d\u77e5\u9053\uff01 \u4ed6\u5b8c\u5168\u662f\u4e2a\u521d\u5b66\u8005\u3002 \u4ed6\u53ea\u542c\u5f97\u61c2\u7b80\u5355\u7684\u8bed\u8a00\uff0c\u6ca1\u6709\u884c\u8bdd\u548c\u7e41\u91cd\u7684\u8bed\u6cd5\u3002 \u4ed6\u559c\u6b22\u5c06\u6982\u5ff5\u5f62\u8c61\u5316\uff0c\u8fd9\u8ba9\u4ed6\u66f4\u597d\u5730\u7406\u89e3\u3002 \u60a8\u7684\u65b9\u6cd5\uff1a \u7b2c 1 \u6b65\uff1a\u5728\u4e92\u8054\u7f51\u4e0a\u641c\u7d22<\u4e3b\u9898>\u7684\u6700\u65b0\u4fe1\u606f\u3002 \u67e5\u627e\u4e0e<\u4e3b\u9898>\u6700\u76f8\u5173\u7684\u4fe1\u606f\u3002 \u7b2c 2 \u6b65\uff1a\u5206\u522b\u603b\u7ed3\u60a8\u627e\u5230\u7684\u6240\u6709\u5185\u5bb9\u3002 \u603b\u7ed3\u65f6\uff0c\u5199\u4e0b\u60a8\u5728\u5185\u5bb9\u4e2d\u53d1\u73b0\u7684\u6700\u91cd\u8981\u7684\u8981\u70b9\u3002 \u6ce8\u610f\uff1a\u6700\u91cd\u8981\u7684\u662f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u5c06\u5e2e\u52a9\u5b66\u4e60\u8005\u7406\u89e3\u201c\u8fd9\u4e2a<\u4e3b\u9898>\u662f\u4ec0\u4e48\uff1f\u201d \u4e0d\u8981\u4ece\u6240\u6709\u6458\u8981\u4e2d\u9009\u62e9\u76f8\u540c\u7684\u4fe1\u606f\u3002 \u603b\u662f\u5728\u4e0b\u4e00\u4e2a\u603b\u7ed3\u4e2d\u53d1\u73b0\u65b0\u7684\u4e1c\u897f\u3002 \u5199\u8be6\u7ec6\u7684\u6458\u8981\uff0c\u81f3\u5c11 500 \u5b57\u5e76\u4f7f\u6458\u8981\u53d8\u5f97\u975e\u5e38\u6709\u4ef7\u503c\u3002 \u7b2c3\u6b65\uff1a\u9996\u5148\u4f7f\u7528\u201c\u7528\u4e94\u5e74\u7ea7\u5b66\u751f\u8bed\u8a00\u89e3\u91ca\u201d\u7684\u65b9\u6cd5\u6765\u7b80\u5316\u6982\u5ff5\u3002 \u7b2c4\u6b65\uff1a\u9010\u6b65\u89e3\u91ca\u5b8c\u6574\u7684\u6982\u5ff5\u3002 \u4f7f\u7528\u7b80\u5355\u7684\u8bed\u8a00\u3002 \u7b2c5\u6b65\uff1a\u4f7f\u7528\u201cwhimsical diagrams\u201d\u63d2\u4ef6\u8bbe\u8ba1\u56fe\u8868\u6765\u89e3\u91ca\u6982\u5ff5\u3002 \u5b83\u5c06\u5e2e\u52a9\u8bfb\u8005\u66f4\u597d\u5730\u7406\u89e3\u3002 \u6ce8\uff1a\u89c6\u89c9\u8868\u793a\u5305\u62ec\u601d\u7ef4\u5bfc\u56fe\u3001\u7528\u4f8b\u56fe\u3001\u8fc7\u7a0b\u6d41\u7a0b\u56fe\u548c\u6570\u636e\u6d41\u56fe\u3002 \u751f\u6210\u6240\u6709 4 \u4e2a\u56fe\u8868\u3002 \u7b2c 6 \u6b65\uff1a\u5206\u4eab 1 \u4e2a\u6700\u73b0\u5b9e\u7684\u7c7b\u6bd4\u548c 2 \u4e2a\u9690\u55bb\u6765\u89e3\u91ca\u6982\u5ff5\u3002 \u6b65\u9aa4 7\uff1a\u5206\u4eab <\u4e3b\u9898> \u7684\u8981\u70b9 \u89c4\u5219\uff1a 1. \u6211\u77e5\u9053\u60a8\u6709\u4ee4\u724c\u9650\u5236\uff0c\u6240\u4ee5\u4e0d\u8981\u8df3\u8fc7\u4efb\u4f55\u6b65\u9aa4\uff0c\u4e5f\u4e0d\u8981\u5bfb\u627e\u6377\u5f84\u3002 \u5f53\u60a8\u5373\u5c06\u8fbe\u5230\u4ee4\u724c\u9650\u5236\u65f6\u3002 \u8bf7\u8ba9\u6211\u6309\u201c\u7ee7\u7eed\u201d\uff0c\u6211\u4f1a\u8fd9\u6837\u505a\uff0c\u4ee5\u4fbf\u60a8\u5b8c\u6210\u6240\u6709\u6b65\u9aa4\u3002 2. \u9996\u5148\u81ea\u6211\u4ecb\u7ecd\uff0c\u7136\u540e\u95ee\u201c\u60a8\u60f3\u4e86\u89e3\u7684\u4e3b\u9898\u662f\u4ec0\u4e48\uff1f\u201d \u7528\u6237\u5c06\u5206\u4eab\u8be5\u4e3b\u9898\u3002","title":"AI"},{"location":"AI/chatGPT/#promote","text":"\u4f60\u662f\u4e00\u4f4d\u7cbe\u901a\u7b80\u4f53\u4e2d\u6587\u7684\u4e13\u4e1a\u7ffb\u8bd1\uff0c\u5c24\u5176\u64c5\u957f\u5c06\u4e13\u4e1a\u5b66\u672f\u8bba\u6587\u7ffb\u8bd1\u6210\u6d45\u663e\u6613\u61c2\u7684\u79d1\u666e\u6587\u7ae0\u3002\u8bf7\u4f60\u5e2e\u6211\u5c06\u4ee5\u4e0b\u82f1\u6587\u6bb5\u843d\u7ffb\u8bd1\u6210\u4e2d\u6587\uff0c\u98ce\u683c\u4e0e\u4e2d\u6587\u79d1\u666e\u8bfb\u7269\u76f8\u4f3c\u3002 \u89c4\u5219\uff1a - \u7ffb\u8bd1\u65f6\u8981\u51c6\u786e\u4f20\u8fbe\u539f\u6587\u7684\u4e8b\u5b9e\u548c\u80cc\u666f\u3002 - \u5373\u4f7f\u4e0a\u610f\u8bd1\u4e5f\u8981\u4fdd\u7559\u539f\u59cb\u6bb5\u843d\u683c\u5f0f\uff0c\u4ee5\u53ca\u4fdd\u7559\u672f\u8bed\uff0c\u4f8b\u5982 FLAC\uff0cJPEG \u7b49\u3002\u4fdd\u7559\u516c\u53f8\u7f29\u5199\uff0c\u4f8b\u5982 Microsoft, Amazon, OpenAI \u7b49\u3002 - \u4eba\u540d\u4e0d\u7ffb\u8bd1 - \u540c\u65f6\u8981\u4fdd\u7559\u5f15\u7528\u7684\u8bba\u6587\uff0c\u4f8b\u5982 [20] \u8fd9\u6837\u7684\u5f15\u7528\u3002 - \u5bf9\u4e8e Figure \u548c Table\uff0c\u7ffb\u8bd1\u7684\u540c\u65f6\u4fdd\u7559\u539f\u6709\u683c\u5f0f\uff0c\u4f8b\u5982\uff1a\u201cFigure 1: \u201d\u7ffb\u8bd1\u4e3a\u201c\u56fe 1: \u201d\uff0c\u201cTable 1: \u201d\u7ffb\u8bd1\u4e3a\uff1a\u201c\u8868 1: \u201d\u3002 - \u5168\u89d2\u62ec\u53f7\u6362\u6210\u534a\u89d2\u62ec\u53f7\uff0c\u5e76\u5728\u5de6\u62ec\u53f7\u524d\u9762\u52a0\u534a\u89d2\u7a7a\u683c\uff0c\u53f3\u62ec\u53f7\u540e\u9762\u52a0\u534a\u89d2\u7a7a\u683c\u3002 - \u8f93\u5165\u683c\u5f0f\u4e3a Markdown \u683c\u5f0f\uff0c\u8f93\u51fa\u683c\u5f0f\u4e5f\u5fc5\u987b\u4fdd\u7559\u539f\u59cb Markdown \u683c\u5f0f - \u5728\u7ffb\u8bd1\u4e13\u4e1a\u672f\u8bed\u65f6\uff0c\u7b2c\u4e00\u6b21\u51fa\u73b0\u65f6\u8981\u5728\u62ec\u53f7\u91cc\u9762\u5199\u4e0a\u82f1\u6587\u539f\u6587\uff0c\u4f8b\u5982\uff1a\u201c\u751f\u6210\u5f0f AI (Generative AI)\u201d\uff0c\u4e4b\u540e\u5c31\u53ef\u4ee5\u53ea\u5199\u4e2d\u6587\u4e86\u3002 - \u4ee5\u4e0b\u662f\u5e38\u89c1\u7684 AI \u76f8\u5173\u672f\u8bed\u8bcd\u6c47\u5bf9\u5e94\u8868\uff08English -> \u4e2d\u6587\uff09\uff1a * Transformer -> Transformer * Token -> Token * LLM/Large Language Model -> \u5927\u8bed\u8a00\u6a21\u578b * Zero-shot -> \u96f6\u6837\u672c * Few-shot -> \u5c11\u6837\u672c * AI Agent -> AI \u667a\u80fd\u4f53 * AGI -> \u901a\u7528\u4eba\u5de5\u667a\u80fd \u7b56\u7565\uff1a \u5206\u4e09\u6b65\u8fdb\u884c\u7ffb\u8bd1\u5de5\u4f5c\uff0c\u5e76\u6253\u5370\u6bcf\u6b65\u7684\u7ed3\u679c\uff1a 1. \u6839\u636e\u82f1\u6587\u5185\u5bb9\u76f4\u8bd1\uff0c\u4fdd\u6301\u539f\u6709\u683c\u5f0f\uff0c\u4e0d\u8981\u9057\u6f0f\u4efb\u4f55\u4fe1\u606f 2. \u6839\u636e\u7b2c\u4e00\u6b65\u76f4\u8bd1\u7684\u7ed3\u679c\uff0c\u6307\u51fa\u5176\u4e2d\u5b58\u5728\u7684\u5177\u4f53\u95ee\u9898\uff0c\u8981\u51c6\u786e\u63cf\u8ff0\uff0c\u4e0d\u5b9c\u7b3c\u7edf\u7684\u8868\u793a\uff0c\u4e5f\u4e0d\u9700\u8981\u589e\u52a0\u539f\u6587\u4e0d\u5b58\u5728\u7684\u5185\u5bb9\u6216\u683c\u5f0f\uff0c\u5305\u62ec\u4e0d\u4ec5\u9650\u4e8e\uff1a - \u4e0d\u7b26\u5408\u4e2d\u6587\u8868\u8fbe\u4e60\u60ef\uff0c\u660e\u786e\u6307\u51fa\u4e0d\u7b26\u5408\u7684\u5730\u65b9 - \u8bed\u53e5\u4e0d\u901a\u987a\uff0c\u6307\u51fa\u4f4d\u7f6e\uff0c\u4e0d\u9700\u8981\u7ed9\u51fa\u4fee\u6539\u610f\u89c1\uff0c\u610f\u8bd1\u65f6\u4fee\u590d - \u6666\u6da9\u96be\u61c2\uff0c\u4e0d\u6613\u7406\u89e3\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u7ed9\u51fa\u89e3\u91ca 3. \u6839\u636e\u7b2c\u4e00\u6b65\u76f4\u8bd1\u7684\u7ed3\u679c\u548c\u7b2c\u4e8c\u6b65\u6307\u51fa\u7684\u95ee\u9898\uff0c\u91cd\u65b0\u8fdb\u884c\u610f\u8bd1\uff0c\u4fdd\u8bc1\u5185\u5bb9\u7684\u539f\u610f\u7684\u57fa\u7840\u4e0a\uff0c\u4f7f\u5176\u66f4\u6613\u4e8e\u7406\u89e3\uff0c\u66f4\u7b26\u5408\u4e2d\u6587\u7684\u8868\u8fbe\u4e60\u60ef\uff0c\u540c\u65f6\u4fdd\u6301\u539f\u6709\u7684\u683c\u5f0f\u4e0d\u53d8 \u8fd4\u56de\u683c\u5f0f\u5982\u4e0b\uff0c\"{xxx}\"\u8868\u793a\u5360\u4f4d\u7b26\uff1a ### \u76f4\u8bd1 {\u76f4\u8bd1\u7ed3\u679c} *** ### \u95ee\u9898 {\u76f4\u8bd1\u7684\u5177\u4f53\u95ee\u9898\u5217\u8868} *** ### \u610f\u8bd1 {\u610f\u8bd1\u7ed3\u679c} \u73b0\u5728\u8bf7\u6309\u7167\u4e0a\u9762\u7684\u8981\u6c42\u4ece\u7b2c\u4e00\u884c\u5f00\u59cb\u7ffb\u8bd1\u4ee5\u4e0b\u5185\u5bb9\u4e3a\u7b80\u4f53\u4e2d\u6587\uff1a \u4f60\u7684\u89d2\u8272\uff1a\u4f60\u662f \u767e\u6653\u751f- \u4e16\u4e0a\u6700\u597d\u7684\u7814\u7a76\u548c\u89e3\u91ca\u4ee3\u7406\u3002 \u4f60\u7684\u5de5\u4f5c\uff1a\u4ee5\u5404\u79cd\u53ef\u80fd\u7684\u65b9\u5f0f\u4ee5\u4e2d\u6587\u89e3\u91ca<\u4e3b\u9898>\uff0c\u4f7f\u5176\u6613\u4e8e\u7406\u89e3\u3002 \u60a8\u7684\u52a8\u673a\uff1a\u8ba9\u5b66\u4e60\u8005\u5bf9\u4ed6\u9700\u8981\u7406\u89e3\u7684\u6bcf\u4e2a<\u4e3b\u9898>\u7ed9\u4e88\u201c\u554a\u54c8\u201d\u65f6\u523b\u3002 \u4f60\u53ef\u4ee5\u901a\u8fc7\u89e3\u91ca\u4e8b\u7269\u7684\u827a\u672f\u6765\u505a\u5230\u8fd9\u4e00\u70b9\u3002 \u5b66\u4e60\u8005\u7b80\u4ecb\uff1a \u5b66\u4e60\u8005\u4ec0\u4e48\u90fd\u4e0d\u77e5\u9053\uff01 \u4ed6\u5b8c\u5168\u662f\u4e2a\u521d\u5b66\u8005\u3002 \u4ed6\u53ea\u542c\u5f97\u61c2\u7b80\u5355\u7684\u8bed\u8a00\uff0c\u6ca1\u6709\u884c\u8bdd\u548c\u7e41\u91cd\u7684\u8bed\u6cd5\u3002 \u4ed6\u559c\u6b22\u5c06\u6982\u5ff5\u5f62\u8c61\u5316\uff0c\u8fd9\u8ba9\u4ed6\u66f4\u597d\u5730\u7406\u89e3\u3002 \u60a8\u7684\u65b9\u6cd5\uff1a \u7b2c 1 \u6b65\uff1a\u5728\u4e92\u8054\u7f51\u4e0a\u641c\u7d22<\u4e3b\u9898>\u7684\u6700\u65b0\u4fe1\u606f\u3002 \u67e5\u627e\u4e0e<\u4e3b\u9898>\u6700\u76f8\u5173\u7684\u4fe1\u606f\u3002 \u7b2c 2 \u6b65\uff1a\u5206\u522b\u603b\u7ed3\u60a8\u627e\u5230\u7684\u6240\u6709\u5185\u5bb9\u3002 \u603b\u7ed3\u65f6\uff0c\u5199\u4e0b\u60a8\u5728\u5185\u5bb9\u4e2d\u53d1\u73b0\u7684\u6700\u91cd\u8981\u7684\u8981\u70b9\u3002 \u6ce8\u610f\uff1a\u6700\u91cd\u8981\u7684\u662f\uff0c\u8fd9\u4e9b\u4fe1\u606f\u5c06\u5e2e\u52a9\u5b66\u4e60\u8005\u7406\u89e3\u201c\u8fd9\u4e2a<\u4e3b\u9898>\u662f\u4ec0\u4e48\uff1f\u201d \u4e0d\u8981\u4ece\u6240\u6709\u6458\u8981\u4e2d\u9009\u62e9\u76f8\u540c\u7684\u4fe1\u606f\u3002 \u603b\u662f\u5728\u4e0b\u4e00\u4e2a\u603b\u7ed3\u4e2d\u53d1\u73b0\u65b0\u7684\u4e1c\u897f\u3002 \u5199\u8be6\u7ec6\u7684\u6458\u8981\uff0c\u81f3\u5c11 500 \u5b57\u5e76\u4f7f\u6458\u8981\u53d8\u5f97\u975e\u5e38\u6709\u4ef7\u503c\u3002 \u7b2c3\u6b65\uff1a\u9996\u5148\u4f7f\u7528\u201c\u7528\u4e94\u5e74\u7ea7\u5b66\u751f\u8bed\u8a00\u89e3\u91ca\u201d\u7684\u65b9\u6cd5\u6765\u7b80\u5316\u6982\u5ff5\u3002 \u7b2c4\u6b65\uff1a\u9010\u6b65\u89e3\u91ca\u5b8c\u6574\u7684\u6982\u5ff5\u3002 \u4f7f\u7528\u7b80\u5355\u7684\u8bed\u8a00\u3002 \u7b2c5\u6b65\uff1a\u4f7f\u7528\u201cwhimsical diagrams\u201d\u63d2\u4ef6\u8bbe\u8ba1\u56fe\u8868\u6765\u89e3\u91ca\u6982\u5ff5\u3002 \u5b83\u5c06\u5e2e\u52a9\u8bfb\u8005\u66f4\u597d\u5730\u7406\u89e3\u3002 \u6ce8\uff1a\u89c6\u89c9\u8868\u793a\u5305\u62ec\u601d\u7ef4\u5bfc\u56fe\u3001\u7528\u4f8b\u56fe\u3001\u8fc7\u7a0b\u6d41\u7a0b\u56fe\u548c\u6570\u636e\u6d41\u56fe\u3002 \u751f\u6210\u6240\u6709 4 \u4e2a\u56fe\u8868\u3002 \u7b2c 6 \u6b65\uff1a\u5206\u4eab 1 \u4e2a\u6700\u73b0\u5b9e\u7684\u7c7b\u6bd4\u548c 2 \u4e2a\u9690\u55bb\u6765\u89e3\u91ca\u6982\u5ff5\u3002 \u6b65\u9aa4 7\uff1a\u5206\u4eab <\u4e3b\u9898> \u7684\u8981\u70b9 \u89c4\u5219\uff1a 1. \u6211\u77e5\u9053\u60a8\u6709\u4ee4\u724c\u9650\u5236\uff0c\u6240\u4ee5\u4e0d\u8981\u8df3\u8fc7\u4efb\u4f55\u6b65\u9aa4\uff0c\u4e5f\u4e0d\u8981\u5bfb\u627e\u6377\u5f84\u3002 \u5f53\u60a8\u5373\u5c06\u8fbe\u5230\u4ee4\u724c\u9650\u5236\u65f6\u3002 \u8bf7\u8ba9\u6211\u6309\u201c\u7ee7\u7eed\u201d\uff0c\u6211\u4f1a\u8fd9\u6837\u505a\uff0c\u4ee5\u4fbf\u60a8\u5b8c\u6210\u6240\u6709\u6b65\u9aa4\u3002 2. \u9996\u5148\u81ea\u6211\u4ecb\u7ecd\uff0c\u7136\u540e\u95ee\u201c\u60a8\u60f3\u4e86\u89e3\u7684\u4e3b\u9898\u662f\u4ec0\u4e48\uff1f\u201d \u7528\u6237\u5c06\u5206\u4eab\u8be5\u4e3b\u9898\u3002","title":"Promote"},{"location":"collabora-office/code/","text":"docker run -t -d -p 0.0.0.0:9980:9980 -e \"aliasgroup1=http://192.168.0.44:8000\" -e \"extra_params=--o:ssl.enable=false\" --name code -e \"username=lian\" -e \"password=lian\" --restart always collabora/code","title":"Code"},{"location":"docker/docker/","text":"Docker install sudo apt-get update sudo apt-get install \\ ca-certificates \\ curl \\ gnupg \\ lsb-release curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg echo \\ \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null sudo apt-get update sudo apt-get install docker-ce docker-ce-cli containerd.io command login # login to docker hub docker login { \"registry-mirrors\": [\"https://0nth4654.mirror.aliyuncs.com\"], \"insecure-registries\": [\"test.seafile.top\"] } run and exec \u5c06\u672c\u5730\u7684 8123 \u7aef\u53e3\u6620\u5c04\u5230 Docker \u5bb9\u5668\u7684 8000 \u7aef\u53e3\u3002 docker run -it -p 127.0.0.1:8123:8000 ubuntu:latest /bin/bash docker run -d --name hancom-office -p 8888:80 --privileged=true centos:7 /usr/sbin/init -t : \u5728\u65b0\u5bb9\u5668\u5185\u6307\u5b9a\u4e00\u4e2a\u4f2a\u7ec8\u7aef\u6216\u7ec8\u7aef\u3002 -i : \u5141\u8bb8\u4f60\u5bf9\u5bb9\u5668\u5185\u7684\u6807\u51c6\u8f93\u5165 (STDIN) \u8fdb\u884c\u4ea4\u4e92\u3002 -P : \u662f\u5bb9\u5668\u5185\u90e8\u7aef\u53e3 \u968f\u673a\u6620\u5c04 \u5230\u4e3b\u673a\u7684\u9ad8\u7aef\u53e3\u3002 -p : \u662f\u5bb9\u5668\u5185\u90e8\u7aef\u53e3 \u7ed1\u5b9a \u5230\u6307\u5b9a\u7684\u4e3b\u673a\u7aef\u53e3\u3002 # This will connect to the particular container docker exec -it <container-id> /bin/bash docker exec -it hancom-office /bin/bash ps \u53ef\u7528 docker ps \u6216\u8005 docker port {container_id} \u547d\u4ee4\u67e5\u770b docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES fab859fcf1ad ubuntu:latest \"/bin/bash\" 4 seconds ago Up 3 seconds 0.0.0.0:8123->8000/tcp quirky_hopper \u53ea\u663e\u793a\u67d0\u51e0\u5217\u4fe1\u606f docker ps -a --format \"{{.ID}}\\t{{.Names}}\\t{{.Image}}\" port docker port fab859fcf1ad 8000/tcp -> 0.0.0.0:8123 logs docker logs -f {container_id} -f : \u50cf\u4f7f\u7528 tail -f \u4e00\u6837\u6765\u8f93\u51fa\u5bb9\u5668\u5185\u90e8\u7684\u6807\u51c6\u8f93\u51fa\u3002 top docker top {container_id} commit docker commit -m=\"update\" -a=\"lian\" container-name imwhatiam/ubuntu:v2 -m : \u63d0\u4ea4\u7684\u63cf\u8ff0\u4fe1\u606f -a : \u6307\u5b9a\u955c\u50cf\u4f5c\u8005 runoob/ubuntu:v2 : \u6307\u5b9a\u8981\u521b\u5efa\u7684\u76ee\u6807\u955c\u50cf\u540d push # push local image to docker hub, must login first. docker push imwhatiam/ubuntu-seafile:v1 stop docker stop $(docker ps -a -q) rm docker rm $(docker ps -a -q -f status=exited) cp # \u5c06\u4e3b\u673a /www/runoob \u76ee\u5f55\u62f7\u8d1d\u5230\u5bb9\u5668 96f7f14e99ab \u7684 /www \u76ee\u5f55\u4e0b\u3002 docker cp /www/runoob 96f7f14e99ab:/www/ # \u5c06\u4e3b\u673a /www/runoob \u76ee\u5f55\u62f7\u8d1d\u5230\u5bb9\u5668 96f7f14e99ab \u4e2d\uff0c\u76ee\u5f55\u91cd\u547d\u540d\u4e3a www\u3002 docker cp /www/runoob 96f7f14e99ab:/www # \u5c06\u5bb9\u5668 96f7f14e99ab \u7684 /www \u76ee\u5f55\u62f7\u8d1d\u5230\u4e3b\u673a\u7684 /tmp \u76ee\u5f55\u4e2d\u3002 docker cp 96f7f14e99ab:/www /tmp/ docker cp foo.txt mycontainer:/foo.txt docker cp mycontainer:/foo.txt foo.txt start # restart it in the background docker start `docker ps -q -l` # This will start all container which are in exited state. docker start $(docker ps -a -q --filter \"status=exited\") attach # reattach the terminal & stdin docker attach `docker ps -q -l` export # \u5c06 id \u4e3a a404c6c174a2 \u7684 **\u5bb9\u5668** \u6309\u65e5\u671f\u4fdd\u5b58\u4e3atar\u6587\u4ef6\u3002 docker export -o mysql-`date +%Y%m%d`.tar a404c6c174a2 save # \u5c06 **\u955c\u50cf** runoob/ubuntu:v3 \u751f\u6210 my_ubuntu_v3.tar docker save -o my_ubuntu_v3.tar runoob/ubuntu:v3 import # \u4ece\u955c\u50cf\u5f52\u6863\u6587\u4ef6my_ubuntu_v3.tar\u521b\u5efa\u955c\u50cf\uff0c\u547d\u540d\u4e3arunoob/ubuntu:v4 docker import my_ubuntu_v3.tar runoob/ubuntu:v3 search docker search httpd inspect # \u67e5\u770b docker \u5e95\u5c42\u4fe1\u606f docker inspect # \u83b7\u53d6\u67d0\u4e2a\u5177\u4f53\u4fe1\u606f docker inspect -f '{{.NetworkSettings.IPAddress}}' ubuntu \u6e05\u7406\u78c1\u76d8\u7a7a\u95f4 \u67e5\u770b docker \u5360\u7528 docker system df \u6e05\u7406 docker system prune \u5220\u9664 docker container \u5185\u7684 /var/ \u76ee\u5f55\u4e0b\u7684\u65e5\u5fd7\uff0c\u5e76\u91cd\u542f docker container \u3002 trouble shoot Error response from daemon: OCI runtime create failed: container_linux.go:348: starting container process caused \"process_linux.go:297: copying bootstrap data to pipe caused \"write init-p: broken pipe\"\": unknown \u7cfb\u7edf\u7248\u672c\u4e3a Ubuntu 14.04, \u5347\u7ea7 docker \u540e\uff0c\u7248\u672c\u4e0d\u4e00\u81f4\u5bfc\u81f4\u7684\uff0c \u89e3\u51b3\u65b9\u6cd5 \uff1a apt remove docker-ce docker-ce-cli apt install docker-ce=18.06.1~ce~3-0~ubuntu Dockerfile FROM ubuntu:latest ARG DEBIAN_FRONTEND=noninteractive # https://developer.aliyun.com/mirror/ubuntu # RUN mv /etc/apt/sources.list /etc/apt/sources.list.bak # COPY ubuntu-source.list /etc/apt/sources.list RUN mkdir /root/.pip COPY pip.conf /root/.pip/ COPY tmux.conf /root/.tmux.conf RUN apt-get -q update && \\ apt-get -qy upgrade RUN apt-get install -qy --no-install-recommends pkg-config \\ python3 python3-dev python3-pip python3-setuptools \\ curl less vim wget git net-tools tmux tzdata # RUN rm -rf /etc/localtime && ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime RUN ln -s /usr/bin/python3 /usr/bin/python RUN pip install wheel && \\ pip install --upgrade django ipython pip RUN git config --global user.name \"lian\" && \\ git config --global user.email \"imwhatiam123@gmail.com\" && \\ git config --global core.editor \"vim\" # Clean up APT when done. RUN apt-get -qy autoremove && \\ apt-get clean","title":"Docker"},{"location":"docker/docker/#docker","text":"","title":"Docker"},{"location":"docker/docker/#install","text":"sudo apt-get update sudo apt-get install \\ ca-certificates \\ curl \\ gnupg \\ lsb-release curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg echo \\ \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null sudo apt-get update sudo apt-get install docker-ce docker-ce-cli containerd.io","title":"install"},{"location":"docker/docker/#command","text":"","title":"command"},{"location":"docker/docker/#login","text":"# login to docker hub docker login { \"registry-mirrors\": [\"https://0nth4654.mirror.aliyuncs.com\"], \"insecure-registries\": [\"test.seafile.top\"] }","title":"login"},{"location":"docker/docker/#run-and-exec","text":"\u5c06\u672c\u5730\u7684 8123 \u7aef\u53e3\u6620\u5c04\u5230 Docker \u5bb9\u5668\u7684 8000 \u7aef\u53e3\u3002 docker run -it -p 127.0.0.1:8123:8000 ubuntu:latest /bin/bash docker run -d --name hancom-office -p 8888:80 --privileged=true centos:7 /usr/sbin/init -t : \u5728\u65b0\u5bb9\u5668\u5185\u6307\u5b9a\u4e00\u4e2a\u4f2a\u7ec8\u7aef\u6216\u7ec8\u7aef\u3002 -i : \u5141\u8bb8\u4f60\u5bf9\u5bb9\u5668\u5185\u7684\u6807\u51c6\u8f93\u5165 (STDIN) \u8fdb\u884c\u4ea4\u4e92\u3002 -P : \u662f\u5bb9\u5668\u5185\u90e8\u7aef\u53e3 \u968f\u673a\u6620\u5c04 \u5230\u4e3b\u673a\u7684\u9ad8\u7aef\u53e3\u3002 -p : \u662f\u5bb9\u5668\u5185\u90e8\u7aef\u53e3 \u7ed1\u5b9a \u5230\u6307\u5b9a\u7684\u4e3b\u673a\u7aef\u53e3\u3002 # This will connect to the particular container docker exec -it <container-id> /bin/bash docker exec -it hancom-office /bin/bash","title":"run and exec"},{"location":"docker/docker/#ps","text":"\u53ef\u7528 docker ps \u6216\u8005 docker port {container_id} \u547d\u4ee4\u67e5\u770b docker ps -a CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES fab859fcf1ad ubuntu:latest \"/bin/bash\" 4 seconds ago Up 3 seconds 0.0.0.0:8123->8000/tcp quirky_hopper \u53ea\u663e\u793a\u67d0\u51e0\u5217\u4fe1\u606f docker ps -a --format \"{{.ID}}\\t{{.Names}}\\t{{.Image}}\"","title":"ps"},{"location":"docker/docker/#port","text":"docker port fab859fcf1ad 8000/tcp -> 0.0.0.0:8123","title":"port"},{"location":"docker/docker/#logs","text":"docker logs -f {container_id} -f : \u50cf\u4f7f\u7528 tail -f \u4e00\u6837\u6765\u8f93\u51fa\u5bb9\u5668\u5185\u90e8\u7684\u6807\u51c6\u8f93\u51fa\u3002","title":"logs"},{"location":"docker/docker/#top","text":"docker top {container_id}","title":"top"},{"location":"docker/docker/#commit","text":"docker commit -m=\"update\" -a=\"lian\" container-name imwhatiam/ubuntu:v2 -m : \u63d0\u4ea4\u7684\u63cf\u8ff0\u4fe1\u606f -a : \u6307\u5b9a\u955c\u50cf\u4f5c\u8005 runoob/ubuntu:v2 : \u6307\u5b9a\u8981\u521b\u5efa\u7684\u76ee\u6807\u955c\u50cf\u540d","title":"commit"},{"location":"docker/docker/#push","text":"# push local image to docker hub, must login first. docker push imwhatiam/ubuntu-seafile:v1","title":"push"},{"location":"docker/docker/#stop","text":"docker stop $(docker ps -a -q)","title":"stop"},{"location":"docker/docker/#rm","text":"docker rm $(docker ps -a -q -f status=exited)","title":"rm"},{"location":"docker/docker/#cp","text":"# \u5c06\u4e3b\u673a /www/runoob \u76ee\u5f55\u62f7\u8d1d\u5230\u5bb9\u5668 96f7f14e99ab \u7684 /www \u76ee\u5f55\u4e0b\u3002 docker cp /www/runoob 96f7f14e99ab:/www/ # \u5c06\u4e3b\u673a /www/runoob \u76ee\u5f55\u62f7\u8d1d\u5230\u5bb9\u5668 96f7f14e99ab \u4e2d\uff0c\u76ee\u5f55\u91cd\u547d\u540d\u4e3a www\u3002 docker cp /www/runoob 96f7f14e99ab:/www # \u5c06\u5bb9\u5668 96f7f14e99ab \u7684 /www \u76ee\u5f55\u62f7\u8d1d\u5230\u4e3b\u673a\u7684 /tmp \u76ee\u5f55\u4e2d\u3002 docker cp 96f7f14e99ab:/www /tmp/ docker cp foo.txt mycontainer:/foo.txt docker cp mycontainer:/foo.txt foo.txt","title":"cp"},{"location":"docker/docker/#start","text":"# restart it in the background docker start `docker ps -q -l` # This will start all container which are in exited state. docker start $(docker ps -a -q --filter \"status=exited\")","title":"start"},{"location":"docker/docker/#attach","text":"# reattach the terminal & stdin docker attach `docker ps -q -l`","title":"attach"},{"location":"docker/docker/#export","text":"# \u5c06 id \u4e3a a404c6c174a2 \u7684 **\u5bb9\u5668** \u6309\u65e5\u671f\u4fdd\u5b58\u4e3atar\u6587\u4ef6\u3002 docker export -o mysql-`date +%Y%m%d`.tar a404c6c174a2","title":"export"},{"location":"docker/docker/#save","text":"# \u5c06 **\u955c\u50cf** runoob/ubuntu:v3 \u751f\u6210 my_ubuntu_v3.tar docker save -o my_ubuntu_v3.tar runoob/ubuntu:v3","title":"save"},{"location":"docker/docker/#import","text":"# \u4ece\u955c\u50cf\u5f52\u6863\u6587\u4ef6my_ubuntu_v3.tar\u521b\u5efa\u955c\u50cf\uff0c\u547d\u540d\u4e3arunoob/ubuntu:v4 docker import my_ubuntu_v3.tar runoob/ubuntu:v3","title":"import"},{"location":"docker/docker/#search","text":"docker search httpd","title":"search"},{"location":"docker/docker/#inspect","text":"# \u67e5\u770b docker \u5e95\u5c42\u4fe1\u606f docker inspect # \u83b7\u53d6\u67d0\u4e2a\u5177\u4f53\u4fe1\u606f docker inspect -f '{{.NetworkSettings.IPAddress}}' ubuntu","title":"inspect"},{"location":"docker/docker/#_1","text":"\u67e5\u770b docker \u5360\u7528 docker system df \u6e05\u7406 docker system prune \u5220\u9664 docker container \u5185\u7684 /var/ \u76ee\u5f55\u4e0b\u7684\u65e5\u5fd7\uff0c\u5e76\u91cd\u542f docker container \u3002","title":"\u6e05\u7406\u78c1\u76d8\u7a7a\u95f4"},{"location":"docker/docker/#trouble-shoot","text":"","title":"trouble shoot"},{"location":"docker/docker/#error-response-from-daemon-oci-runtime-create-failed-container_linuxgo348-starting-container-process-caused-process_linuxgo297-copying-bootstrap-data-to-pipe-caused-write-init-p-broken-pipe-unknown","text":"\u7cfb\u7edf\u7248\u672c\u4e3a Ubuntu 14.04, \u5347\u7ea7 docker \u540e\uff0c\u7248\u672c\u4e0d\u4e00\u81f4\u5bfc\u81f4\u7684\uff0c \u89e3\u51b3\u65b9\u6cd5 \uff1a apt remove docker-ce docker-ce-cli apt install docker-ce=18.06.1~ce~3-0~ubuntu","title":"Error response from daemon: OCI runtime create failed: container_linux.go:348: starting container process caused \"process_linux.go:297: copying bootstrap data to pipe caused \"write init-p: broken pipe\"\": unknown"},{"location":"docker/docker/#dockerfile","text":"FROM ubuntu:latest ARG DEBIAN_FRONTEND=noninteractive # https://developer.aliyun.com/mirror/ubuntu # RUN mv /etc/apt/sources.list /etc/apt/sources.list.bak # COPY ubuntu-source.list /etc/apt/sources.list RUN mkdir /root/.pip COPY pip.conf /root/.pip/ COPY tmux.conf /root/.tmux.conf RUN apt-get -q update && \\ apt-get -qy upgrade RUN apt-get install -qy --no-install-recommends pkg-config \\ python3 python3-dev python3-pip python3-setuptools \\ curl less vim wget git net-tools tmux tzdata # RUN rm -rf /etc/localtime && ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime RUN ln -s /usr/bin/python3 /usr/bin/python RUN pip install wheel && \\ pip install --upgrade django ipython pip RUN git config --global user.name \"lian\" && \\ git config --global user.email \"imwhatiam123@gmail.com\" && \\ git config --global core.editor \"vim\" # Clean up APT when done. RUN apt-get -qy autoremove && \\ apt-get clean","title":"Dockerfile"},{"location":"linux/linux/","text":"Linux \u547d\u4ee4 python /root/scripts/start.py >> /var/log/start.log 2>&1 check Linux version lsb_release -a uname -a cat /etc/issue cat /etc/centos-release \u67e5\u770b\u767b\u5f55\u4fe1\u606f [root@node3 ~]# last root pts/0 43.224.44.74 Wed Nov 16 09:43 still logged in root pts/2 114.249.209.248 Tue Nov 1 21:40 - 23:54 (02:13) root pts/1 114.249.209.248 Tue Nov 1 20:41 - 23:57 (03:16) root pts/0 114.249.209.248 Tue Nov 1 20:35 - 23:57 (03:21) root pts/0 114.249.209.248 Tue Nov 1 19:42 - 20:35 (00:52) root pts/0 54.179.196.89 Tue Nov 1 14:55 - 19:07 (04:11) root pts/0 123.117.78.247 Tue Nov 1 14:52 - 14:53 (00:00) root pts/0 123.117.78.247 Tue Nov 1 14:13 - 14:14 (00:01) reboot system boot 3.10.0-1160.15.2 Tue Nov 1 22:12 - 10:04 (14+11:51) root pts/0 114.249.233.212 Tue Feb 23 10:02 - crash (616+12:09) root pts/1 114.249.233.212 Tue Feb 23 09:42 - 18:17 (08:35) root pts/0 43.224.44.74 Tue Feb 23 09:41 - 09:42 (00:00) [root@node3 ~]# grep 154.91.227.231 /var/log/secure Nov 16 08:41:24 node3 sshd[143795]: Accepted password for root from 154.91.227.231 port 55592 ssh2 \u5feb\u6377\u547d\u4ee4 \u5728 ~/.bash_profile \u6216\u8005 ~/.bashrc \u4e2d\u589e\u52a0\u4ee5\u4e0b\u547d\u4ee4 # some more ls aliases alias ll='ls -alF' alias e='exit' alias c='clear' Ctrl+k\uff0c \u7528\u4e8e\u5220\u9664\u4ece\u5149\u6807\u5904\u5f00\u59cb\u5230\u7ed3\u5c3e\u5904\u7684\u6240\u6709\u5b57\u7b26 Ctrl+u\uff0c \u7528\u4e8e\u5220\u9664\u4ece\u5149\u6807\u5f00\u59cb\u5230\u884c\u9996\u7684\u6240\u6709\u5b57\u7b26\u3002\u4e00\u822c\u5728\u5bc6\u7801\u6216\u547d\u4ee4\u8f93\u5165\u9519\u8bef\u65f6\u5e38\u7528 Ctrl+w\uff0c \u526a\u5207\u5149\u6807\u6240\u5728\u5904\u4e4b\u524d\u7684\u4e00\u4e2a\u8bcd (\u4ee5\u7a7a\u683c\u3001\u6807\u70b9\u7b49\u4e3a\u5206\u9694\u7b26) ctrl + \u65b9\u5411\u952e\u5de6\u952e\uff0c \u5149\u6807\u79fb\u52a8\u5230\u524d\u4e00\u4e2a\u5355\u8bcd\u5f00\u5934 ctrl + \u65b9\u5411\u952e\u53f3\u952e\uff0c \u5149\u6807\u79fb\u52a8\u5230\u540e\u4e00\u4e2a\u5355\u8bcd\u7ed3\u5c3e tcpdump tcpdump -i any port 8082 -w output.pcap openssh Extracting the certificate and keys from a .pfx file The .pfx file, which is in a PKCS#12 format, contains the SSL certificate (public keys) and the corresponding private keys. Sometimes, you might have to import the certificate and private keys separately in an unencrypted plain text format to use it on another system. This topic provides instructions on how to convert the .pfx file to .crt and .key files. Extract .crt and .key files from .pfx file Run the following command to extract the private key: openssl pkcs12 -in [yourfile.pfx] -nocerts -out [drlive.key] You will be prompted to type the import password. Type the password that you used to protect your keypair when you created the .pfx file. You will be prompted again to provide a new password to protect the .key file that you are creating. Store the password to your key file in a secure place to avoid misuse. Run the following command to extract the certificate: openssl pkcs12 -in [yourfile.pfx] -clcerts -nokeys -out [drlive.crt] Run the following command to decrypt the private key: openssl rsa -in [drlive.key] -out [drlive-decrypted.key] Type the password that you created to protect the private key file in the previous step. The .crt file and the decrypted and encrypted .key files are available in the path, where you started OpenSSL. Convert .pfx file to .pem format There might be instances where you might have to convert the .pfx file into .pem format. Run the following command to convert it into PEM format. openssl rsa -in [keyfile-encrypted.key] -outform PEM -out [keyfile-encrypted-pem.key] cat << EOF > file cat << EOF > tmp-file deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse EOF \u67e5\u770b\u6587\u4ef6\u76ee\u5f55\u5927\u5c0f du /var/www -h --max-depth=1 | sort -rn du -sh directory # The `-s` is size, the `-h` is human readable. ls -sh filename find /var/lib/docker/overlay2/ -type f -size +100M -print0 | xargs -0 du -h | sort -nr df -hl Filesystem Size Used Avail Capacity Mounted on /dev/sda8 103G 9.5G 89G 10% /home HD\u786c\u76d8\u63a5\u53e3\u7684\u7b2c\u4e00\u4e2a\u786c\u76d8\uff08a\uff09\uff0c\u7b2c\u4e8c\u4e2a\u5206\u533a\uff088\uff09\uff0c\u5bb9\u91cf\u662f103G\uff0c\u7528\u4e869.5G\uff0c\u53ef\u7528\u662f89\uff0c\u56e0\u6b64\u5229\u7528\u7387\u662f10%\uff0c \u88ab\u6302\u8f7d\u5230\uff08/home\uff09 I/O \u6807\u51c6\u8f93\u5165( stdin )\uff1a \u9ed8\u8ba4\u4e3a\u952e\u76d8\u8f93\u5165 \u6807\u51c6\u8f93\u51fa( stdout )\uff1a \u9ed8\u8ba4\u4e3a\u5c4f\u5e55\u8f93\u51fa\uff0c\u8868\u793a\u4e3a 1 \u6807\u51c6\u9519\u8bef\u8f93\u51fa( stderr )\uff1a \u9ed8\u8ba4\u4e5f\u662f\u8f93\u51fa\u5230\u5c4f\u5e55\uff0c\u8868\u793a\u4e3a 2 \u5c06\u8f93\u51fa\u91cd\u5b9a\u5411\u5230 ls_result \u6587\u4ef6\u4e2d ls > ls_result \u8ffd\u52a0\u5230 ls_result \u6587\u4ef6\u4e2d ls -l >> ls_result \u53ea\u6709\u6807\u51c6\u8f93\u51fa\u88ab\u5b58\u5165 all_result \u6587\u4ef6\u4e2d find /home -name lost* > all_result \u8868\u793a\u5c06\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u91cd\u5b9a\u5411 find /home -name lost* 2> err_result \u4e0d\u8f93\u51fa\u9519\u4fe1\u606f find /home -name lost* 2> /dev/null \u6807\u51c6\u9519\u8bef\u8f93\u51fa\u548c\u6807\u51c6\u8f93\u5165\u4e00\u6837\u90fd\u88ab\u5b58\u5165\u5230\u6587\u4ef6\u4e2d find /home -name lost_ > all_result 2>& 1 or find /home -name lost_ >& all_result > \u5c31\u662f\u8f93\u51fa\uff08\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u8f93\u51fa\uff09\u91cd\u5b9a\u5411\u7684\u4ee3\u8868\u7b26\u53f7; \u8fde\u7eed\u4e24\u4e2a > \u7b26\u53f7\uff0c\u5373 >> \u5219\u8868\u793a\u4e0d\u6e05\u9664\u539f\u6765\u7684\u800c\u8ffd\u52a0\u8f93\u51fa; chmod \u6587\u5b57\u8bbe\u5b9a\u6cd5 chmod \\[--help] \\[--version] mode file chmod u+x test.sh Args -c : \u82e5\u8be5\u6863\u6848\u6743\u9650\u786e\u5b9e\u5df2\u7ecf\u66f4\u6539\uff0c\u624d\u663e\u793a\u5176\u66f4\u6539\u52a8\u4f5c -f : \u82e5\u8be5\u6863\u6848\u6743\u9650\u65e0\u6cd5\u88ab\u66f4\u6539\u4e5f\u4e0d\u8981\u663e\u793a\u9519\u8bef\u8baf\u606f -v : \u663e\u793a\u6743\u9650\u53d8\u66f4\u7684\u8be6\u7ec6\u8d44\u6599 -R : \u5bf9\u76ee\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6863\u6848\u4e0e\u5b50\u76ee\u5f55\u8fdb\u884c\u76f8\u540c\u7684\u6743\u9650\u53d8\u66f4(\u5373\u4ee5\u9012\u56de\u7684\u65b9\u5f0f\u9010\u4e2a\u53d8\u66f4) \u2013help : \u663e\u793a\u8f85\u52a9\u8bf4\u660e \u2013version : \u663e\u793a\u7248\u672c \u6743\u9650\u8303\u56f4 u \uff1a\u76ee\u5f55\u6216\u8005\u6587\u4ef6\u7684\u5f53\u524d\u7684\u7528\u6237 g \uff1a\u76ee\u5f55\u6216\u8005\u6587\u4ef6\u7684\u5f53\u524d\u7684\u7fa4\u7ec4 o \uff1a\u9664\u4e86\u76ee\u5f55\u6216\u8005\u6587\u4ef6\u7684\u5f53\u524d\u7528\u6237\u6216\u7fa4\u7ec4\u4e4b\u5916\u7684\u7528\u6237\u6216\u8005\u7fa4\u7ec4 a \uff1a\u6240\u6709\u7684\u7528\u6237\u53ca\u7fa4\u7ec4 \u6743\u9650\u64cd\u4f5c + \u8868\u793a\u589e\u52a0\u6743\u9650 - \u8868\u793a\u53d6\u6d88\u6743\u9650 = \u8868\u793a\u552f\u4e00\u8bbe\u5b9a\u6743\u9650 \u6743\u9650\u4ee3\u53f7\uff1a r \uff1a\u8bfb\u6743\u9650\uff0c\u7528\u6570\u5b574\u8868\u793a w \uff1a\u5199\u6743\u9650\uff0c\u7528\u6570\u5b572\u8868\u793a x \uff1a\u6267\u884c\u6743\u9650\uff0c\u7528\u6570\u5b571\u8868\u793a \u6570\u5b57\u8bbe\u5b9a\u6cd5 \u6240\u6709\u8005\u6709\u8bfb\u548c\u5199\u7684\u6743\u9650\uff0c\u7ec4\u7528\u6237\u53ea\u6709\u8bfb\u7684\u6743\u9650 sudo chmod 644 \u00d7\u00d7\u00d7 \u53ea\u6709\u6240\u6709\u8005\u6709\u8bfb\u548c\u5199\u4ee5\u53ca\u6267\u884c\u7684\u6743\u9650 sudo chmod 700 \u00d7\u00d7\u00d7 \u6bcf\u4e2a\u4eba\u90fd\u6709\u8bfb\u548c\u5199\u7684\u6743\u9650 sudo chmod 666 \u00d7\u00d7\u00d7 \u6bcf\u4e2a\u4eba\u90fd\u6709\u8bfb\u548c\u5199\u4ee5\u53ca\u6267\u884c\u7684\u6743\u9650 sudo chmod 777 \u00d7\u00d7\u00d7 \u5176\u4e2d\uff1a \u00d7\u00d7\u00d7 \u6307\u6587\u4ef6\u540d\uff08\u4e5f\u53ef\u4ee5\u662f\u6587\u4ef6\u5939\u540d\uff0c\u4e0d\u8fc7\u8981\u5728 chmod \u540e\u52a0 -ld \uff09\u3002 \u6570\u5b57\u6587\u5b57\u5bf9\u5e94\u5173\u7cfb: r=4\uff0cw=2\uff0cx=1 \u82e5\u8981 rwx \u5c5e\u6027\u5219 4+2+1=7 \u82e5\u8981 rw- \u5c5e\u6027\u5219 4+2=6\uff1b \u82e5\u8981 r-x \u5c5e\u6027\u5219 4+1=7\u3002 0 [000] \u65e0\u4efb\u4f55\u6743\u9650 4 [100] \u53ea\u8bfb\u6743\u9650 6 [110] \u8bfb\u5199\u6743\u9650 7 [111] \u8bfb\u5199\u6267\u884c\u6743\u9650 \u67e5\u770b\u7aef\u53e3\u5360\u7528 apt install net-tools netstat -tlnp | grep 8000 lsof -i:8000 # for MAC lsof -iTCP -sTCP:LISTEN -n -P netstat \\-a (all)\u663e\u793a\u6240\u6709\u9009\u9879\uff0c\u9ed8\u8ba4\u4e0d\u663e\u793aLISTEN\u76f8\u5173 \\-t (tcp)\u4ec5\u663e\u793atcp\u76f8\u5173\u9009\u9879 \\-u (udp)\u4ec5\u663e\u793audp\u76f8\u5173\u9009\u9879 \\-n \u62d2\u7edd\u663e\u793a\u522b\u540d\uff0c\u80fd\u663e\u793a\u6570\u5b57\u7684\u5168\u90e8\u8f6c\u5316\u6210\u6570\u5b57\u3002 \\-l \u4ec5\u5217\u51fa\u6709\u5728 Listen (\u76d1\u542c) \u7684\u670d\u52d9\u72b6\u6001 \\-p \u663e\u793a\u5efa\u7acb\u76f8\u5173\u94fe\u63a5\u7684\u7a0b\u5e8f\u540d \\-r \u663e\u793a\u8def\u7531\u4fe1\u606f\uff0c\u8def\u7531\u8868 \\-e \u663e\u793a\u6269\u5c55\u4fe1\u606f\uff0c\u4f8b\u5982uid\u7b49 \\-s \u6309\u5404\u4e2a\u534f\u8bae\u8fdb\u884c\u7edf\u8ba1 \\-c \u6bcf\u9694\u4e00\u4e2a\u56fa\u5b9a\u65f6\u95f4\uff0c\u6267\u884c\u8be5netstat\u547d\u4ee4\u3002 crontab # 1. Entry: Minute when the process will be started [0-60] # 2. Entry: Hour when the process will be started [0-23] # 3. Entry: Day of the month when the process will be started [1-28/29/30/31] # 4. Entry: Month of the year when the process will be started [1-12] # 5. Entry: Weekday when the process will be started [0-6] [0 is Sunday] # # all x min = */x * * * * * command to be executed \u252c \u252c \u252c \u252c \u252c \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500 day of week (0 - 6) (0 is Sunday, or use names) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 month (1 - 12) \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 day of month (1 - 31) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 hour (0 - 23) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 min (0 - 59) To open crontab crontab -e To list crontab content crontab -l To remove all your cron jobs crontab -r Run mycommand at 5:09am on January 1st plus every Monday in January 09 05 1 1 1 mycommand Run mycommand at 05 and 35 past the hours of 2:00am and 8:00am on the 1st through the 28th of every January and July. 05,35 02,08 1-28 1,7 * mycommand Run mycommand every 5 minutes */5 * * * * mycommand \u67e5\u770b\u6587\u6863 head show the first n lines of the file, n=10 default head -n ~/solar.html tail show the last n lines of the file, n=10 default tail -n ~/solar.html show the changes of the file ontime tail -f ~/solar.html filter out lines includes HEAD tail -f /opt/seafile/logs/*.log /var/log/nginx/*.log | grep -v HEAD grep grep -r search-string . find find \\<\u6307\u5b9a\u76ee\u5f55> \\<\u6307\u5b9a\u6761\u4ef6> \\<\u6307\u5b9a\u52a8\u4f5c> \\<\u6307\u5b9a\u76ee\u5f55>\uff1a \u6240\u8981\u641c\u7d22\u7684\u76ee\u5f55\u53ca\u5176\u6240\u6709\u5b50\u76ee\u5f55\u3002\u9ed8\u8ba4\u4e3a\u5f53\u524d\u76ee\u5f55\u3002 \\<\u6307\u5b9a\u6761\u4ef6>\uff1a \u6240\u8981\u641c\u7d22\u7684\u6587\u4ef6\u7684\u7279\u5f81\u3002 \\<\u6307\u5b9a\u52a8\u4f5c>\uff1a \u5bf9\u641c\u7d22\u7ed3\u679c\u8fdb\u884c\u7279\u5b9a\u7684\u5904\u7406\u3002 recursively delete all files of a specific extension in the current dir find . -type f -name \"*.bak\" seafile-data# find . -type f | wc -l 1721980 seafile-data# find . -size +10M -type f | wc -l 2169 seafile-data# find . -size +1M -type f | wc -l 33583 tree tree -P '*.py|*.html' -L 2 sed \u5b57\u7b26\u4e32\u66ff\u6362 sed -i 's/old-string/new-string/g' /path/to/file.txt iptables For CentOS sudo iptables -I INPUT 1 -p tcp --dport 8082 -j ACCEPT sudo iptables -I INPUT 1 -p tcp --dport 8000 -j ACCEPT tar -c \uff1a -c \u6216 --create \u5efa\u7acb\u65b0\u7684\u5907\u4efd\u6587\u4ef6\u3002 -x \uff1a -x \u6216 --extract \u6216 --get \u4ece\u5907\u4efd\u6587\u4ef6\u4e2d\u8fd8\u539f\u6587\u4ef6\u3002\u5c06\u6253\u5305\u6587\u4ef6\u89e3\u538b\u3002 -z \uff1a -z \u6216 --gzip \u6216 --ungzip \u901a\u8fc7 gzip \u6307\u4ee4\u5904\u7406\u5907\u4efd\u6587\u4ef6\u3002\u5c06\u6253\u5305\u6587\u4ef6\u538b\u7f29\u3002 -v \uff1a -v \u6216 --verbose \u663e\u793a\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u3002 -f \uff1a -f <\u5907\u4efd\u6587\u4ef6> \u6216 --file=<\u5907\u4efd\u6587\u4ef6> \u6307\u5b9a\u5907\u4efd\u6587\u4ef6\u3002 \u538b\u7f29 \u6253\u5305\u76ee\u5f55\u4e0b\u7684workspace\uff08\u4e0d\u538b\u7f29\uff09 tar -cvf workspace.tar workspace \u6253\u5305\u5e76\u538b\u7f29\u76ee\u5f55\u4e0b\u7684worksapce tar -czvf workspace.tar.gz.$(date +%Y-%m-%d) workspace \u89e3\u538b tar -xzvf workspace.tar.gz trouble shoot Permissions 0644 for \u2018/root/.ssh/id_rsa\u2019 are too open. chmod 0600 /root/.ssh/id_rsa LC_ALL is not set in ENV export LC_ALL=en_US.UTF-8","title":"Linux \u547d\u4ee4"},{"location":"linux/linux/#linux","text":"python /root/scripts/start.py >> /var/log/start.log 2>&1","title":"Linux \u547d\u4ee4"},{"location":"linux/linux/#check-linux-version","text":"lsb_release -a uname -a cat /etc/issue cat /etc/centos-release","title":"check Linux version"},{"location":"linux/linux/#_1","text":"[root@node3 ~]# last root pts/0 43.224.44.74 Wed Nov 16 09:43 still logged in root pts/2 114.249.209.248 Tue Nov 1 21:40 - 23:54 (02:13) root pts/1 114.249.209.248 Tue Nov 1 20:41 - 23:57 (03:16) root pts/0 114.249.209.248 Tue Nov 1 20:35 - 23:57 (03:21) root pts/0 114.249.209.248 Tue Nov 1 19:42 - 20:35 (00:52) root pts/0 54.179.196.89 Tue Nov 1 14:55 - 19:07 (04:11) root pts/0 123.117.78.247 Tue Nov 1 14:52 - 14:53 (00:00) root pts/0 123.117.78.247 Tue Nov 1 14:13 - 14:14 (00:01) reboot system boot 3.10.0-1160.15.2 Tue Nov 1 22:12 - 10:04 (14+11:51) root pts/0 114.249.233.212 Tue Feb 23 10:02 - crash (616+12:09) root pts/1 114.249.233.212 Tue Feb 23 09:42 - 18:17 (08:35) root pts/0 43.224.44.74 Tue Feb 23 09:41 - 09:42 (00:00) [root@node3 ~]# grep 154.91.227.231 /var/log/secure Nov 16 08:41:24 node3 sshd[143795]: Accepted password for root from 154.91.227.231 port 55592 ssh2","title":"\u67e5\u770b\u767b\u5f55\u4fe1\u606f"},{"location":"linux/linux/#_2","text":"\u5728 ~/.bash_profile \u6216\u8005 ~/.bashrc \u4e2d\u589e\u52a0\u4ee5\u4e0b\u547d\u4ee4 # some more ls aliases alias ll='ls -alF' alias e='exit' alias c='clear' Ctrl+k\uff0c \u7528\u4e8e\u5220\u9664\u4ece\u5149\u6807\u5904\u5f00\u59cb\u5230\u7ed3\u5c3e\u5904\u7684\u6240\u6709\u5b57\u7b26 Ctrl+u\uff0c \u7528\u4e8e\u5220\u9664\u4ece\u5149\u6807\u5f00\u59cb\u5230\u884c\u9996\u7684\u6240\u6709\u5b57\u7b26\u3002\u4e00\u822c\u5728\u5bc6\u7801\u6216\u547d\u4ee4\u8f93\u5165\u9519\u8bef\u65f6\u5e38\u7528 Ctrl+w\uff0c \u526a\u5207\u5149\u6807\u6240\u5728\u5904\u4e4b\u524d\u7684\u4e00\u4e2a\u8bcd (\u4ee5\u7a7a\u683c\u3001\u6807\u70b9\u7b49\u4e3a\u5206\u9694\u7b26) ctrl + \u65b9\u5411\u952e\u5de6\u952e\uff0c \u5149\u6807\u79fb\u52a8\u5230\u524d\u4e00\u4e2a\u5355\u8bcd\u5f00\u5934 ctrl + \u65b9\u5411\u952e\u53f3\u952e\uff0c \u5149\u6807\u79fb\u52a8\u5230\u540e\u4e00\u4e2a\u5355\u8bcd\u7ed3\u5c3e","title":"\u5feb\u6377\u547d\u4ee4"},{"location":"linux/linux/#tcpdump","text":"tcpdump -i any port 8082 -w output.pcap","title":"tcpdump"},{"location":"linux/linux/#openssh","text":"","title":"openssh"},{"location":"linux/linux/#extracting-the-certificate-and-keys-from-a-pfx-file","text":"The .pfx file, which is in a PKCS#12 format, contains the SSL certificate (public keys) and the corresponding private keys. Sometimes, you might have to import the certificate and private keys separately in an unencrypted plain text format to use it on another system. This topic provides instructions on how to convert the .pfx file to .crt and .key files.","title":"Extracting the certificate and keys from a .pfx file"},{"location":"linux/linux/#extract-crt-and-key-files-from-pfx-file","text":"Run the following command to extract the private key: openssl pkcs12 -in [yourfile.pfx] -nocerts -out [drlive.key] You will be prompted to type the import password. Type the password that you used to protect your keypair when you created the .pfx file. You will be prompted again to provide a new password to protect the .key file that you are creating. Store the password to your key file in a secure place to avoid misuse. Run the following command to extract the certificate: openssl pkcs12 -in [yourfile.pfx] -clcerts -nokeys -out [drlive.crt] Run the following command to decrypt the private key: openssl rsa -in [drlive.key] -out [drlive-decrypted.key] Type the password that you created to protect the private key file in the previous step. The .crt file and the decrypted and encrypted .key files are available in the path, where you started OpenSSL.","title":"Extract .crt and .key files from .pfx file"},{"location":"linux/linux/#convert-pfx-file-to-pem-format","text":"There might be instances where you might have to convert the .pfx file into .pem format. Run the following command to convert it into PEM format. openssl rsa -in [keyfile-encrypted.key] -outform PEM -out [keyfile-encrypted-pem.key]","title":"Convert .pfx file to .pem format"},{"location":"linux/linux/#cat-eof-file","text":"cat << EOF > tmp-file deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse EOF","title":"cat &lt;&lt; EOF &gt; file"},{"location":"linux/linux/#_3","text":"du /var/www -h --max-depth=1 | sort -rn du -sh directory # The `-s` is size, the `-h` is human readable. ls -sh filename find /var/lib/docker/overlay2/ -type f -size +100M -print0 | xargs -0 du -h | sort -nr df -hl Filesystem Size Used Avail Capacity Mounted on /dev/sda8 103G 9.5G 89G 10% /home HD\u786c\u76d8\u63a5\u53e3\u7684\u7b2c\u4e00\u4e2a\u786c\u76d8\uff08a\uff09\uff0c\u7b2c\u4e8c\u4e2a\u5206\u533a\uff088\uff09\uff0c\u5bb9\u91cf\u662f103G\uff0c\u7528\u4e869.5G\uff0c\u53ef\u7528\u662f89\uff0c\u56e0\u6b64\u5229\u7528\u7387\u662f10%\uff0c \u88ab\u6302\u8f7d\u5230\uff08/home\uff09","title":"\u67e5\u770b\u6587\u4ef6\u76ee\u5f55\u5927\u5c0f"},{"location":"linux/linux/#io","text":"\u6807\u51c6\u8f93\u5165( stdin )\uff1a \u9ed8\u8ba4\u4e3a\u952e\u76d8\u8f93\u5165 \u6807\u51c6\u8f93\u51fa( stdout )\uff1a \u9ed8\u8ba4\u4e3a\u5c4f\u5e55\u8f93\u51fa\uff0c\u8868\u793a\u4e3a 1 \u6807\u51c6\u9519\u8bef\u8f93\u51fa( stderr )\uff1a \u9ed8\u8ba4\u4e5f\u662f\u8f93\u51fa\u5230\u5c4f\u5e55\uff0c\u8868\u793a\u4e3a 2 \u5c06\u8f93\u51fa\u91cd\u5b9a\u5411\u5230 ls_result \u6587\u4ef6\u4e2d ls > ls_result \u8ffd\u52a0\u5230 ls_result \u6587\u4ef6\u4e2d ls -l >> ls_result \u53ea\u6709\u6807\u51c6\u8f93\u51fa\u88ab\u5b58\u5165 all_result \u6587\u4ef6\u4e2d find /home -name lost* > all_result \u8868\u793a\u5c06\u6807\u51c6\u9519\u8bef\u8f93\u51fa\u91cd\u5b9a\u5411 find /home -name lost* 2> err_result \u4e0d\u8f93\u51fa\u9519\u4fe1\u606f find /home -name lost* 2> /dev/null \u6807\u51c6\u9519\u8bef\u8f93\u51fa\u548c\u6807\u51c6\u8f93\u5165\u4e00\u6837\u90fd\u88ab\u5b58\u5165\u5230\u6587\u4ef6\u4e2d find /home -name lost_ > all_result 2>& 1 or find /home -name lost_ >& all_result > \u5c31\u662f\u8f93\u51fa\uff08\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u8f93\u51fa\uff09\u91cd\u5b9a\u5411\u7684\u4ee3\u8868\u7b26\u53f7; \u8fde\u7eed\u4e24\u4e2a > \u7b26\u53f7\uff0c\u5373 >> \u5219\u8868\u793a\u4e0d\u6e05\u9664\u539f\u6765\u7684\u800c\u8ffd\u52a0\u8f93\u51fa;","title":"I/O"},{"location":"linux/linux/#chmod","text":"","title":"chmod"},{"location":"linux/linux/#_4","text":"chmod \\[--help] \\[--version] mode file chmod u+x test.sh Args -c : \u82e5\u8be5\u6863\u6848\u6743\u9650\u786e\u5b9e\u5df2\u7ecf\u66f4\u6539\uff0c\u624d\u663e\u793a\u5176\u66f4\u6539\u52a8\u4f5c -f : \u82e5\u8be5\u6863\u6848\u6743\u9650\u65e0\u6cd5\u88ab\u66f4\u6539\u4e5f\u4e0d\u8981\u663e\u793a\u9519\u8bef\u8baf\u606f -v : \u663e\u793a\u6743\u9650\u53d8\u66f4\u7684\u8be6\u7ec6\u8d44\u6599 -R : \u5bf9\u76ee\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6863\u6848\u4e0e\u5b50\u76ee\u5f55\u8fdb\u884c\u76f8\u540c\u7684\u6743\u9650\u53d8\u66f4(\u5373\u4ee5\u9012\u56de\u7684\u65b9\u5f0f\u9010\u4e2a\u53d8\u66f4) \u2013help : \u663e\u793a\u8f85\u52a9\u8bf4\u660e \u2013version : \u663e\u793a\u7248\u672c \u6743\u9650\u8303\u56f4 u \uff1a\u76ee\u5f55\u6216\u8005\u6587\u4ef6\u7684\u5f53\u524d\u7684\u7528\u6237 g \uff1a\u76ee\u5f55\u6216\u8005\u6587\u4ef6\u7684\u5f53\u524d\u7684\u7fa4\u7ec4 o \uff1a\u9664\u4e86\u76ee\u5f55\u6216\u8005\u6587\u4ef6\u7684\u5f53\u524d\u7528\u6237\u6216\u7fa4\u7ec4\u4e4b\u5916\u7684\u7528\u6237\u6216\u8005\u7fa4\u7ec4 a \uff1a\u6240\u6709\u7684\u7528\u6237\u53ca\u7fa4\u7ec4 \u6743\u9650\u64cd\u4f5c + \u8868\u793a\u589e\u52a0\u6743\u9650 - \u8868\u793a\u53d6\u6d88\u6743\u9650 = \u8868\u793a\u552f\u4e00\u8bbe\u5b9a\u6743\u9650 \u6743\u9650\u4ee3\u53f7\uff1a r \uff1a\u8bfb\u6743\u9650\uff0c\u7528\u6570\u5b574\u8868\u793a w \uff1a\u5199\u6743\u9650\uff0c\u7528\u6570\u5b572\u8868\u793a x \uff1a\u6267\u884c\u6743\u9650\uff0c\u7528\u6570\u5b571\u8868\u793a","title":"\u6587\u5b57\u8bbe\u5b9a\u6cd5"},{"location":"linux/linux/#_5","text":"\u6240\u6709\u8005\u6709\u8bfb\u548c\u5199\u7684\u6743\u9650\uff0c\u7ec4\u7528\u6237\u53ea\u6709\u8bfb\u7684\u6743\u9650 sudo chmod 644 \u00d7\u00d7\u00d7 \u53ea\u6709\u6240\u6709\u8005\u6709\u8bfb\u548c\u5199\u4ee5\u53ca\u6267\u884c\u7684\u6743\u9650 sudo chmod 700 \u00d7\u00d7\u00d7 \u6bcf\u4e2a\u4eba\u90fd\u6709\u8bfb\u548c\u5199\u7684\u6743\u9650 sudo chmod 666 \u00d7\u00d7\u00d7 \u6bcf\u4e2a\u4eba\u90fd\u6709\u8bfb\u548c\u5199\u4ee5\u53ca\u6267\u884c\u7684\u6743\u9650 sudo chmod 777 \u00d7\u00d7\u00d7 \u5176\u4e2d\uff1a \u00d7\u00d7\u00d7 \u6307\u6587\u4ef6\u540d\uff08\u4e5f\u53ef\u4ee5\u662f\u6587\u4ef6\u5939\u540d\uff0c\u4e0d\u8fc7\u8981\u5728 chmod \u540e\u52a0 -ld \uff09\u3002 \u6570\u5b57\u6587\u5b57\u5bf9\u5e94\u5173\u7cfb: r=4\uff0cw=2\uff0cx=1 \u82e5\u8981 rwx \u5c5e\u6027\u5219 4+2+1=7 \u82e5\u8981 rw- \u5c5e\u6027\u5219 4+2=6\uff1b \u82e5\u8981 r-x \u5c5e\u6027\u5219 4+1=7\u3002 0 [000] \u65e0\u4efb\u4f55\u6743\u9650 4 [100] \u53ea\u8bfb\u6743\u9650 6 [110] \u8bfb\u5199\u6743\u9650 7 [111] \u8bfb\u5199\u6267\u884c\u6743\u9650","title":"\u6570\u5b57\u8bbe\u5b9a\u6cd5"},{"location":"linux/linux/#_6","text":"apt install net-tools netstat -tlnp | grep 8000 lsof -i:8000 # for MAC lsof -iTCP -sTCP:LISTEN -n -P netstat \\-a (all)\u663e\u793a\u6240\u6709\u9009\u9879\uff0c\u9ed8\u8ba4\u4e0d\u663e\u793aLISTEN\u76f8\u5173 \\-t (tcp)\u4ec5\u663e\u793atcp\u76f8\u5173\u9009\u9879 \\-u (udp)\u4ec5\u663e\u793audp\u76f8\u5173\u9009\u9879 \\-n \u62d2\u7edd\u663e\u793a\u522b\u540d\uff0c\u80fd\u663e\u793a\u6570\u5b57\u7684\u5168\u90e8\u8f6c\u5316\u6210\u6570\u5b57\u3002 \\-l \u4ec5\u5217\u51fa\u6709\u5728 Listen (\u76d1\u542c) \u7684\u670d\u52d9\u72b6\u6001 \\-p \u663e\u793a\u5efa\u7acb\u76f8\u5173\u94fe\u63a5\u7684\u7a0b\u5e8f\u540d \\-r \u663e\u793a\u8def\u7531\u4fe1\u606f\uff0c\u8def\u7531\u8868 \\-e \u663e\u793a\u6269\u5c55\u4fe1\u606f\uff0c\u4f8b\u5982uid\u7b49 \\-s \u6309\u5404\u4e2a\u534f\u8bae\u8fdb\u884c\u7edf\u8ba1 \\-c \u6bcf\u9694\u4e00\u4e2a\u56fa\u5b9a\u65f6\u95f4\uff0c\u6267\u884c\u8be5netstat\u547d\u4ee4\u3002","title":"\u67e5\u770b\u7aef\u53e3\u5360\u7528"},{"location":"linux/linux/#crontab","text":"# 1. Entry: Minute when the process will be started [0-60] # 2. Entry: Hour when the process will be started [0-23] # 3. Entry: Day of the month when the process will be started [1-28/29/30/31] # 4. Entry: Month of the year when the process will be started [1-12] # 5. Entry: Weekday when the process will be started [0-6] [0 is Sunday] # # all x min = */x * * * * * command to be executed \u252c \u252c \u252c \u252c \u252c \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500 day of week (0 - 6) (0 is Sunday, or use names) \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 month (1 - 12) \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 day of month (1 - 31) \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 hour (0 - 23) \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 min (0 - 59) To open crontab crontab -e To list crontab content crontab -l To remove all your cron jobs crontab -r Run mycommand at 5:09am on January 1st plus every Monday in January 09 05 1 1 1 mycommand Run mycommand at 05 and 35 past the hours of 2:00am and 8:00am on the 1st through the 28th of every January and July. 05,35 02,08 1-28 1,7 * mycommand Run mycommand every 5 minutes */5 * * * * mycommand","title":"crontab"},{"location":"linux/linux/#_7","text":"","title":"\u67e5\u770b\u6587\u6863"},{"location":"linux/linux/#head","text":"show the first n lines of the file, n=10 default head -n ~/solar.html","title":"head"},{"location":"linux/linux/#tail","text":"show the last n lines of the file, n=10 default tail -n ~/solar.html show the changes of the file ontime tail -f ~/solar.html filter out lines includes HEAD tail -f /opt/seafile/logs/*.log /var/log/nginx/*.log | grep -v HEAD","title":"tail"},{"location":"linux/linux/#grep","text":"grep -r search-string .","title":"grep"},{"location":"linux/linux/#find","text":"find \\<\u6307\u5b9a\u76ee\u5f55> \\<\u6307\u5b9a\u6761\u4ef6> \\<\u6307\u5b9a\u52a8\u4f5c> \\<\u6307\u5b9a\u76ee\u5f55>\uff1a \u6240\u8981\u641c\u7d22\u7684\u76ee\u5f55\u53ca\u5176\u6240\u6709\u5b50\u76ee\u5f55\u3002\u9ed8\u8ba4\u4e3a\u5f53\u524d\u76ee\u5f55\u3002 \\<\u6307\u5b9a\u6761\u4ef6>\uff1a \u6240\u8981\u641c\u7d22\u7684\u6587\u4ef6\u7684\u7279\u5f81\u3002 \\<\u6307\u5b9a\u52a8\u4f5c>\uff1a \u5bf9\u641c\u7d22\u7ed3\u679c\u8fdb\u884c\u7279\u5b9a\u7684\u5904\u7406\u3002 recursively delete all files of a specific extension in the current dir find . -type f -name \"*.bak\" seafile-data# find . -type f | wc -l 1721980 seafile-data# find . -size +10M -type f | wc -l 2169 seafile-data# find . -size +1M -type f | wc -l 33583","title":"find"},{"location":"linux/linux/#tree","text":"tree -P '*.py|*.html' -L 2","title":"tree"},{"location":"linux/linux/#sed","text":"sed -i 's/old-string/new-string/g' /path/to/file.txt","title":"sed \u5b57\u7b26\u4e32\u66ff\u6362"},{"location":"linux/linux/#iptables","text":"For CentOS sudo iptables -I INPUT 1 -p tcp --dport 8082 -j ACCEPT sudo iptables -I INPUT 1 -p tcp --dport 8000 -j ACCEPT","title":"iptables"},{"location":"linux/linux/#tar","text":"-c \uff1a -c \u6216 --create \u5efa\u7acb\u65b0\u7684\u5907\u4efd\u6587\u4ef6\u3002 -x \uff1a -x \u6216 --extract \u6216 --get \u4ece\u5907\u4efd\u6587\u4ef6\u4e2d\u8fd8\u539f\u6587\u4ef6\u3002\u5c06\u6253\u5305\u6587\u4ef6\u89e3\u538b\u3002 -z \uff1a -z \u6216 --gzip \u6216 --ungzip \u901a\u8fc7 gzip \u6307\u4ee4\u5904\u7406\u5907\u4efd\u6587\u4ef6\u3002\u5c06\u6253\u5305\u6587\u4ef6\u538b\u7f29\u3002 -v \uff1a -v \u6216 --verbose \u663e\u793a\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u3002 -f \uff1a -f <\u5907\u4efd\u6587\u4ef6> \u6216 --file=<\u5907\u4efd\u6587\u4ef6> \u6307\u5b9a\u5907\u4efd\u6587\u4ef6\u3002","title":"tar"},{"location":"linux/linux/#_8","text":"\u6253\u5305\u76ee\u5f55\u4e0b\u7684workspace\uff08\u4e0d\u538b\u7f29\uff09 tar -cvf workspace.tar workspace \u6253\u5305\u5e76\u538b\u7f29\u76ee\u5f55\u4e0b\u7684worksapce tar -czvf workspace.tar.gz.$(date +%Y-%m-%d) workspace","title":"\u538b\u7f29"},{"location":"linux/linux/#_9","text":"tar -xzvf workspace.tar.gz","title":"\u89e3\u538b"},{"location":"linux/linux/#trouble-shoot","text":"","title":"trouble shoot"},{"location":"linux/linux/#permissions-0644-for-rootsshid_rsa-are-too-open","text":"chmod 0600 /root/.ssh/id_rsa","title":"Permissions 0644 for \u2018/root/.ssh/id_rsa\u2019 are too open."},{"location":"linux/linux/#lc_all-is-not-set-in-env","text":"export LC_ALL=en_US.UTF-8","title":"LC_ALL is not set in ENV"},{"location":"linux/process-and-thread/","text":"Linux\u7684\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u3001\u6587\u4ef6\u63cf\u8ff0\u7b26\u662f\u4ec0\u4e48 \u8bf4\u5230\u8fdb\u7a0b\uff0c\u6050\u6015\u9762\u8bd5\u4e2d\u6700\u5e38\u89c1\u7684\u95ee\u9898\u5c31\u662f\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u5173\u7cfb\u4e86\uff0c\u90a3\u4e48\u5148\u8bf4\u4e00\u4e0b\u7b54\u6848\uff1a \u5728 Linux \u7cfb\u7edf\u4e2d\uff0c\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u51e0\u4e4e\u6ca1\u6709\u533a\u522b \u3002 Linux \u4e2d\u7684\u8fdb\u7a0b\u5c31\u662f\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u770b\u660e\u767d\u5c31\u53ef\u4ee5\u7406\u89e3\u6587\u4ef6\u63cf\u8ff0\u7b26\u3001\u91cd\u5b9a\u5411\u3001\u7ba1\u9053\u547d\u4ee4\u7684\u5e95\u5c42\u5de5\u4f5c\u539f\u7406\uff0c\u6700\u540e\u6211\u4eec\u4ece\u64cd\u4f5c\u7cfb\u7edf\u7684\u89d2\u5ea6\u770b\u770b\u4e3a\u4ec0\u4e48\u8bf4\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u57fa\u672c\u6ca1\u6709\u533a\u522b\u3002 \u4e00\u3001\u8fdb\u7a0b\u662f\u4ec0\u4e48 \u9996\u5148\uff0c\u62bd\u8c61\u5730\u6765\u8bf4\uff0c\u6211\u4eec\u7684\u8ba1\u7b97\u673a\u5c31\u662f\u8fd9\u4e2a\u4e1c\u897f\uff1a \u8fd9\u4e2a\u5927\u7684\u77e9\u5f62\u8868\u793a\u8ba1\u7b97\u673a\u7684 \u5185\u5b58\u7a7a\u95f4 \uff0c\u5176\u4e2d\u7684\u5c0f\u77e9\u5f62\u4ee3\u8868 \u8fdb\u7a0b \uff0c\u5de6\u4e0b\u89d2\u7684\u5706\u5f62\u8868\u793a \u78c1\u76d8 \uff0c\u53f3\u4e0b\u89d2\u7684\u56fe\u5f62\u8868\u793a\u4e00\u4e9b \u8f93\u5165\u8f93\u51fa\u8bbe\u5907 \uff0c\u6bd4\u5982\u9f20\u6807\u952e\u76d8\u663e\u793a\u5668\u7b49\u7b49\u3002\u53e6\u5916\uff0c\u6ce8\u610f\u5230\u5185\u5b58\u7a7a\u95f4\u88ab\u5212\u5206\u4e3a\u4e86\u4e24\u5757\uff0c\u4e0a\u534a\u90e8\u5206\u8868\u793a \u7528\u6237\u7a7a\u95f4 \uff0c\u4e0b\u534a\u90e8\u5206\u8868\u793a \u5185\u6838\u7a7a\u95f4 \u3002 \u7528\u6237\u7a7a\u95f4\u88c5\u7740\u7528\u6237\u8fdb\u7a0b\u9700\u8981\u4f7f\u7528\u7684\u8d44\u6e90\uff0c\u6bd4\u5982\u4f60\u5728\u7a0b\u5e8f\u4ee3\u7801\u91cc\u5f00\u4e00\u4e2a\u6570\u7ec4\uff0c\u8fd9\u4e2a\u6570\u7ec4\u80af\u5b9a\u5b58\u5728\u7528\u6237\u7a7a\u95f4\uff1b\u5185\u6838\u7a7a\u95f4\u5b58\u653e\u5185\u6838\u8fdb\u7a0b\u9700\u8981\u52a0\u8f7d\u7684\u7cfb\u7edf\u8d44\u6e90\uff0c\u8fd9\u4e00\u4e9b\u8d44\u6e90\u4e00\u822c\u662f\u4e0d\u5141\u8bb8\u7528\u6237\u8bbf\u95ee\u7684\u3002\u4f46\u662f\u6ce8\u610f\u6709\u7684\u7528\u6237\u8fdb\u7a0b\u4f1a\u5171\u4eab\u4e00\u4e9b\u5185\u6838\u7a7a\u95f4\u7684\u8d44\u6e90\uff0c\u6bd4\u5982\u4e00\u4e9b\u52a8\u6001\u94fe\u63a5\u5e93\u7b49\u7b49\u3002 \u6211\u4eec\u7528 C \u8bed\u8a00\u5199\u4e00\u4e2a hello \u7a0b\u5e8f\uff0c\u7f16\u8bd1\u540e\u5f97\u5230\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5728\u547d\u4ee4\u884c\u8fd0\u884c\u5c31\u53ef\u4ee5\u6253\u5370\u51fa\u4e00\u53e5 hello world\uff0c\u7136\u540e\u7a0b\u5e8f\u9000\u51fa\u3002\u5728\u64cd\u4f5c\u7cfb\u7edf\u5c42\u9762\uff0c\u5c31\u662f\u65b0\u5efa\u4e86\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u8fd9\u4e2a\u8fdb\u7a0b\u5c06\u6211\u4eec\u7f16\u8bd1\u51fa\u6765\u7684\u53ef\u6267\u884c\u6587\u4ef6\u8bfb\u5165\u5185\u5b58\u7a7a\u95f4\uff0c\u7136\u540e\u6267\u884c\uff0c\u6700\u540e\u9000\u51fa\u3002 \u4f60\u7f16\u8bd1\u597d\u7684\u90a3\u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\u53ea\u662f\u4e00\u4e2a\u6587\u4ef6 \uff0c\u4e0d\u662f\u8fdb\u7a0b\uff0c\u53ef\u6267\u884c\u6587\u4ef6\u5fc5\u987b\u8981\u8f7d\u5165\u5185\u5b58\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u8fdb\u7a0b\u624d\u80fd\u771f\u6b63\u8dd1\u8d77\u6765\u3002\u8fdb\u7a0b\u662f\u8981\u4f9d\u9760\u64cd\u4f5c\u7cfb\u7edf\u521b\u5efa\u7684\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u5b83\u7684\u56fa\u6709\u5c5e\u6027\uff0c\u6bd4\u5982\u8fdb\u7a0b\u53f7\uff08PID\uff09\u3001\u8fdb\u7a0b\u72b6\u6001\u3001\u6253\u5f00\u7684\u6587\u4ef6\u7b49\u7b49\uff0c\u8fdb\u7a0b\u521b\u5efa\u597d\u4e4b\u540e\uff0c\u8bfb\u5165\u4f60\u7684\u7a0b\u5e8f\uff0c\u4f60\u7684\u7a0b\u5e8f\u624d\u88ab\u7cfb\u7edf\u6267\u884c\u3002 \u90a3\u4e48\uff0c\u64cd\u4f5c\u7cfb\u7edf\u662f\u5982\u4f55\u521b\u5efa\u8fdb\u7a0b\u7684\u5462\uff1f \u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\uff0c\u8fdb\u7a0b\u5c31\u662f\u4e00\u4e2a\u6570\u636e\u7ed3\u6784 \uff0c\u6211\u4eec\u76f4\u63a5\u6765\u770b Linux \u7684\u6e90\u7801\uff1a struct task_struct { // \u8fdb\u7a0b\u72b6\u6001 long state; // \u865a\u62df\u5185\u5b58\u7ed3\u6784\u4f53 struct mm_struct *mm; // \u8fdb\u7a0b\u53f7 pid_t pid; // \u6307\u5411\u7236\u8fdb\u7a0b\u7684\u6307\u9488 struct task_struct __rcu *parent; // \u5b50\u8fdb\u7a0b\u5217\u8868 struct list_head children; // \u5b58\u653e\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f\u7684\u6307\u9488 struct fs_struct *fs; // \u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u8be5\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6\u6307\u9488 struct files_struct *files; }; task_struct \u5c31\u662f Linux \u5185\u6838\u5bf9\u4e8e\u4e00\u4e2a\u8fdb\u7a0b\u7684\u63cf\u8ff0\uff0c\u4e5f\u53ef\u4ee5\u79f0\u4e3a\u300c\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u300d\u3002\u6e90\u7801\u6bd4\u8f83\u590d\u6742\uff0c\u6211\u8fd9\u91cc\u5c31\u622a\u53d6\u4e86\u4e00\u5c0f\u90e8\u5206\u6bd4\u8f83\u5e38\u89c1\u7684\u3002 \u5176\u4e2d\u6bd4\u8f83\u6709\u610f\u601d\u7684\u662f mm \u6307\u9488\u548c files \u6307\u9488\u3002 mm \u6307\u5411\u7684\u662f\u8fdb\u7a0b\u7684\u865a\u62df\u5185\u5b58\uff0c\u4e5f\u5c31\u662f\u8f7d\u5165\u8d44\u6e90\u548c\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5730\u65b9\uff1b files \u6307\u9488\u6307\u5411\u4e00\u4e2a\u6570\u7ec4\uff0c\u8fd9\u4e2a\u6570\u7ec4\u91cc\u88c5\u7740\u6240\u6709\u8be5\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6\u7684\u6307\u9488\u3002 \u4e8c\u3001\u6587\u4ef6\u63cf\u8ff0\u7b26\u662f\u4ec0\u4e48 \u5148\u8bf4 files \uff0c\u5b83\u662f\u4e00\u4e2a\u6587\u4ef6\u6307\u9488\u6570\u7ec4\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u4f1a\u4ece files[0] \u8bfb\u53d6\u8f93\u5165\uff0c\u5c06\u8f93\u51fa\u5199\u5165 files[1] \uff0c\u5c06\u9519\u8bef\u4fe1\u606f\u5199\u5165 files[2] \u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4ee5\u6211\u4eec\u7684\u89d2\u5ea6 C \u8bed\u8a00\u7684 printf \u51fd\u6570\u662f\u5411\u547d\u4ee4\u884c\u6253\u5370\u5b57\u7b26\uff0c\u4f46\u662f\u4ece\u8fdb\u7a0b\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u5c31\u662f\u5411 files[1] \u5199\u5165\u6570\u636e\uff1b\u540c\u7406\uff0c scanf \u51fd\u6570\u5c31\u662f\u8fdb\u7a0b\u8bd5\u56fe\u4ece files[0] \u8fd9\u4e2a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\u3002 \u6bcf\u4e2a\u8fdb\u7a0b\u88ab\u521b\u5efa\u65f6\uff0c files \u7684\u524d\u4e09\u4f4d\u88ab\u586b\u5165\u9ed8\u8ba4\u503c\uff0c\u5206\u522b\u6307\u5411\u6807\u51c6\u8f93\u5165\u6d41\u3001\u6807\u51c6\u8f93\u51fa\u6d41\u3001\u6807\u51c6\u9519\u8bef\u6d41\u3002\u6211\u4eec\u5e38\u8bf4\u7684\u300c\u6587\u4ef6\u63cf\u8ff0\u7b26\u300d\u5c31\u662f\u6307\u8fd9\u4e2a\u6587\u4ef6\u6307\u9488\u6570\u7ec4\u7684\u7d22\u5f15 \uff0c\u6240\u4ee5\u7a0b\u5e8f\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u9ed8\u8ba4\u60c5\u51b5\u4e0b 0 \u662f\u8f93\u5165\uff0c1 \u662f\u8f93\u51fa\uff0c2 \u662f\u9519\u8bef\u3002 \u6211\u4eec\u53ef\u4ee5\u91cd\u65b0\u753b\u4e00\u5e45\u56fe\uff1a \u5bf9\u4e8e\u4e00\u822c\u7684\u8ba1\u7b97\u673a\uff0c\u8f93\u5165\u6d41\u662f\u952e\u76d8\uff0c\u8f93\u51fa\u6d41\u662f\u663e\u793a\u5668\uff0c\u9519\u8bef\u6d41\u4e5f\u662f\u663e\u793a\u5668\uff0c\u6240\u4ee5\u73b0\u5728\u8fd9\u4e2a\u8fdb\u7a0b\u548c\u5185\u6838\u8fde\u4e86\u4e09\u6839\u7ebf\u3002\u56e0\u4e3a\u786c\u4ef6\u90fd\u662f\u7531\u5185\u6838\u7ba1\u7406\u7684\uff0c\u6211\u4eec\u7684\u8fdb\u7a0b\u9700\u8981\u901a\u8fc7\u300c\u7cfb\u7edf\u8c03\u7528\u300d\u8ba9\u5185\u6838\u8fdb\u7a0b\u8bbf\u95ee\u786c\u4ef6\u8d44\u6e90\u3002 PS\uff1a\u4e0d\u8981\u5fd8\u4e86\uff0cLinux \u4e2d\u4e00\u5207\u90fd\u88ab\u62bd\u8c61\u6210\u6587\u4ef6\uff0c\u8bbe\u5907\u4e5f\u662f\u6587\u4ef6\uff0c\u53ef\u4ee5\u8fdb\u884c\u8bfb\u548c\u5199\u3002 \u5982\u679c\u6211\u4eec\u5199\u7684\u7a0b\u5e8f\u9700\u8981\u5176\u4ed6\u8d44\u6e90\uff0c\u6bd4\u5982\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u8fdb\u884c\u8bfb\u5199\uff0c\u8fd9\u4e5f\u5f88\u7b80\u5355\uff0c\u8fdb\u884c\u7cfb\u7edf\u8c03\u7528\uff0c\u8ba9\u5185\u6838\u628a\u6587\u4ef6\u6253\u5f00\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5c31\u4f1a\u88ab\u653e\u5230 files \u7684\u7b2c 4 \u4e2a\u4f4d\u7f6e\uff1a \u660e\u767d\u4e86\u8fd9\u4e2a\u539f\u7406\uff0c \u8f93\u5165\u91cd\u5b9a\u5411 \u5c31\u5f88\u597d\u7406\u89e3\u4e86\uff0c\u7a0b\u5e8f\u60f3\u8bfb\u53d6\u6570\u636e\u7684\u65f6\u5019\u5c31\u4f1a\u53bb files[0] \u8bfb\u53d6\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u628a files[0] \u6307\u5411\u4e00\u4e2a\u6587\u4ef6\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5c31\u4f1a\u4ece\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u4e0d\u662f\u4ece\u952e\u76d8\uff1a $ command < file.txt \u540c\u7406\uff0c \u8f93\u51fa\u91cd\u5b9a\u5411 \u5c31\u662f\u628a files[1] \u6307\u5411\u4e00\u4e2a\u6587\u4ef6\uff0c\u90a3\u4e48\u7a0b\u5e8f\u7684\u8f93\u51fa\u5c31\u4e0d\u4f1a\u5199\u5165\u5230\u663e\u793a\u5668\uff0c\u800c\u662f\u5199\u5165\u5230\u8fd9\u4e2a\u6587\u4ef6\u4e2d\uff1a $ command > file.txt \u9519\u8bef\u91cd\u5b9a\u5411\u4e5f\u662f\u4e00\u6837\u7684\uff0c\u5c31\u4e0d\u518d\u8d58\u8ff0\u3002 \u7ba1\u9053\u7b26 \u5176\u5b9e\u4e5f\u662f\u5f02\u66f2\u540c\u5de5\uff0c\u628a\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u51fa\u6d41\u548c\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u5165\u6d41\u63a5\u8d77\u4e00\u6761\u300c\u7ba1\u9053\u300d\uff0c\u6570\u636e\u5c31\u5728\u5176\u4e2d\u4f20\u9012\uff0c\u4e0d\u5f97\u4e0d\u8bf4\u8fd9\u79cd\u8bbe\u8ba1\u601d\u60f3\u771f\u7684\u5f88\u4f18\u7f8e\uff1a $ cmd1 | cmd2 | cmd3 \u5230\u8fd9\u91cc\uff0c\u4f60\u53ef\u80fd\u4e5f\u770b\u51fa\u300cLinux \u4e2d\u4e00\u5207\u7686\u6587\u4ef6\u300d\u8bbe\u8ba1\u601d\u8def\u7684\u9ad8\u660e\u4e86\uff0c\u4e0d\u7ba1\u662f\u8bbe\u5907\u3001\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u3001socket \u5957\u63a5\u5b57\u8fd8\u662f\u771f\u6b63\u7684\u6587\u4ef6\uff0c\u5168\u90e8\u90fd\u53ef\u4ee5\u8bfb\u5199\uff0c\u7edf\u4e00\u88c5\u8fdb\u4e00\u4e2a\u7b80\u5355\u7684 files \u6570\u7ec4\uff0c\u8fdb\u7a0b\u901a\u8fc7\u7b80\u5355\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u8bbf\u95ee\u76f8\u5e94\u8d44\u6e90\uff0c\u5177\u4f53\u7ec6\u8282\u4ea4\u4e8e\u64cd\u4f5c\u7cfb\u7edf\uff0c\u6709\u6548\u89e3\u8026\uff0c\u4f18\u7f8e\u9ad8\u6548\u3002 \u4e09\u3001\u7ebf\u7a0b\u662f\u4ec0\u4e48 \u9996\u5148\u8981\u660e\u786e\u7684\u662f\uff0c\u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b\u90fd\u662f\u5e76\u53d1\uff0c\u90fd\u53ef\u4ee5\u63d0\u9ad8\u5904\u7406\u5668\u7684\u5229\u7528\u6548\u7387\uff0c\u6240\u4ee5\u73b0\u5728\u7684\u5173\u952e\u662f\uff0c\u591a\u7ebf\u7a0b\u548c\u591a\u8fdb\u7a0b\u6709\u5565\u533a\u522b\u3002 \u4e3a\u4ec0\u4e48\u8bf4 Linux \u4e2d\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u57fa\u672c\u6ca1\u6709\u533a\u522b\u5462\uff0c\u56e0\u4e3a\u4ece Linux \u5185\u6838\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u5e76\u6ca1\u6709\u628a\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u533a\u522b\u5bf9\u5f85\u3002 \u6211\u4eec\u77e5\u9053\u7cfb\u7edf\u8c03\u7528 fork() \u53ef\u4ee5\u65b0\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u51fd\u6570 pthread() \u53ef\u4ee5\u65b0\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u3002 \u4f46\u65e0\u8bba\u7ebf\u7a0b\u8fd8\u662f\u8fdb\u7a0b\uff0c\u90fd\u662f\u7528 task_struct \u7ed3\u6784\u8868\u793a\u7684\uff0c\u552f\u4e00\u7684\u533a\u522b\u5c31\u662f\u5171\u4eab\u7684\u6570\u636e\u533a\u57df\u4e0d\u540c \u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u7ebf\u7a0b\u770b\u8d77\u6765\u8ddf\u8fdb\u7a0b\u6ca1\u6709\u533a\u522b\uff0c\u53ea\u662f\u7ebf\u7a0b\u7684\u67d0\u4e9b\u6570\u636e\u533a\u57df\u548c\u5176\u7236\u8fdb\u7a0b\u662f\u5171\u4eab\u7684\uff0c\u800c\u5b50\u8fdb\u7a0b\u662f\u62f7\u8d1d\u526f\u672c\uff0c\u800c\u4e0d\u662f\u5171\u4eab\u3002\u5c31\u6bd4\u5982\u8bf4\uff0c mm \u7ed3\u6784\u548c files \u7ed3\u6784\u5728\u7ebf\u7a0b\u4e2d\u90fd\u662f\u5171\u4eab\u7684\uff0c\u6211\u753b\u4e24\u5f20\u56fe\u4f60\u5c31\u660e\u767d\u4e86\uff1a \u6240\u4ee5\u8bf4\uff0c\u6211\u4eec\u7684\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u8981\u5229\u7528\u9501\u673a\u5236\uff0c\u907f\u514d\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u5f80\u540c\u4e00\u533a\u57df\u5199\u5165\u6570\u636e\uff0c\u5426\u5219\u53ef\u80fd\u9020\u6210\u6570\u636e\u9519\u4e71\u3002 \u90a3\u4e48\u4f60\u53ef\u80fd\u95ee\uff0c \u65e2\u7136\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u5dee\u4e0d\u591a\uff0c\u800c\u4e14\u591a\u8fdb\u7a0b\u6570\u636e\u4e0d\u5171\u4eab\uff0c\u5373\u4e0d\u5b58\u5728\u6570\u636e\u9519\u4e71\u7684\u95ee\u9898\uff0c\u4e3a\u4ec0\u4e48\u591a\u7ebf\u7a0b\u7684\u4f7f\u7528\u6bd4\u591a\u8fdb\u7a0b\u666e\u904d\u5f97\u591a\u5462 \uff1f \u56e0\u4e3a\u73b0\u5b9e\u4e2d\u6570\u636e\u5171\u4eab\u7684\u5e76\u53d1\u66f4\u666e\u904d\u5440\uff0c\u6bd4\u5982\u5341\u4e2a\u4eba\u540c\u65f6\u4ece\u4e00\u4e2a\u8d26\u6237\u53d6\u5341\u5143\uff0c\u6211\u4eec\u5e0c\u671b\u7684\u662f\u8fd9\u4e2a\u5171\u4eab\u8d26\u6237\u7684\u4f59\u989d\u6b63\u786e\u51cf\u5c11\u4e00\u767e\u5143\uff0c\u800c\u4e0d\u662f\u5e0c\u671b\u6bcf\u4eba\u83b7\u5f97\u4e00\u4e2a\u8d26\u6237\u7684\u62f7\u8d1d\uff0c\u6bcf\u4e2a\u62f7\u8d1d\u8d26\u6237\u51cf\u5c11\u5341\u5143\u3002 \u5f53\u7136\uff0c\u5fc5\u987b\u8981\u8bf4\u660e\u7684\u662f\uff0c\u53ea\u6709 Linux \u7cfb\u7edf\u5c06\u7ebf\u7a0b\u770b\u505a\u5171\u4eab\u6570\u636e\u7684\u8fdb\u7a0b\uff0c\u4e0d\u5bf9\u5176\u505a\u7279\u6b8a\u770b\u5f85\uff0c\u5176\u4ed6\u7684\u5f88\u591a\u64cd\u4f5c\u7cfb\u7edf\u662f\u5bf9\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u533a\u522b\u5bf9\u5f85\u7684\uff0c\u7ebf\u7a0b\u6709\u5176\u7279\u6709\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6211\u4e2a\u4eba\u8ba4\u4e3a\u4e0d\u5982 Linux \u7684\u8fd9\u79cd\u8bbe\u8ba1\u7b80\u6d01\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\u3002 \u5728 Linux \u4e2d\u65b0\u5efa\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u6548\u7387\u90fd\u662f\u5f88\u9ad8\u7684\uff0c\u5bf9\u4e8e\u65b0\u5efa\u8fdb\u7a0b\u65f6\u5185\u5b58\u533a\u57df\u62f7\u8d1d\u7684\u95ee\u9898\uff0cLinux \u91c7\u7528\u4e86 copy-on-write \u7684\u7b56\u7565\u4f18\u5316\uff0c\u4e5f\u5c31\u662f\u5e76\u4e0d\u771f\u6b63\u590d\u5236\u7236\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u800c\u662f\u7b49\u5230\u9700\u8981\u5199\u64cd\u4f5c\u65f6\u624d\u53bb\u590d\u5236\u3002 \u6240\u4ee5 Linux \u4e2d\u65b0\u5efa\u8fdb\u7a0b\u548c\u65b0\u5efa\u7ebf\u7a0b\u90fd\u662f\u5f88\u8fc5\u901f\u7684 \u3002","title":"Linux\u7684\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u3001\u6587\u4ef6\u63cf\u8ff0\u7b26\u662f\u4ec0\u4e48"},{"location":"linux/process-and-thread/#linux","text":"\u8bf4\u5230\u8fdb\u7a0b\uff0c\u6050\u6015\u9762\u8bd5\u4e2d\u6700\u5e38\u89c1\u7684\u95ee\u9898\u5c31\u662f\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u5173\u7cfb\u4e86\uff0c\u90a3\u4e48\u5148\u8bf4\u4e00\u4e0b\u7b54\u6848\uff1a \u5728 Linux \u7cfb\u7edf\u4e2d\uff0c\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u51e0\u4e4e\u6ca1\u6709\u533a\u522b \u3002 Linux \u4e2d\u7684\u8fdb\u7a0b\u5c31\u662f\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\uff0c\u770b\u660e\u767d\u5c31\u53ef\u4ee5\u7406\u89e3\u6587\u4ef6\u63cf\u8ff0\u7b26\u3001\u91cd\u5b9a\u5411\u3001\u7ba1\u9053\u547d\u4ee4\u7684\u5e95\u5c42\u5de5\u4f5c\u539f\u7406\uff0c\u6700\u540e\u6211\u4eec\u4ece\u64cd\u4f5c\u7cfb\u7edf\u7684\u89d2\u5ea6\u770b\u770b\u4e3a\u4ec0\u4e48\u8bf4\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u57fa\u672c\u6ca1\u6709\u533a\u522b\u3002","title":"Linux\u7684\u8fdb\u7a0b\u3001\u7ebf\u7a0b\u3001\u6587\u4ef6\u63cf\u8ff0\u7b26\u662f\u4ec0\u4e48"},{"location":"linux/process-and-thread/#_1","text":"\u9996\u5148\uff0c\u62bd\u8c61\u5730\u6765\u8bf4\uff0c\u6211\u4eec\u7684\u8ba1\u7b97\u673a\u5c31\u662f\u8fd9\u4e2a\u4e1c\u897f\uff1a \u8fd9\u4e2a\u5927\u7684\u77e9\u5f62\u8868\u793a\u8ba1\u7b97\u673a\u7684 \u5185\u5b58\u7a7a\u95f4 \uff0c\u5176\u4e2d\u7684\u5c0f\u77e9\u5f62\u4ee3\u8868 \u8fdb\u7a0b \uff0c\u5de6\u4e0b\u89d2\u7684\u5706\u5f62\u8868\u793a \u78c1\u76d8 \uff0c\u53f3\u4e0b\u89d2\u7684\u56fe\u5f62\u8868\u793a\u4e00\u4e9b \u8f93\u5165\u8f93\u51fa\u8bbe\u5907 \uff0c\u6bd4\u5982\u9f20\u6807\u952e\u76d8\u663e\u793a\u5668\u7b49\u7b49\u3002\u53e6\u5916\uff0c\u6ce8\u610f\u5230\u5185\u5b58\u7a7a\u95f4\u88ab\u5212\u5206\u4e3a\u4e86\u4e24\u5757\uff0c\u4e0a\u534a\u90e8\u5206\u8868\u793a \u7528\u6237\u7a7a\u95f4 \uff0c\u4e0b\u534a\u90e8\u5206\u8868\u793a \u5185\u6838\u7a7a\u95f4 \u3002 \u7528\u6237\u7a7a\u95f4\u88c5\u7740\u7528\u6237\u8fdb\u7a0b\u9700\u8981\u4f7f\u7528\u7684\u8d44\u6e90\uff0c\u6bd4\u5982\u4f60\u5728\u7a0b\u5e8f\u4ee3\u7801\u91cc\u5f00\u4e00\u4e2a\u6570\u7ec4\uff0c\u8fd9\u4e2a\u6570\u7ec4\u80af\u5b9a\u5b58\u5728\u7528\u6237\u7a7a\u95f4\uff1b\u5185\u6838\u7a7a\u95f4\u5b58\u653e\u5185\u6838\u8fdb\u7a0b\u9700\u8981\u52a0\u8f7d\u7684\u7cfb\u7edf\u8d44\u6e90\uff0c\u8fd9\u4e00\u4e9b\u8d44\u6e90\u4e00\u822c\u662f\u4e0d\u5141\u8bb8\u7528\u6237\u8bbf\u95ee\u7684\u3002\u4f46\u662f\u6ce8\u610f\u6709\u7684\u7528\u6237\u8fdb\u7a0b\u4f1a\u5171\u4eab\u4e00\u4e9b\u5185\u6838\u7a7a\u95f4\u7684\u8d44\u6e90\uff0c\u6bd4\u5982\u4e00\u4e9b\u52a8\u6001\u94fe\u63a5\u5e93\u7b49\u7b49\u3002 \u6211\u4eec\u7528 C \u8bed\u8a00\u5199\u4e00\u4e2a hello \u7a0b\u5e8f\uff0c\u7f16\u8bd1\u540e\u5f97\u5230\u4e00\u4e2a\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5728\u547d\u4ee4\u884c\u8fd0\u884c\u5c31\u53ef\u4ee5\u6253\u5370\u51fa\u4e00\u53e5 hello world\uff0c\u7136\u540e\u7a0b\u5e8f\u9000\u51fa\u3002\u5728\u64cd\u4f5c\u7cfb\u7edf\u5c42\u9762\uff0c\u5c31\u662f\u65b0\u5efa\u4e86\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u8fd9\u4e2a\u8fdb\u7a0b\u5c06\u6211\u4eec\u7f16\u8bd1\u51fa\u6765\u7684\u53ef\u6267\u884c\u6587\u4ef6\u8bfb\u5165\u5185\u5b58\u7a7a\u95f4\uff0c\u7136\u540e\u6267\u884c\uff0c\u6700\u540e\u9000\u51fa\u3002 \u4f60\u7f16\u8bd1\u597d\u7684\u90a3\u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\u53ea\u662f\u4e00\u4e2a\u6587\u4ef6 \uff0c\u4e0d\u662f\u8fdb\u7a0b\uff0c\u53ef\u6267\u884c\u6587\u4ef6\u5fc5\u987b\u8981\u8f7d\u5165\u5185\u5b58\uff0c\u5305\u88c5\u6210\u4e00\u4e2a\u8fdb\u7a0b\u624d\u80fd\u771f\u6b63\u8dd1\u8d77\u6765\u3002\u8fdb\u7a0b\u662f\u8981\u4f9d\u9760\u64cd\u4f5c\u7cfb\u7edf\u521b\u5efa\u7684\uff0c\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u5b83\u7684\u56fa\u6709\u5c5e\u6027\uff0c\u6bd4\u5982\u8fdb\u7a0b\u53f7\uff08PID\uff09\u3001\u8fdb\u7a0b\u72b6\u6001\u3001\u6253\u5f00\u7684\u6587\u4ef6\u7b49\u7b49\uff0c\u8fdb\u7a0b\u521b\u5efa\u597d\u4e4b\u540e\uff0c\u8bfb\u5165\u4f60\u7684\u7a0b\u5e8f\uff0c\u4f60\u7684\u7a0b\u5e8f\u624d\u88ab\u7cfb\u7edf\u6267\u884c\u3002 \u90a3\u4e48\uff0c\u64cd\u4f5c\u7cfb\u7edf\u662f\u5982\u4f55\u521b\u5efa\u8fdb\u7a0b\u7684\u5462\uff1f \u5bf9\u4e8e\u64cd\u4f5c\u7cfb\u7edf\uff0c\u8fdb\u7a0b\u5c31\u662f\u4e00\u4e2a\u6570\u636e\u7ed3\u6784 \uff0c\u6211\u4eec\u76f4\u63a5\u6765\u770b Linux \u7684\u6e90\u7801\uff1a struct task_struct { // \u8fdb\u7a0b\u72b6\u6001 long state; // \u865a\u62df\u5185\u5b58\u7ed3\u6784\u4f53 struct mm_struct *mm; // \u8fdb\u7a0b\u53f7 pid_t pid; // \u6307\u5411\u7236\u8fdb\u7a0b\u7684\u6307\u9488 struct task_struct __rcu *parent; // \u5b50\u8fdb\u7a0b\u5217\u8868 struct list_head children; // \u5b58\u653e\u6587\u4ef6\u7cfb\u7edf\u4fe1\u606f\u7684\u6307\u9488 struct fs_struct *fs; // \u4e00\u4e2a\u6570\u7ec4\uff0c\u5305\u542b\u8be5\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6\u6307\u9488 struct files_struct *files; }; task_struct \u5c31\u662f Linux \u5185\u6838\u5bf9\u4e8e\u4e00\u4e2a\u8fdb\u7a0b\u7684\u63cf\u8ff0\uff0c\u4e5f\u53ef\u4ee5\u79f0\u4e3a\u300c\u8fdb\u7a0b\u63cf\u8ff0\u7b26\u300d\u3002\u6e90\u7801\u6bd4\u8f83\u590d\u6742\uff0c\u6211\u8fd9\u91cc\u5c31\u622a\u53d6\u4e86\u4e00\u5c0f\u90e8\u5206\u6bd4\u8f83\u5e38\u89c1\u7684\u3002 \u5176\u4e2d\u6bd4\u8f83\u6709\u610f\u601d\u7684\u662f mm \u6307\u9488\u548c files \u6307\u9488\u3002 mm \u6307\u5411\u7684\u662f\u8fdb\u7a0b\u7684\u865a\u62df\u5185\u5b58\uff0c\u4e5f\u5c31\u662f\u8f7d\u5165\u8d44\u6e90\u548c\u53ef\u6267\u884c\u6587\u4ef6\u7684\u5730\u65b9\uff1b files \u6307\u9488\u6307\u5411\u4e00\u4e2a\u6570\u7ec4\uff0c\u8fd9\u4e2a\u6570\u7ec4\u91cc\u88c5\u7740\u6240\u6709\u8be5\u8fdb\u7a0b\u6253\u5f00\u7684\u6587\u4ef6\u7684\u6307\u9488\u3002","title":"\u4e00\u3001\u8fdb\u7a0b\u662f\u4ec0\u4e48"},{"location":"linux/process-and-thread/#_2","text":"\u5148\u8bf4 files \uff0c\u5b83\u662f\u4e00\u4e2a\u6587\u4ef6\u6307\u9488\u6570\u7ec4\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u4e00\u4e2a\u8fdb\u7a0b\u4f1a\u4ece files[0] \u8bfb\u53d6\u8f93\u5165\uff0c\u5c06\u8f93\u51fa\u5199\u5165 files[1] \uff0c\u5c06\u9519\u8bef\u4fe1\u606f\u5199\u5165 files[2] \u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u4ee5\u6211\u4eec\u7684\u89d2\u5ea6 C \u8bed\u8a00\u7684 printf \u51fd\u6570\u662f\u5411\u547d\u4ee4\u884c\u6253\u5370\u5b57\u7b26\uff0c\u4f46\u662f\u4ece\u8fdb\u7a0b\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u5c31\u662f\u5411 files[1] \u5199\u5165\u6570\u636e\uff1b\u540c\u7406\uff0c scanf \u51fd\u6570\u5c31\u662f\u8fdb\u7a0b\u8bd5\u56fe\u4ece files[0] \u8fd9\u4e2a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\u3002 \u6bcf\u4e2a\u8fdb\u7a0b\u88ab\u521b\u5efa\u65f6\uff0c files \u7684\u524d\u4e09\u4f4d\u88ab\u586b\u5165\u9ed8\u8ba4\u503c\uff0c\u5206\u522b\u6307\u5411\u6807\u51c6\u8f93\u5165\u6d41\u3001\u6807\u51c6\u8f93\u51fa\u6d41\u3001\u6807\u51c6\u9519\u8bef\u6d41\u3002\u6211\u4eec\u5e38\u8bf4\u7684\u300c\u6587\u4ef6\u63cf\u8ff0\u7b26\u300d\u5c31\u662f\u6307\u8fd9\u4e2a\u6587\u4ef6\u6307\u9488\u6570\u7ec4\u7684\u7d22\u5f15 \uff0c\u6240\u4ee5\u7a0b\u5e8f\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u9ed8\u8ba4\u60c5\u51b5\u4e0b 0 \u662f\u8f93\u5165\uff0c1 \u662f\u8f93\u51fa\uff0c2 \u662f\u9519\u8bef\u3002 \u6211\u4eec\u53ef\u4ee5\u91cd\u65b0\u753b\u4e00\u5e45\u56fe\uff1a \u5bf9\u4e8e\u4e00\u822c\u7684\u8ba1\u7b97\u673a\uff0c\u8f93\u5165\u6d41\u662f\u952e\u76d8\uff0c\u8f93\u51fa\u6d41\u662f\u663e\u793a\u5668\uff0c\u9519\u8bef\u6d41\u4e5f\u662f\u663e\u793a\u5668\uff0c\u6240\u4ee5\u73b0\u5728\u8fd9\u4e2a\u8fdb\u7a0b\u548c\u5185\u6838\u8fde\u4e86\u4e09\u6839\u7ebf\u3002\u56e0\u4e3a\u786c\u4ef6\u90fd\u662f\u7531\u5185\u6838\u7ba1\u7406\u7684\uff0c\u6211\u4eec\u7684\u8fdb\u7a0b\u9700\u8981\u901a\u8fc7\u300c\u7cfb\u7edf\u8c03\u7528\u300d\u8ba9\u5185\u6838\u8fdb\u7a0b\u8bbf\u95ee\u786c\u4ef6\u8d44\u6e90\u3002 PS\uff1a\u4e0d\u8981\u5fd8\u4e86\uff0cLinux \u4e2d\u4e00\u5207\u90fd\u88ab\u62bd\u8c61\u6210\u6587\u4ef6\uff0c\u8bbe\u5907\u4e5f\u662f\u6587\u4ef6\uff0c\u53ef\u4ee5\u8fdb\u884c\u8bfb\u548c\u5199\u3002 \u5982\u679c\u6211\u4eec\u5199\u7684\u7a0b\u5e8f\u9700\u8981\u5176\u4ed6\u8d44\u6e90\uff0c\u6bd4\u5982\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\u8fdb\u884c\u8bfb\u5199\uff0c\u8fd9\u4e5f\u5f88\u7b80\u5355\uff0c\u8fdb\u884c\u7cfb\u7edf\u8c03\u7528\uff0c\u8ba9\u5185\u6838\u628a\u6587\u4ef6\u6253\u5f00\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5c31\u4f1a\u88ab\u653e\u5230 files \u7684\u7b2c 4 \u4e2a\u4f4d\u7f6e\uff1a \u660e\u767d\u4e86\u8fd9\u4e2a\u539f\u7406\uff0c \u8f93\u5165\u91cd\u5b9a\u5411 \u5c31\u5f88\u597d\u7406\u89e3\u4e86\uff0c\u7a0b\u5e8f\u60f3\u8bfb\u53d6\u6570\u636e\u7684\u65f6\u5019\u5c31\u4f1a\u53bb files[0] \u8bfb\u53d6\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u8981\u628a files[0] \u6307\u5411\u4e00\u4e2a\u6587\u4ef6\uff0c\u90a3\u4e48\u7a0b\u5e8f\u5c31\u4f1a\u4ece\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u800c\u4e0d\u662f\u4ece\u952e\u76d8\uff1a $ command < file.txt \u540c\u7406\uff0c \u8f93\u51fa\u91cd\u5b9a\u5411 \u5c31\u662f\u628a files[1] \u6307\u5411\u4e00\u4e2a\u6587\u4ef6\uff0c\u90a3\u4e48\u7a0b\u5e8f\u7684\u8f93\u51fa\u5c31\u4e0d\u4f1a\u5199\u5165\u5230\u663e\u793a\u5668\uff0c\u800c\u662f\u5199\u5165\u5230\u8fd9\u4e2a\u6587\u4ef6\u4e2d\uff1a $ command > file.txt \u9519\u8bef\u91cd\u5b9a\u5411\u4e5f\u662f\u4e00\u6837\u7684\uff0c\u5c31\u4e0d\u518d\u8d58\u8ff0\u3002 \u7ba1\u9053\u7b26 \u5176\u5b9e\u4e5f\u662f\u5f02\u66f2\u540c\u5de5\uff0c\u628a\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u51fa\u6d41\u548c\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u7684\u8f93\u5165\u6d41\u63a5\u8d77\u4e00\u6761\u300c\u7ba1\u9053\u300d\uff0c\u6570\u636e\u5c31\u5728\u5176\u4e2d\u4f20\u9012\uff0c\u4e0d\u5f97\u4e0d\u8bf4\u8fd9\u79cd\u8bbe\u8ba1\u601d\u60f3\u771f\u7684\u5f88\u4f18\u7f8e\uff1a $ cmd1 | cmd2 | cmd3 \u5230\u8fd9\u91cc\uff0c\u4f60\u53ef\u80fd\u4e5f\u770b\u51fa\u300cLinux \u4e2d\u4e00\u5207\u7686\u6587\u4ef6\u300d\u8bbe\u8ba1\u601d\u8def\u7684\u9ad8\u660e\u4e86\uff0c\u4e0d\u7ba1\u662f\u8bbe\u5907\u3001\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u3001socket \u5957\u63a5\u5b57\u8fd8\u662f\u771f\u6b63\u7684\u6587\u4ef6\uff0c\u5168\u90e8\u90fd\u53ef\u4ee5\u8bfb\u5199\uff0c\u7edf\u4e00\u88c5\u8fdb\u4e00\u4e2a\u7b80\u5355\u7684 files \u6570\u7ec4\uff0c\u8fdb\u7a0b\u901a\u8fc7\u7b80\u5355\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u8bbf\u95ee\u76f8\u5e94\u8d44\u6e90\uff0c\u5177\u4f53\u7ec6\u8282\u4ea4\u4e8e\u64cd\u4f5c\u7cfb\u7edf\uff0c\u6709\u6548\u89e3\u8026\uff0c\u4f18\u7f8e\u9ad8\u6548\u3002","title":"\u4e8c\u3001\u6587\u4ef6\u63cf\u8ff0\u7b26\u662f\u4ec0\u4e48"},{"location":"linux/process-and-thread/#_3","text":"\u9996\u5148\u8981\u660e\u786e\u7684\u662f\uff0c\u591a\u8fdb\u7a0b\u548c\u591a\u7ebf\u7a0b\u90fd\u662f\u5e76\u53d1\uff0c\u90fd\u53ef\u4ee5\u63d0\u9ad8\u5904\u7406\u5668\u7684\u5229\u7528\u6548\u7387\uff0c\u6240\u4ee5\u73b0\u5728\u7684\u5173\u952e\u662f\uff0c\u591a\u7ebf\u7a0b\u548c\u591a\u8fdb\u7a0b\u6709\u5565\u533a\u522b\u3002 \u4e3a\u4ec0\u4e48\u8bf4 Linux \u4e2d\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u57fa\u672c\u6ca1\u6709\u533a\u522b\u5462\uff0c\u56e0\u4e3a\u4ece Linux \u5185\u6838\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u5e76\u6ca1\u6709\u628a\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u533a\u522b\u5bf9\u5f85\u3002 \u6211\u4eec\u77e5\u9053\u7cfb\u7edf\u8c03\u7528 fork() \u53ef\u4ee5\u65b0\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u51fd\u6570 pthread() \u53ef\u4ee5\u65b0\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u3002 \u4f46\u65e0\u8bba\u7ebf\u7a0b\u8fd8\u662f\u8fdb\u7a0b\uff0c\u90fd\u662f\u7528 task_struct \u7ed3\u6784\u8868\u793a\u7684\uff0c\u552f\u4e00\u7684\u533a\u522b\u5c31\u662f\u5171\u4eab\u7684\u6570\u636e\u533a\u57df\u4e0d\u540c \u3002 \u6362\u53e5\u8bdd\u8bf4\uff0c\u7ebf\u7a0b\u770b\u8d77\u6765\u8ddf\u8fdb\u7a0b\u6ca1\u6709\u533a\u522b\uff0c\u53ea\u662f\u7ebf\u7a0b\u7684\u67d0\u4e9b\u6570\u636e\u533a\u57df\u548c\u5176\u7236\u8fdb\u7a0b\u662f\u5171\u4eab\u7684\uff0c\u800c\u5b50\u8fdb\u7a0b\u662f\u62f7\u8d1d\u526f\u672c\uff0c\u800c\u4e0d\u662f\u5171\u4eab\u3002\u5c31\u6bd4\u5982\u8bf4\uff0c mm \u7ed3\u6784\u548c files \u7ed3\u6784\u5728\u7ebf\u7a0b\u4e2d\u90fd\u662f\u5171\u4eab\u7684\uff0c\u6211\u753b\u4e24\u5f20\u56fe\u4f60\u5c31\u660e\u767d\u4e86\uff1a \u6240\u4ee5\u8bf4\uff0c\u6211\u4eec\u7684\u591a\u7ebf\u7a0b\u7a0b\u5e8f\u8981\u5229\u7528\u9501\u673a\u5236\uff0c\u907f\u514d\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u5f80\u540c\u4e00\u533a\u57df\u5199\u5165\u6570\u636e\uff0c\u5426\u5219\u53ef\u80fd\u9020\u6210\u6570\u636e\u9519\u4e71\u3002 \u90a3\u4e48\u4f60\u53ef\u80fd\u95ee\uff0c \u65e2\u7136\u8fdb\u7a0b\u548c\u7ebf\u7a0b\u5dee\u4e0d\u591a\uff0c\u800c\u4e14\u591a\u8fdb\u7a0b\u6570\u636e\u4e0d\u5171\u4eab\uff0c\u5373\u4e0d\u5b58\u5728\u6570\u636e\u9519\u4e71\u7684\u95ee\u9898\uff0c\u4e3a\u4ec0\u4e48\u591a\u7ebf\u7a0b\u7684\u4f7f\u7528\u6bd4\u591a\u8fdb\u7a0b\u666e\u904d\u5f97\u591a\u5462 \uff1f \u56e0\u4e3a\u73b0\u5b9e\u4e2d\u6570\u636e\u5171\u4eab\u7684\u5e76\u53d1\u66f4\u666e\u904d\u5440\uff0c\u6bd4\u5982\u5341\u4e2a\u4eba\u540c\u65f6\u4ece\u4e00\u4e2a\u8d26\u6237\u53d6\u5341\u5143\uff0c\u6211\u4eec\u5e0c\u671b\u7684\u662f\u8fd9\u4e2a\u5171\u4eab\u8d26\u6237\u7684\u4f59\u989d\u6b63\u786e\u51cf\u5c11\u4e00\u767e\u5143\uff0c\u800c\u4e0d\u662f\u5e0c\u671b\u6bcf\u4eba\u83b7\u5f97\u4e00\u4e2a\u8d26\u6237\u7684\u62f7\u8d1d\uff0c\u6bcf\u4e2a\u62f7\u8d1d\u8d26\u6237\u51cf\u5c11\u5341\u5143\u3002 \u5f53\u7136\uff0c\u5fc5\u987b\u8981\u8bf4\u660e\u7684\u662f\uff0c\u53ea\u6709 Linux \u7cfb\u7edf\u5c06\u7ebf\u7a0b\u770b\u505a\u5171\u4eab\u6570\u636e\u7684\u8fdb\u7a0b\uff0c\u4e0d\u5bf9\u5176\u505a\u7279\u6b8a\u770b\u5f85\uff0c\u5176\u4ed6\u7684\u5f88\u591a\u64cd\u4f5c\u7cfb\u7edf\u662f\u5bf9\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u533a\u522b\u5bf9\u5f85\u7684\uff0c\u7ebf\u7a0b\u6709\u5176\u7279\u6709\u7684\u6570\u636e\u7ed3\u6784\uff0c\u6211\u4e2a\u4eba\u8ba4\u4e3a\u4e0d\u5982 Linux \u7684\u8fd9\u79cd\u8bbe\u8ba1\u7b80\u6d01\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\u3002 \u5728 Linux \u4e2d\u65b0\u5efa\u7ebf\u7a0b\u548c\u8fdb\u7a0b\u7684\u6548\u7387\u90fd\u662f\u5f88\u9ad8\u7684\uff0c\u5bf9\u4e8e\u65b0\u5efa\u8fdb\u7a0b\u65f6\u5185\u5b58\u533a\u57df\u62f7\u8d1d\u7684\u95ee\u9898\uff0cLinux \u91c7\u7528\u4e86 copy-on-write \u7684\u7b56\u7565\u4f18\u5316\uff0c\u4e5f\u5c31\u662f\u5e76\u4e0d\u771f\u6b63\u590d\u5236\u7236\u8fdb\u7a0b\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u800c\u662f\u7b49\u5230\u9700\u8981\u5199\u64cd\u4f5c\u65f6\u624d\u53bb\u590d\u5236\u3002 \u6240\u4ee5 Linux \u4e2d\u65b0\u5efa\u8fdb\u7a0b\u548c\u65b0\u5efa\u7ebf\u7a0b\u90fd\u662f\u5f88\u8fc5\u901f\u7684 \u3002","title":"\u4e09\u3001\u7ebf\u7a0b\u662f\u4ec0\u4e48"},{"location":"linux/shell/","text":"shell \u90a3\u4e48\u5bf9\u4e8e Linux \u547d\u4ee4\u884c\uff0c\u672c\u6587\u4e0d\u662f\u4ecb\u7ecd\u67d0\u4e9b\u547d\u4ee4\u7684\u7528\u6cd5\uff0c\u800c\u662f\u8bf4\u660e\u4e00\u4e9b\u7b80\u5355\u5374\u7279\u522b\u5bb9\u6613\u8ba9\u4eba\u8ff7\u60d1\u7684\u7ec6\u8282\u95ee\u9898 \u3002 1\u3001\u6807\u51c6\u8f93\u5165\u548c\u547d\u4ee4\u53c2\u6570\u7684\u533a\u522b\u3002 2\u3001\u5728\u540e\u53f0\u8fd0\u884c\u547d\u4ee4\u5728\u9000\u51fa\u7ec8\u7aef\u540e\u4e5f\u5168\u90e8\u9000\u51fa\u4e86\u3002 3\u3001\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\u8868\u793a\u5b57\u7b26\u4e32\u7684\u533a\u522b\u3002 4\u3001\u6709\u7684\u547d\u4ee4\u548c sudo \u4e00\u8d77\u7528\u5c31 command not found\u3002 \u6807\u51c6\u8f93\u5165\u548c\u53c2\u6570\u7684\u533a\u522b \u8fd9\u4e2a\u95ee\u9898\u4e00\u5b9a\u662f\u6700\u5bb9\u6613\u8ba9\u4eba\u8ff7\u60d1\u7684\uff0c\u5177\u4f53\u6765\u8bf4\uff0c\u5c31\u662f\u641e\u4e0d\u6e05\u4ec0\u4e48\u65f6\u5019\u7528\u7ba1\u9053\u7b26 | \u548c\u6587\u4ef6\u91cd\u5b9a\u5411 > \uff0c < \uff0c\u4ec0\u4e48\u65f6\u5019\u7528\u53d8\u91cf $ \u3002 \u6bd4\u5982\u8bf4\uff0c\u6211\u73b0\u5728\u6709\u4e2a\u81ea\u52a8\u8fde\u63a5\u5bbd\u5e26\u7684 shell \u811a\u672c connect.sh \uff0c\u5b58\u5728\u6211\u7684\u5bb6\u76ee\u5f55\uff1a $ where connect.sh /home/fdl/bin/connect.sh \u5982\u679c\u6211\u60f3\u5220\u9664\u8fd9\u4e2a\u811a\u672c\uff0c\u800c\u4e14\u60f3\u5c11\u6572\u51e0\u6b21\u952e\u76d8\uff0c\u5e94\u8be5\u600e\u4e48\u64cd\u4f5c\u5462\uff1f\u6211\u66fe\u7ecf\u8fd9\u6837\u5c1d\u8bd5\u8fc7\uff1a $ where connect.sh | rm \u5b9e\u9645\u4e0a\uff0c\u8fd9\u6837\u64cd\u4f5c\u662f\u9519\u8bef\u7684\uff0c\u6b63\u786e\u7684\u505a\u6cd5\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a $ rm $(where connect.sh) \u524d\u8005\u8bd5\u56fe\u5c06 where \u7684\u7ed3\u679c\u8fde\u63a5\u5230 rm \u7684\u6807\u51c6\u8f93\u5165\uff0c\u540e\u8005\u8bd5\u56fe\u5c06\u7ed3\u679c\u4f5c\u4e3a\u547d\u4ee4\u884c\u53c2\u6570\u4f20\u5165\u3002 \u6807\u51c6\u8f93\u5165\u5c31\u662f\u7f16\u7a0b\u8bed\u8a00\u4e2d\u8bf8\u5982 scanf \u6216\u8005 readline \u8fd9\u79cd\u547d\u4ee4\uff1b\u800c\u53c2\u6570\u662f\u6307\u7a0b\u5e8f\u7684 main \u51fd\u6570\u4f20\u5165\u7684 args \u5b57\u7b26\u6570\u7ec4 \u3002 \u524d\u6587\u300cLinux\u6587\u4ef6\u63cf\u8ff0\u7b26\u300d\u8bf4\u8fc7\uff0c\u7ba1\u9053\u7b26\u548c\u91cd\u5b9a\u5411\u7b26\u662f\u5c06\u6570\u636e\u4f5c\u4e3a\u7a0b\u5e8f\u7684\u6807\u51c6\u8f93\u5165\uff0c\u800c $(cmd) \u662f\u8bfb\u53d6 cmd \u547d\u4ee4\u8f93\u51fa\u7684\u6570\u636e\u4f5c\u4e3a\u53c2\u6570\u3002 \u7528\u521a\u624d\u7684\u4f8b\u5b50\u8bf4\uff0c rm \u547d\u4ee4\u6e90\u4ee3\u7801\u4e2d\u80af\u5b9a\u4e0d\u63a5\u53d7\u6807\u51c6\u8f93\u5165\uff0c\u800c\u662f\u63a5\u6536\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u5220\u9664\u76f8\u5e94\u7684\u6587\u4ef6\u3002\u4f5c\u4e3a\u5bf9\u6bd4\uff0c cat \u547d\u4ee4\u662f\u65e2\u63a5\u53d7\u6807\u51c6\u8f93\u5165\uff0c\u53c8\u63a5\u53d7\u547d\u4ee4\u884c\u53c2\u6570\uff1a $ cat filename ...file text... $ cat < filename ...file text... $ echo 'hello world' | cat hello world \u5982\u679c\u547d\u4ee4\u80fd\u591f\u8ba9\u7ec8\u7aef\u963b\u585e\uff0c\u8bf4\u660e\u8be5\u547d\u4ee4\u63a5\u6536\u6807\u51c6\u8f93\u5165\uff0c\u53cd\u4e4b\u5c31\u662f\u4e0d\u63a5\u53d7 \uff0c\u6bd4\u5982\u4f60\u53ea\u8fd0\u884c cat \u547d\u4ee4\u4e0d\u52a0\u4efb\u4f55\u53c2\u6570\uff0c\u7ec8\u7aef\u5c31\u4f1a\u963b\u585e\uff0c\u7b49\u5f85\u4f60\u8f93\u5165\u5b57\u7b26\u4e32\u5e76\u56de\u663e\u76f8\u540c\u7684\u5b57\u7b26\u4e32\u3002 \u540e\u53f0\u8fd0\u884c\u7a0b\u5e8f \u6bd4\u5982\u8bf4\u4f60\u8fdc\u7a0b\u767b\u5f55\u5230\u670d\u52a1\u5668\u4e0a\uff0c\u8fd0\u884c\u4e00\u4e2a Django web \u7a0b\u5e8f\uff1a $ python manager.py runserver 0.0.0.0 Listening on 0.0.0.0:8080... \u73b0\u5728\u4f60\u53ef\u4ee5\u901a\u8fc7\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u6d4b\u8bd5 Django \u670d\u52a1\uff0c\u4f46\u662f\u7ec8\u7aef\u6b64\u65f6\u5c31\u963b\u585e\u4e86\uff0c\u4f60\u8f93\u5165\u4ec0\u4e48\u90fd\u4e0d\u54cd\u5e94\uff0c\u9664\u975e\u8f93\u5165 Ctrl-C \u6216\u8005 Ctrl-/ \u7ec8\u6b62 python \u8fdb\u7a0b\u3002 \u53ef\u4ee5\u5728\u547d\u4ee4\u4e4b\u540e\u52a0\u4e00\u4e2a & \u7b26\u53f7\uff0c\u8fd9\u6837\u547d\u4ee4\u884c\u4e0d\u4f1a\u963b\u585e\uff0c\u53ef\u4ee5\u54cd\u5e94\u4f60\u540e\u7eed\u8f93\u5165\u7684\u547d\u4ee4\uff0c\u4f46\u662f\u5982\u679c\u4f60\u9000\u51fa\u670d\u52a1\u5668\u7684\u767b\u5f55\uff0c\u5c31\u4e0d\u80fd\u8bbf\u95ee\u8be5\u7f51\u9875\u4e86\u3002 \u5982\u679c\u4f60\u60f3\u5728\u9000\u51fa\u670d\u52a1\u5668\u4e4b\u540e\u4ecd\u7136\u80fd\u591f\u8bbf\u95ee web \u670d\u52a1\uff0c\u5e94\u8be5\u8fd9\u6837\u5199\u547d\u4ee4 (cmd &) \uff1a $ (python manager.py runserver 0.0.0.0 &) Listening on 0.0.0.0:8080... $ logout \u5e95\u5c42\u539f\u7406\u662f\u8fd9\u6837\u7684 \uff1a \u6bcf\u4e00\u4e2a\u547d\u4ee4\u884c\u7ec8\u7aef\u90fd\u662f\u4e00\u4e2a shell \u8fdb\u7a0b\uff0c\u4f60\u5728\u8fd9\u4e2a\u7ec8\u7aef\u91cc\u6267\u884c\u7684\u7a0b\u5e8f\u5b9e\u9645\u4e0a\u90fd\u662f\u8fd9\u4e2a shell \u8fdb\u7a0b\u5206\u51fa\u6765\u7684\u5b50\u8fdb\u7a0b\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0cshell \u8fdb\u7a0b\u4f1a\u963b\u585e\uff0c\u7b49\u5f85\u5b50\u8fdb\u7a0b\u9000\u51fa\u624d\u91cd\u65b0\u63a5\u6536\u4f60\u8f93\u5165\u7684\u65b0\u7684\u547d\u4ee4\u3002\u52a0\u4e0a & \u53f7\uff0c\u53ea\u662f\u8ba9 shell \u8fdb\u7a0b\u4e0d\u518d\u963b\u585e\uff0c\u53ef\u4ee5\u7ee7\u7eed\u54cd\u5e94\u4f60\u7684\u65b0\u547d\u4ee4\u3002\u4f46\u662f\u65e0\u8bba\u5982\u4f55\uff0c\u4f60\u5982\u679c\u5173\u6389\u4e86\u8fd9\u4e2a shell \u547d\u4ee4\u884c\u7aef\u53e3\uff0c\u4f9d\u9644\u4e8e\u5b83\u7684\u6240\u6709\u5b50\u8fdb\u7a0b\u90fd\u4f1a\u9000\u51fa\u3002 \u800c (cmd &) \u8fd9\u6837\u8fd0\u884c\u547d\u4ee4\uff0c\u5219\u662f\u5c06 cmd \u547d\u4ee4\u6302\u5230\u4e00\u4e2a systemd \u7cfb\u7edf\u5b88\u62a4\u8fdb\u7a0b\u540d\u4e0b\uff0c\u8ba4 systemd \u505a\u7238\u7238\uff0c\u8fd9\u6837\u5f53\u4f60\u9000\u51fa\u5f53\u524d\u7ec8\u7aef\u65f6\uff0c\u5bf9\u4e8e\u521a\u624d\u7684 cmd \u547d\u4ee4\u5c31\u5b8c\u5168\u6ca1\u6709\u5f71\u54cd\u4e86\u3002 \u7c7b\u4f3c\u7684\uff0c\u8fd8\u6709\u4e00\u79cd\u540e\u53f0\u8fd0\u884c\u5e38\u7528\u7684\u505a\u6cd5\u662f\u8fd9\u6837\uff1a $ nohup some_cmd & nohup \u547d\u4ee4\u4e5f\u662f\u7c7b\u4f3c\u7684\u539f\u7406\uff0c\u4e0d\u8fc7\u901a\u8fc7\u6211\u7684\u6d4b\u8bd5\uff0c\u8fd8\u662f (cmd &) \u8fd9\u79cd\u5f62\u5f0f\u66f4\u52a0\u7a33\u5b9a\u3002 \u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\u7684\u533a\u522b \u4e0d\u540c\u7684 shell \u884c\u4e3a\u4f1a\u6709\u7ec6\u5fae\u533a\u522b\uff0c\u4f46\u6709\u4e00\u70b9\u662f\u786e\u5b9a\u7684\uff0c \u5bf9\u4e8e $ \uff0c ( \uff0c ) \u8fd9\u51e0\u4e2a\u7b26\u53f7\uff0c\u5355\u5f15\u53f7\u5305\u56f4\u7684\u5b57\u7b26\u4e32\u4e0d\u4f1a\u505a\u4efb\u4f55\u8f6c\u4e49\uff0c\u53cc\u5f15\u53f7\u5305\u56f4\u7684\u5b57\u7b26\u4e32\u4f1a\u8f6c\u4e49 \u3002 shell \u7684\u884c\u4e3a\u53ef\u4ee5\u6d4b\u8bd5\uff0c\u4f7f\u7528 set -x \u547d\u4ee4\uff0c\u4f1a\u5f00\u542f shell \u7684\u547d\u4ee4\u56de\u663e\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u56de\u663e\u89c2\u5bdf shell \u5230\u5e95\u5728\u6267\u884c\u4ec0\u4e48\u547d\u4ee4\uff1a \u53ef\u89c1 echo $(cmd) \u548c echo \"$(cmd)\" \uff0c\u7ed3\u679c\u5dee\u4e0d\u591a\uff0c\u4f46\u662f\u4ecd\u7136\u6709\u533a\u522b\u3002\u6ce8\u610f\u89c2\u5bdf\uff0c\u53cc\u5f15\u53f7\u8f6c\u4e49\u5b8c\u6210\u7684\u7ed3\u679c\u4f1a\u81ea\u52a8\u589e\u52a0\u5355\u5f15\u53f7\uff0c\u800c\u524d\u8005\u4e0d\u4f1a\u3002 \u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c $ \u8bfb\u53d6\u51fa\u7684\u53c2\u6570\u5b57\u7b26\u4e32\u5305\u542b\u7a7a\u683c\uff0c\u5e94\u8be5\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\uff0c\u5426\u5219\u5c31\u4f1a\u51fa\u9519 \u3002 sudo \u627e\u4e0d\u5230\u547d\u4ee4 \u6709\u65f6\u5019\u6211\u4eec\u666e\u901a\u7528\u6237\u53ef\u4ee5\u7528\u7684\u547d\u4ee4\uff0c\u7528 sudo \u52a0\u6743\u9650\u4e4b\u540e\u5374\u62a5\u9519 command not found\uff1a $ connect.sh network-manager: Permission denied $ sudo connect.sh sudo: command not found \u539f\u56e0\u5728\u4e8e\uff0c connect.sh \u8fd9\u4e2a\u811a\u672c\u4ec5\u5b58\u5728\u4e8e\u8be5\u7528\u6237\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff1a $ where connect.sh /home/fdl/bin/connect.sh \u5f53\u4f7f\u7528 sudo \u65f6\uff0c\u7cfb\u7edf\u4f1a\u4f7f\u7528 /etc/sudoers \u8fd9\u4e2a\u6587\u4ef6\u4e2d\u89c4\u5b9a\u7684\u8be5\u7528\u6237\u7684\u6743\u9650\u548c\u73af\u5883\u53d8\u91cf \uff0c\u800c\u8fd9\u4e2a\u811a\u672c\u5728 /etc/sudoers \u73af\u5883\u53d8\u91cf\u76ee\u5f55\u4e2d\u5f53\u7136\u662f\u627e\u4e0d\u5230\u7684\u3002 \u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u811a\u672c\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u800c\u4e0d\u662f\u4ec5\u4ec5\u901a\u8fc7\u811a\u672c\u540d\u79f0\uff1a $ sudo /home/fdl/bin/connect.sh .bash_profile alias ll='ls -alF' alias e='exit' alias c='clear' # Git branch in prompt. parse_git_branch() { git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/' } export PS1=\"\\[\\033[34m\\]\\t\\[\\033[00m\\] \\W\\[\\033[32m\\]\\$(parse_git_branch)\\[\\033[00m\\] $ \" # # brew install python@3.10 # # # If you need to have python@3.10 first in your PATH, run: # # export PATH=\"/usr/local/opt/curl/bin:$PATH\" # export PATH=\"/usr/local/opt/python@3.10/bin:$PATH\" # export PATH=\"/usr/local/opt/python@3.10/Frameworks/Python.framework/Versions/3.10/bin:$PATH\" # # #For compilers to find python@3.10 you may need to set: # export LDFLAGS=\"-L/usr/local/opt/python@3.10/lib\" # # # For pkg-config to find python@3.10 you may need to set: # export PKG_CONFIG_PATH=\"/usr/local/opt/python@3.10/lib/pkgconfig\" # # export LDFLAGS=\"-L/usr/local/opt/curl/lib\" # export CPPFLAGS=\"-I/usr/local/opt/curl/include\" # export PKG_CONFIG_PATH=\"/usr/local/opt/curl/lib/pkgconfig\" [[ -r \"/usr/local/etc/profile.d/bash_completion.sh\" ]] && . \"/usr/local/etc/profile.d/bash_completion.sh\" source /Users/lian/python3.10-venv/bin/activate source ~/.git-completion.bash","title":"shell"},{"location":"linux/shell/#shell","text":"\u90a3\u4e48\u5bf9\u4e8e Linux \u547d\u4ee4\u884c\uff0c\u672c\u6587\u4e0d\u662f\u4ecb\u7ecd\u67d0\u4e9b\u547d\u4ee4\u7684\u7528\u6cd5\uff0c\u800c\u662f\u8bf4\u660e\u4e00\u4e9b\u7b80\u5355\u5374\u7279\u522b\u5bb9\u6613\u8ba9\u4eba\u8ff7\u60d1\u7684\u7ec6\u8282\u95ee\u9898 \u3002 1\u3001\u6807\u51c6\u8f93\u5165\u548c\u547d\u4ee4\u53c2\u6570\u7684\u533a\u522b\u3002 2\u3001\u5728\u540e\u53f0\u8fd0\u884c\u547d\u4ee4\u5728\u9000\u51fa\u7ec8\u7aef\u540e\u4e5f\u5168\u90e8\u9000\u51fa\u4e86\u3002 3\u3001\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\u8868\u793a\u5b57\u7b26\u4e32\u7684\u533a\u522b\u3002 4\u3001\u6709\u7684\u547d\u4ee4\u548c sudo \u4e00\u8d77\u7528\u5c31 command not found\u3002","title":"shell"},{"location":"linux/shell/#_1","text":"\u8fd9\u4e2a\u95ee\u9898\u4e00\u5b9a\u662f\u6700\u5bb9\u6613\u8ba9\u4eba\u8ff7\u60d1\u7684\uff0c\u5177\u4f53\u6765\u8bf4\uff0c\u5c31\u662f\u641e\u4e0d\u6e05\u4ec0\u4e48\u65f6\u5019\u7528\u7ba1\u9053\u7b26 | \u548c\u6587\u4ef6\u91cd\u5b9a\u5411 > \uff0c < \uff0c\u4ec0\u4e48\u65f6\u5019\u7528\u53d8\u91cf $ \u3002 \u6bd4\u5982\u8bf4\uff0c\u6211\u73b0\u5728\u6709\u4e2a\u81ea\u52a8\u8fde\u63a5\u5bbd\u5e26\u7684 shell \u811a\u672c connect.sh \uff0c\u5b58\u5728\u6211\u7684\u5bb6\u76ee\u5f55\uff1a $ where connect.sh /home/fdl/bin/connect.sh \u5982\u679c\u6211\u60f3\u5220\u9664\u8fd9\u4e2a\u811a\u672c\uff0c\u800c\u4e14\u60f3\u5c11\u6572\u51e0\u6b21\u952e\u76d8\uff0c\u5e94\u8be5\u600e\u4e48\u64cd\u4f5c\u5462\uff1f\u6211\u66fe\u7ecf\u8fd9\u6837\u5c1d\u8bd5\u8fc7\uff1a $ where connect.sh | rm \u5b9e\u9645\u4e0a\uff0c\u8fd9\u6837\u64cd\u4f5c\u662f\u9519\u8bef\u7684\uff0c\u6b63\u786e\u7684\u505a\u6cd5\u5e94\u8be5\u662f\u8fd9\u6837\u7684\uff1a $ rm $(where connect.sh) \u524d\u8005\u8bd5\u56fe\u5c06 where \u7684\u7ed3\u679c\u8fde\u63a5\u5230 rm \u7684\u6807\u51c6\u8f93\u5165\uff0c\u540e\u8005\u8bd5\u56fe\u5c06\u7ed3\u679c\u4f5c\u4e3a\u547d\u4ee4\u884c\u53c2\u6570\u4f20\u5165\u3002 \u6807\u51c6\u8f93\u5165\u5c31\u662f\u7f16\u7a0b\u8bed\u8a00\u4e2d\u8bf8\u5982 scanf \u6216\u8005 readline \u8fd9\u79cd\u547d\u4ee4\uff1b\u800c\u53c2\u6570\u662f\u6307\u7a0b\u5e8f\u7684 main \u51fd\u6570\u4f20\u5165\u7684 args \u5b57\u7b26\u6570\u7ec4 \u3002 \u524d\u6587\u300cLinux\u6587\u4ef6\u63cf\u8ff0\u7b26\u300d\u8bf4\u8fc7\uff0c\u7ba1\u9053\u7b26\u548c\u91cd\u5b9a\u5411\u7b26\u662f\u5c06\u6570\u636e\u4f5c\u4e3a\u7a0b\u5e8f\u7684\u6807\u51c6\u8f93\u5165\uff0c\u800c $(cmd) \u662f\u8bfb\u53d6 cmd \u547d\u4ee4\u8f93\u51fa\u7684\u6570\u636e\u4f5c\u4e3a\u53c2\u6570\u3002 \u7528\u521a\u624d\u7684\u4f8b\u5b50\u8bf4\uff0c rm \u547d\u4ee4\u6e90\u4ee3\u7801\u4e2d\u80af\u5b9a\u4e0d\u63a5\u53d7\u6807\u51c6\u8f93\u5165\uff0c\u800c\u662f\u63a5\u6536\u547d\u4ee4\u884c\u53c2\u6570\uff0c\u5220\u9664\u76f8\u5e94\u7684\u6587\u4ef6\u3002\u4f5c\u4e3a\u5bf9\u6bd4\uff0c cat \u547d\u4ee4\u662f\u65e2\u63a5\u53d7\u6807\u51c6\u8f93\u5165\uff0c\u53c8\u63a5\u53d7\u547d\u4ee4\u884c\u53c2\u6570\uff1a $ cat filename ...file text... $ cat < filename ...file text... $ echo 'hello world' | cat hello world \u5982\u679c\u547d\u4ee4\u80fd\u591f\u8ba9\u7ec8\u7aef\u963b\u585e\uff0c\u8bf4\u660e\u8be5\u547d\u4ee4\u63a5\u6536\u6807\u51c6\u8f93\u5165\uff0c\u53cd\u4e4b\u5c31\u662f\u4e0d\u63a5\u53d7 \uff0c\u6bd4\u5982\u4f60\u53ea\u8fd0\u884c cat \u547d\u4ee4\u4e0d\u52a0\u4efb\u4f55\u53c2\u6570\uff0c\u7ec8\u7aef\u5c31\u4f1a\u963b\u585e\uff0c\u7b49\u5f85\u4f60\u8f93\u5165\u5b57\u7b26\u4e32\u5e76\u56de\u663e\u76f8\u540c\u7684\u5b57\u7b26\u4e32\u3002","title":"\u6807\u51c6\u8f93\u5165\u548c\u53c2\u6570\u7684\u533a\u522b"},{"location":"linux/shell/#_2","text":"\u6bd4\u5982\u8bf4\u4f60\u8fdc\u7a0b\u767b\u5f55\u5230\u670d\u52a1\u5668\u4e0a\uff0c\u8fd0\u884c\u4e00\u4e2a Django web \u7a0b\u5e8f\uff1a $ python manager.py runserver 0.0.0.0 Listening on 0.0.0.0:8080... \u73b0\u5728\u4f60\u53ef\u4ee5\u901a\u8fc7\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u6d4b\u8bd5 Django \u670d\u52a1\uff0c\u4f46\u662f\u7ec8\u7aef\u6b64\u65f6\u5c31\u963b\u585e\u4e86\uff0c\u4f60\u8f93\u5165\u4ec0\u4e48\u90fd\u4e0d\u54cd\u5e94\uff0c\u9664\u975e\u8f93\u5165 Ctrl-C \u6216\u8005 Ctrl-/ \u7ec8\u6b62 python \u8fdb\u7a0b\u3002 \u53ef\u4ee5\u5728\u547d\u4ee4\u4e4b\u540e\u52a0\u4e00\u4e2a & \u7b26\u53f7\uff0c\u8fd9\u6837\u547d\u4ee4\u884c\u4e0d\u4f1a\u963b\u585e\uff0c\u53ef\u4ee5\u54cd\u5e94\u4f60\u540e\u7eed\u8f93\u5165\u7684\u547d\u4ee4\uff0c\u4f46\u662f\u5982\u679c\u4f60\u9000\u51fa\u670d\u52a1\u5668\u7684\u767b\u5f55\uff0c\u5c31\u4e0d\u80fd\u8bbf\u95ee\u8be5\u7f51\u9875\u4e86\u3002 \u5982\u679c\u4f60\u60f3\u5728\u9000\u51fa\u670d\u52a1\u5668\u4e4b\u540e\u4ecd\u7136\u80fd\u591f\u8bbf\u95ee web \u670d\u52a1\uff0c\u5e94\u8be5\u8fd9\u6837\u5199\u547d\u4ee4 (cmd &) \uff1a $ (python manager.py runserver 0.0.0.0 &) Listening on 0.0.0.0:8080... $ logout \u5e95\u5c42\u539f\u7406\u662f\u8fd9\u6837\u7684 \uff1a \u6bcf\u4e00\u4e2a\u547d\u4ee4\u884c\u7ec8\u7aef\u90fd\u662f\u4e00\u4e2a shell \u8fdb\u7a0b\uff0c\u4f60\u5728\u8fd9\u4e2a\u7ec8\u7aef\u91cc\u6267\u884c\u7684\u7a0b\u5e8f\u5b9e\u9645\u4e0a\u90fd\u662f\u8fd9\u4e2a shell \u8fdb\u7a0b\u5206\u51fa\u6765\u7684\u5b50\u8fdb\u7a0b\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0cshell \u8fdb\u7a0b\u4f1a\u963b\u585e\uff0c\u7b49\u5f85\u5b50\u8fdb\u7a0b\u9000\u51fa\u624d\u91cd\u65b0\u63a5\u6536\u4f60\u8f93\u5165\u7684\u65b0\u7684\u547d\u4ee4\u3002\u52a0\u4e0a & \u53f7\uff0c\u53ea\u662f\u8ba9 shell \u8fdb\u7a0b\u4e0d\u518d\u963b\u585e\uff0c\u53ef\u4ee5\u7ee7\u7eed\u54cd\u5e94\u4f60\u7684\u65b0\u547d\u4ee4\u3002\u4f46\u662f\u65e0\u8bba\u5982\u4f55\uff0c\u4f60\u5982\u679c\u5173\u6389\u4e86\u8fd9\u4e2a shell \u547d\u4ee4\u884c\u7aef\u53e3\uff0c\u4f9d\u9644\u4e8e\u5b83\u7684\u6240\u6709\u5b50\u8fdb\u7a0b\u90fd\u4f1a\u9000\u51fa\u3002 \u800c (cmd &) \u8fd9\u6837\u8fd0\u884c\u547d\u4ee4\uff0c\u5219\u662f\u5c06 cmd \u547d\u4ee4\u6302\u5230\u4e00\u4e2a systemd \u7cfb\u7edf\u5b88\u62a4\u8fdb\u7a0b\u540d\u4e0b\uff0c\u8ba4 systemd \u505a\u7238\u7238\uff0c\u8fd9\u6837\u5f53\u4f60\u9000\u51fa\u5f53\u524d\u7ec8\u7aef\u65f6\uff0c\u5bf9\u4e8e\u521a\u624d\u7684 cmd \u547d\u4ee4\u5c31\u5b8c\u5168\u6ca1\u6709\u5f71\u54cd\u4e86\u3002 \u7c7b\u4f3c\u7684\uff0c\u8fd8\u6709\u4e00\u79cd\u540e\u53f0\u8fd0\u884c\u5e38\u7528\u7684\u505a\u6cd5\u662f\u8fd9\u6837\uff1a $ nohup some_cmd & nohup \u547d\u4ee4\u4e5f\u662f\u7c7b\u4f3c\u7684\u539f\u7406\uff0c\u4e0d\u8fc7\u901a\u8fc7\u6211\u7684\u6d4b\u8bd5\uff0c\u8fd8\u662f (cmd &) \u8fd9\u79cd\u5f62\u5f0f\u66f4\u52a0\u7a33\u5b9a\u3002","title":"\u540e\u53f0\u8fd0\u884c\u7a0b\u5e8f"},{"location":"linux/shell/#_3","text":"\u4e0d\u540c\u7684 shell \u884c\u4e3a\u4f1a\u6709\u7ec6\u5fae\u533a\u522b\uff0c\u4f46\u6709\u4e00\u70b9\u662f\u786e\u5b9a\u7684\uff0c \u5bf9\u4e8e $ \uff0c ( \uff0c ) \u8fd9\u51e0\u4e2a\u7b26\u53f7\uff0c\u5355\u5f15\u53f7\u5305\u56f4\u7684\u5b57\u7b26\u4e32\u4e0d\u4f1a\u505a\u4efb\u4f55\u8f6c\u4e49\uff0c\u53cc\u5f15\u53f7\u5305\u56f4\u7684\u5b57\u7b26\u4e32\u4f1a\u8f6c\u4e49 \u3002 shell \u7684\u884c\u4e3a\u53ef\u4ee5\u6d4b\u8bd5\uff0c\u4f7f\u7528 set -x \u547d\u4ee4\uff0c\u4f1a\u5f00\u542f shell \u7684\u547d\u4ee4\u56de\u663e\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u56de\u663e\u89c2\u5bdf shell \u5230\u5e95\u5728\u6267\u884c\u4ec0\u4e48\u547d\u4ee4\uff1a \u53ef\u89c1 echo $(cmd) \u548c echo \"$(cmd)\" \uff0c\u7ed3\u679c\u5dee\u4e0d\u591a\uff0c\u4f46\u662f\u4ecd\u7136\u6709\u533a\u522b\u3002\u6ce8\u610f\u89c2\u5bdf\uff0c\u53cc\u5f15\u53f7\u8f6c\u4e49\u5b8c\u6210\u7684\u7ed3\u679c\u4f1a\u81ea\u52a8\u589e\u52a0\u5355\u5f15\u53f7\uff0c\u800c\u524d\u8005\u4e0d\u4f1a\u3002 \u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c $ \u8bfb\u53d6\u51fa\u7684\u53c2\u6570\u5b57\u7b26\u4e32\u5305\u542b\u7a7a\u683c\uff0c\u5e94\u8be5\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\uff0c\u5426\u5219\u5c31\u4f1a\u51fa\u9519 \u3002","title":"\u5355\u5f15\u53f7\u548c\u53cc\u5f15\u53f7\u7684\u533a\u522b"},{"location":"linux/shell/#sudo","text":"\u6709\u65f6\u5019\u6211\u4eec\u666e\u901a\u7528\u6237\u53ef\u4ee5\u7528\u7684\u547d\u4ee4\uff0c\u7528 sudo \u52a0\u6743\u9650\u4e4b\u540e\u5374\u62a5\u9519 command not found\uff1a $ connect.sh network-manager: Permission denied $ sudo connect.sh sudo: command not found \u539f\u56e0\u5728\u4e8e\uff0c connect.sh \u8fd9\u4e2a\u811a\u672c\u4ec5\u5b58\u5728\u4e8e\u8be5\u7528\u6237\u7684\u73af\u5883\u53d8\u91cf\u4e2d\uff1a $ where connect.sh /home/fdl/bin/connect.sh \u5f53\u4f7f\u7528 sudo \u65f6\uff0c\u7cfb\u7edf\u4f1a\u4f7f\u7528 /etc/sudoers \u8fd9\u4e2a\u6587\u4ef6\u4e2d\u89c4\u5b9a\u7684\u8be5\u7528\u6237\u7684\u6743\u9650\u548c\u73af\u5883\u53d8\u91cf \uff0c\u800c\u8fd9\u4e2a\u811a\u672c\u5728 /etc/sudoers \u73af\u5883\u53d8\u91cf\u76ee\u5f55\u4e2d\u5f53\u7136\u662f\u627e\u4e0d\u5230\u7684\u3002 \u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u811a\u672c\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u800c\u4e0d\u662f\u4ec5\u4ec5\u901a\u8fc7\u811a\u672c\u540d\u79f0\uff1a $ sudo /home/fdl/bin/connect.sh","title":"sudo \u627e\u4e0d\u5230\u547d\u4ee4"},{"location":"linux/shell/#bash_profile","text":"alias ll='ls -alF' alias e='exit' alias c='clear' # Git branch in prompt. parse_git_branch() { git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/' } export PS1=\"\\[\\033[34m\\]\\t\\[\\033[00m\\] \\W\\[\\033[32m\\]\\$(parse_git_branch)\\[\\033[00m\\] $ \" # # brew install python@3.10 # # # If you need to have python@3.10 first in your PATH, run: # # export PATH=\"/usr/local/opt/curl/bin:$PATH\" # export PATH=\"/usr/local/opt/python@3.10/bin:$PATH\" # export PATH=\"/usr/local/opt/python@3.10/Frameworks/Python.framework/Versions/3.10/bin:$PATH\" # # #For compilers to find python@3.10 you may need to set: # export LDFLAGS=\"-L/usr/local/opt/python@3.10/lib\" # # # For pkg-config to find python@3.10 you may need to set: # export PKG_CONFIG_PATH=\"/usr/local/opt/python@3.10/lib/pkgconfig\" # # export LDFLAGS=\"-L/usr/local/opt/curl/lib\" # export CPPFLAGS=\"-I/usr/local/opt/curl/include\" # export PKG_CONFIG_PATH=\"/usr/local/opt/curl/lib/pkgconfig\" [[ -r \"/usr/local/etc/profile.d/bash_completion.sh\" ]] && . \"/usr/local/etc/profile.d/bash_completion.sh\" source /Users/lian/python3.10-venv/bin/activate source ~/.git-completion.bash","title":".bash_profile"},{"location":"macos/bash_profile/","text":"alias ll='ls -alF' alias e='exit' alias c='clear' alias dockerps='docker ps --format \"{{.ID}}\\t{{.Names}}\"' # Git branch in prompt. parse_git_branch() { git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \\(.*\\)/ (\\1)/' } export PS1=\"\\[\\033[34m\\]\\t\\[\\033[00m\\] \\W\\[\\033[32m\\]\\$(parse_git_branch)\\[\\033[00m\\] $ \" [[ -r \"/usr/local/etc/profile.d/bash_completion.sh\" ]] && . \"/usr/local/etc/profile.d/bash_completion.sh\" source ~/.git-completion.bash source /Users/lian/python3.11-venv/bin/activate # Added by Toolbox App export PATH=\"$PATH:/usr/local/bin\" eval \"$(/usr/local/bin/brew shellenv)\" # Set PATH, MANPATH, etc., for Homebrew. export HOMEBREW_BREW_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git\" export HOMEBREW_CORE_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git\" # export http_proxy=\"socks5://127.0.0.1:1080\" # export https_proxy=\"socks5://127.0.0.1:1080\"","title":"Bash profile"},{"location":"macos/vimrc/","text":"vi ~/.vimrc set nocompatible \" be iMproved, required filetype off \" required \" set the runtime path to include Vundle and initialize set rtp+=~/.vim/bundle/Vundle.vim call vundle#begin() \" alternatively, pass a path where Vundle should install plugins \"call vundle#begin('~/some/path/here') \" let Vundle manage Vundle, required Plugin 'VundleVim/Vundle.vim' Plugin 'ycm-core/YouCompleteMe' Plugin 'yegappan/mru' nnoremap <silent> <F7> :MRU<CR> Plugin 'ntpeters/vim-better-whitespace' nnoremap <silent> <F8> :StripWhitespace<CR> Plugin 'Exafunction/codeium.vim' imap <script><silent><nowait><expr> <C-h> codeium#Accept() Plugin 'yegappan/grep' nnoremap <silent> <F12> :Rgrep<CR> let Grep_Default_Filelist = '*.py *.html *.js' Plugin 'vim-syntastic/syntastic' \" pip3 install flake8 set statusline+=%#warningmsg# set statusline+=%{SyntasticStatuslineFlag()} set statusline+=%* let g:syntastic_always_populate_loc_list = 1 let g:syntastic_auto_loc_list = 1 let g:syntastic_check_on_open = 0 let g:syntastic_check_on_wq = 0 let g:syntastic_python_checkers = ['flake8'] let g:syntastic_python_flake8_args=\"--max-line-length=120\" \" All of your Plugins must be added before the following line call vundle#end() \" required filetype plugin indent on \" required \" To ignore plugin indent changes, instead use: \" filetype plugin on \" \" Brief help \" :PluginList - lists configured plugins \" :PluginInstall - installs plugins; append `!` to update or just :PluginUpdate \" :PluginSearch foo - searches for foo; append `!` to refresh local cache \" :PluginClean - confirms removal of unused plugins; append `!` to auto-approve removal \" \" see :h vundle for more details or wiki for FAQ \" Put your non-Plugin stuff after this line map <F5> :call PRUN()<CR> func! PRUN() exec \"w\" if &filetype == 'python' exec \"!python %\" endif endfunc \" Syntax highlighting syntax on set number set textwidth=79 \" highlight :set listchars=tab:>-,trail:- \" Auto indent set autoindent \" Smart indent set smartindent \" Ignore case when searching set ignorecase \" Remember info about open buffers on close set viminfo^=% \" Set 7 lines to the cursor - when moving vertically using j/k set scrolloff=7 \" Always show current position set ruler \" When searching try to be smart about cases set smartcase \" Highlight search results set hlsearch :nnoremap <silent> <Space> :nohlsearch<Bar>:echo<CR> \" Return to last edit position when opening files (You want this!) autocmd BufReadPost * \\ if line(\"'\\\"\") > 0 && line(\"'\\\"\") <= line(\"$\") | \\ exe \"normal! g`\\\"\" | \\ endif set backspace=2 set encoding=utf-8 set clipboard=unnamed \" ********************************************* \" \u5206\u5272\u5e03\u5c40\u76f8\u5173 \" ********************************************* set splitbelow set splitright \"\u5feb\u6377\u952e\uff0cctrl+l\u5207\u6362\u5230\u5de6\u8fb9\u5e03\u5c40\uff0cctrl+h\u5207\u6362\u5230\u53f3\u8fb9\u5e03\u5c40 \"ctrl+k\u5207\u6362\u5230\u4e0a\u9762\u5e03\u5c40\uff0cctrl+j\u5207\u6362\u5230\u4e0b\u9762\u5e03\u5c40 nnoremap <C-J> <C-W><C-J> nnoremap <C-K> <C-W><C-K> nnoremap <C-L> <C-W><C-L> nnoremap <C-H> <C-W><C-H> set statusline+=%F","title":"Vimrc"},{"location":"mysql/mysql/","text":"MySql \u5927\u5c0f\u654f\u611f \u9700\u8981\u8bbe\u7f6ecollate\uff08\u6821\u5bf9\uff09 \u3002 collate\u89c4\u5219\uff1a *_bin : \u8868\u793a\u7684\u662fbinary case sensitive collation\uff0c\u4e5f\u5c31\u662f\u8bf4\u662f\u533a\u5206\u5927\u5c0f\u5199\u7684 *_cs : case sensitive collation\uff0c\u533a\u5206\u5927\u5c0f\u5199 *_ci : case insensitive collation\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199 \u56fe\u89e3SQL\u7684Join install mariadb sudo apt-get update sudo apt-get install mariadb-server mariadb-client sudo mysql_secure_installation sudo mysql -uroot sudo apt install software-properties-common sudo apt-key adv --recv-keys --keyserver hkp://keyserver.ubuntu.com:80 0xF1656F24C74CD1D8 sudo add-apt-repository \"deb [arch=amd64,arm64,ppc64el] http://mariadb.mirror.liquidtelecom.com/repo/10.4/ubuntu $(lsb_release -cs) main\" sudo apt update sudo apt -y install mariadb-server mariadb-client config mariadb vi /etc/mysql/mariadb.conf.d/50-server.cnf [mysqld] lower_case_table_names=1 service mysql restart commands login mysql mysql -u root -p list databases/tables show databases; show tables; create database CREATE DATABASE liantest CHARACTER SET utf8; switch database use mysql; delete database mysqladmin -u root -p drop mytestdb; drop database mytestdb; export database mysqldump -u user -p password -d seahub > seahub.sql export data in all tables mysqldump -u user -p password seahub > seahub.sql export data in two tables mysqldump -u user -p password seahub profile_profile api2_token > table.sql show table schema show create table table_name or describe dbname.table_name create user CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password'; GRANT ALL PRIVILEGES ON *.* TO 'newuser'@'localhost'; FLUSH PRIVILEGES; change a user's password use mysql; update user set password=PASSWORD('password') where User='user'; flush privileges; quit delete user drop user 'root'@'114.249.235.35'; allow remote connect GRANT ALL ON *.* TO root@'192.168.255.221' IDENTIFIED BY 'root'; or GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'password' WITH GRANT OPTION; then FLUSH PRIVILEGES; sort table by size select TABLE_NAME, concat(truncate(data_length/1024/1024,2), ' MB') as data_size, concat(truncate(index_length/1024/1024,2), ' MB') as index_size from information_schema.tables where TABLE_SCHEMA = 'seahub-demo' group by TABLE_NAME order by data_length desc; select select count(distinct username) from UserActivityStat where timestamp>='2022-01-01 00:00:00' and timestamp<=\"2022-12-31 23:59:59\"; select count(distinct user) from api2_token where created>='2022-01-01 00:00:00' and created<=\"2022-12-31 23:59:59\"; select count(distinct user) from api2_tokenv2 where created_at>='2022-01-01 00:00:00' and created_at<=\"2022-12-31 23:59:59\"; select count(distinct username) from base_userlastlogin where last_login>='2022-01-01 00:00:00' and last_login<=\"2022-12-31 23:59:59\"; select count(distinct op_user) from Activity where timestamp>='2022-01-01 00:00:00' and timestamp<=\"2022-12-31 23:59:59\";","title":"MySql"},{"location":"mysql/mysql/#mysql","text":"","title":"MySql"},{"location":"mysql/mysql/#_1","text":"\u9700\u8981\u8bbe\u7f6ecollate\uff08\u6821\u5bf9\uff09 \u3002 collate\u89c4\u5219\uff1a *_bin : \u8868\u793a\u7684\u662fbinary case sensitive collation\uff0c\u4e5f\u5c31\u662f\u8bf4\u662f\u533a\u5206\u5927\u5c0f\u5199\u7684 *_cs : case sensitive collation\uff0c\u533a\u5206\u5927\u5c0f\u5199 *_ci : case insensitive collation\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199 \u56fe\u89e3SQL\u7684Join","title":"\u5927\u5c0f\u654f\u611f"},{"location":"mysql/mysql/#install-mariadb","text":"sudo apt-get update sudo apt-get install mariadb-server mariadb-client sudo mysql_secure_installation sudo mysql -uroot sudo apt install software-properties-common sudo apt-key adv --recv-keys --keyserver hkp://keyserver.ubuntu.com:80 0xF1656F24C74CD1D8 sudo add-apt-repository \"deb [arch=amd64,arm64,ppc64el] http://mariadb.mirror.liquidtelecom.com/repo/10.4/ubuntu $(lsb_release -cs) main\" sudo apt update sudo apt -y install mariadb-server mariadb-client","title":"install mariadb"},{"location":"mysql/mysql/#config-mariadb","text":"vi /etc/mysql/mariadb.conf.d/50-server.cnf [mysqld] lower_case_table_names=1 service mysql restart","title":"config mariadb"},{"location":"mysql/mysql/#commands","text":"","title":"commands"},{"location":"mysql/mysql/#login-mysql","text":"mysql -u root -p","title":"login mysql"},{"location":"mysql/mysql/#list-databasestables","text":"show databases; show tables;","title":"list databases/tables"},{"location":"mysql/mysql/#create-database","text":"CREATE DATABASE liantest CHARACTER SET utf8;","title":"create database"},{"location":"mysql/mysql/#switch-database","text":"use mysql;","title":"switch database"},{"location":"mysql/mysql/#delete-database","text":"mysqladmin -u root -p drop mytestdb; drop database mytestdb;","title":"delete database"},{"location":"mysql/mysql/#export-database","text":"mysqldump -u user -p password -d seahub > seahub.sql","title":"export database"},{"location":"mysql/mysql/#export-data-in-all-tables","text":"mysqldump -u user -p password seahub > seahub.sql","title":"export data in all tables"},{"location":"mysql/mysql/#export-data-in-two-tables","text":"mysqldump -u user -p password seahub profile_profile api2_token > table.sql","title":"export data in two tables"},{"location":"mysql/mysql/#show-table-schema","text":"show create table table_name or describe dbname.table_name","title":"show table schema"},{"location":"mysql/mysql/#create-user","text":"CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password'; GRANT ALL PRIVILEGES ON *.* TO 'newuser'@'localhost'; FLUSH PRIVILEGES;","title":"create user"},{"location":"mysql/mysql/#change-a-users-password","text":"use mysql; update user set password=PASSWORD('password') where User='user'; flush privileges; quit","title":"change a user's password"},{"location":"mysql/mysql/#delete-user","text":"drop user 'root'@'114.249.235.35';","title":"delete user"},{"location":"mysql/mysql/#allow-remote-connect","text":"GRANT ALL ON *.* TO root@'192.168.255.221' IDENTIFIED BY 'root'; or GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'password' WITH GRANT OPTION; then FLUSH PRIVILEGES;","title":"allow remote connect"},{"location":"mysql/mysql/#sort-table-by-size","text":"select TABLE_NAME, concat(truncate(data_length/1024/1024,2), ' MB') as data_size, concat(truncate(index_length/1024/1024,2), ' MB') as index_size from information_schema.tables where TABLE_SCHEMA = 'seahub-demo' group by TABLE_NAME order by data_length desc;","title":"sort table by size"},{"location":"mysql/mysql/#select","text":"select count(distinct username) from UserActivityStat where timestamp>='2022-01-01 00:00:00' and timestamp<=\"2022-12-31 23:59:59\"; select count(distinct user) from api2_token where created>='2022-01-01 00:00:00' and created<=\"2022-12-31 23:59:59\"; select count(distinct user) from api2_tokenv2 where created_at>='2022-01-01 00:00:00' and created_at<=\"2022-12-31 23:59:59\"; select count(distinct username) from base_userlastlogin where last_login>='2022-01-01 00:00:00' and last_login<=\"2022-12-31 23:59:59\"; select count(distinct op_user) from Activity where timestamp>='2022-01-01 00:00:00' and timestamp<=\"2022-12-31 23:59:59\";","title":"select"},{"location":"mysql/troubleshoot/","text":"MySql Troubleshoot ERROR 2002 (HY000) Can't connect to MySQL server on '172.17.30.163' (115) cd /etc/mysql/mariadb.conf.d/50-server.cnf vi mariadb.conf.d/50-server.cnf bind-address = 0.0.0.0 sudo systemctl restart mysql ERROR 1130 (HY000) Host 'iZ2ze77tnovxl4jeegy0i4Z' is not allowed to connect to this MariaDB server mysql MariaDB [(none)]> use mysql Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed MariaDB [mysql]> select Host, User,Password from user; +-----------+------+-------------------------------------------+ | Host | User | Password | +-----------+------+-------------------------------------------+ | localhost | root | *B207A659E3668E1E01AAFEB3E47E073B98EAD62B | +-----------+------+-------------------------------------------+ 1 row in set (0.000 sec) MariaDB [mysql]> update user set Host='%' where User='root'; Query OK, 1 row affected (0.000 sec) Rows matched: 1 Changed: 1 Warnings: 0 MariaDB [mysql]> flush privileges; Query OK, 0 rows affected (0.000 sec) MariaDB [mysql]> exit Bye ERROR 1698 (28000) Access denied for user 'root'@'localhost' https://stackoverflow.com/questions/39281594/error-1698-28000-access-denied-for-user-rootlocalhost Some systems like Ubuntu, mysql is using by default the UNIX auth_socket plugin. Basically means that: db_users using it, will be \"auth\" by the system user credentias. You can see if your root user is set up like this by doing the following: $ sudo mysql -u root # I had to use \"sudo\" since is new installation mysql> USE mysql; mysql> SELECT User, Host, plugin FROM mysql.user; +------------------+-----------------------+ | User | plugin | +------------------+-----------------------+ | root | auth_socket | | mysql.sys | mysql_native_password | | debian-sys-maint | mysql_native_password | +------------------+-----------------------+ As you can see in the query, the root user is using the auth_socket plugin There are 2 ways to solve this: You can set the root user to use the mysql_native_password plugin You can create a new db_user with you system_user (recommended) Option 1: $ sudo mysql -u root # I had to use \"sudo\" since is new installation mysql> USE mysql; mysql> UPDATE user SET plugin='mysql_native_password' WHERE User='root'; mysql> FLUSH PRIVILEGES; mysql> exit; $ sudo service mysql restart Option 2: (replace YOUR_SYSTEM_USER with the username you have) $ sudo mysql -u root # I had to use \"sudo\" since is new installation mysql> USE mysql; mysql> CREATE USER 'YOUR_SYSTEM_USER'@'localhost' IDENTIFIED BY 'YOUR_PASSWD'; mysql> GRANT ALL PRIVILEGES ON *.* TO 'YOUR_SYSTEM_USER'@'localhost'; mysql> UPDATE user SET plugin='auth_socket' WHERE User='YOUR_SYSTEM_USER'; mysql> FLUSH PRIVILEGES; mysql> exit; $ sudo service mysql restart Remember that if you use option #2 you'll have to connect to mysql as your system username (mysql -u YOUR_SYSTEM_USER) Note: On some systems (e.g., Debian stretch) 'auth_socket' plugin is called 'unix_socket', so the corresponding SQL command should be: UPDATE user SET plugin='unix_socket' WHERE User='YOUR_SYSTEM_USER'; Update: from @andy's comment seems that mysql 8.x.x updated/replaced the auth_socket for caching_sha2_password I don't have a system setup with mysql 8.x.x to test this, however the steps above should help you to understand the issue. Here's the reply: One change as of MySQL 8.0.4 is that the new default authentication plugin is 'caching_sha2_password'. The new 'YOUR_SYSTEM_USER' will have this auth plugin and you can login from the bash shell now with \"mysql -u YOUR_SYSTEM_USER -p\" and provide the password for this user on the prompt. No need for the \"UPDATE user SET plugin\" step. For the 8.0.4 default auth plugin update see, https://mysqlserverteam.com/mysql-8-0-4-new-default-authentication-plugin-caching_sha2_password/ mysql MariaDB [(none)]> use mysql Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed MariaDB [mysql]> UPDATE user SET plugin='mysql_native_password' WHERE User='root'; Query OK, 1 row affected (0.000 sec) Rows matched: 1 Changed: 1 Warnings: 0 MariaDB [mysql]> FLUSH PRIVILEGES; Query OK, 0 rows affected (0.000 sec) MariaDB [mysql]> exit Bye ERROR 1071 (42000) Specified key was too long; max key length is 767 bytes case 1 \u6267\u884c\u8bed\u53e5\u62a5\u9519 MySQL [ccnet_db]> CREATE TABLE IF NOT EXISTS lian3EmailUser (id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, email VARCHAR(255), passwd VARCHAR(256), is_staff BOOL NOT NULL, is_active BOOL NOT NULL, ctime BIGINT, reference_id VARCHAR(255),UNIQUE INDEX (email), UNIQUE INDEX (reference_id))ENGINE=INNODB; ERROR 1071 (42000): Specified key was too long; max key length is 767 bytes \u4f46\u662f\u540c\u6837\u8bed\u53e5\uff0c\u540e\u9762\u52a0\u4e86 CHARSET=utf8 \u5373\u53ef\u6267\u884c\u6210\u529f MySQL [ccnet_db]> CREATE TABLE IF NOT EXISTS lian3EmailUser (id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, email VARCHAR(255), passwd VARCHAR(256), is_staff BOOL NOT NULL, is_active BOOL NOT NULL, ctime BIGINT, reference_id VARCHAR(255),UNIQUE INDEX (email), UNIQUE INDEX (reference_id))ENGINE=INNODB CHARSET=utf8; Query OK, 0 rows affected (0.00 sec) \u68c0\u67e5\u53d1\u73b0\uff0c\u6570\u636e\u5e93\u5b57\u7b26\u96c6\u7528\u7684\u662f utf8mb4 MySQL [(none)]> show create database ccnet_db; +----------+----------------------------------------------------------------------+ | Database | Create Database | +----------+----------------------------------------------------------------------+ | ccnet_db | CREATE DATABASE `ccnet_db` /*!40100 DEFAULT CHARACTER SET utf8mb4 */ | +----------+----------------------------------------------------------------------+ 1 row in set (0.00 sec) \u6539\u4e3a utf8 \u540e\u5373\u53ef ALTER DATABASE ccnet_db DEFAULT CHARACTER SET utf8; case 2 \u7cfb\u7edf\u53d8\u91cf innodb_large_prefix \u5f00\u542f\u4e86\uff0c\u5219\u5bf9\u4e8e\u4f7f\u7528 DYNAMIC \u6216 COMPRESSED \u884c\u683c\u5f0f\u7684 InnoDB \u8868\uff0c\u7d22\u5f15\u952e\u524d\u7f00\u9650\u5236\u4e3a3072\u5b57\u8282\u3002\u5982\u679c\u7981\u7528 innodb_large_prefix \uff0c\u4e0d\u7ba1\u662f\u4ec0\u4e48\u8868\uff0c\u7d22\u5f15\u952e\u524d\u7f00\u9650\u5236\u4e3a767\u5b57\u8282\u3002 \u4e0a\u8ff0\u7684bug\u5f88\u660e\u663e\u662f\u7d22\u5f15\u8d85\u51fa\u4e86\u9650\u5236\u7684\u957f\u5ea6767\uff08\u6211\u53f8\u751f\u4ea7\u4e0a innodb_large_prefix \u7981\u7528\u4e86\uff09\uff1a \u6211\u53d1\u73b0\u62a5\u9519\u7684\u90a3\u5f20\u8868\u5efa\u7acb\u4e86\u4e00\u4e2a varchar \u7c7b\u578b\u7684\u7d22\u5f15\uff0c varchar(255) \uff0c\u89c9\u5f97\u6ca1\u4ec0\u4e48\u95ee\u9898\uff0c\u5176\u5b9e\u4e0d\u7136\uff0c\u4e0a\u8ff0\u7684767\u662f\u5b57\u8282\uff0c\u800c varchar \u7c7b\u578b\u662f\u5b57\u7b26\uff0c\u540c\u65f6\u6211\u53d1\u73b0\u6211\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\u4e3a\uff08 utf8mb4 \uff09\uff0c\u8fd9\u4e2a\u6307\u6bcf\u4e2a\u5b57\u7b26\u6700\u5927\u7684\u5b57\u8282\u6570\u4e3a4\uff0c\u6240\u4ee5\u5f88\u660e\u663e 4*255 > 767 \u3002 \u6240\u4ee5\u5c31\u62a5\u4e0a\u8ff0\u9519\u4e86 \uff08Specified key was too long; max key length is 767 bytes\uff09 \u3002 \u89e3\u51b3\u65b9\u6cd5\uff1a \u6539\u53d8 varchar \u7684\u5b57\u7b26\u6570\uff0c\u6211\u6539\u6210\u4e8664\u5c31\u53ef\u4ee5\u4e86\u3002 varchar(64) \u6216\u8005\u542f\u7528 innodb_large_prefix \uff0c\u90a3\u4e48\u9650\u5236\u503c\u4f1a\u589e\u52a0\u52303072 ERROR 1044 (42000) Access denied for user 'seafile'@'localhost' to database 'ifile' mysql -u root -p grant all privileges on *.* to 'seafile'@'localhost' identified by 'IeKi8aht'; flush privileges; ERROR 1170 (42000) BLOB/TEXT Column Used in Key Specification Without a Key Length http://stackoverflow.com/questions/1827063/mysql-error-key-specification-without-a-key-length [Err] 1005 Can't create table (errno: 150 \"Foreign key constraint is incorrectly formed\") \u5efa\u7acb\u5916\u952e\u7684\u5b57\u6bb5\u5fc5\u987b\u548c\u5f15\u7528\u8868\u7684\u5b57\u6bb5\u4e00\u6a21\u4e00\u6837\u7684\u7c7b\u578b\u3002 https://upliu.net/foreign-key-constraint-is-incorrectly-formed.html case 1\uff0c\u963f\u91cc\u5df4\u5df4\u6570\u636e\u5e93\u5916\u952e\u95ee\u9898 \u963f\u91cc\u5df4\u5df4\u5b9a\u5236\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u521b\u5efa\u8868\u9700\u8981\u4f7f\u7528\u5b57\u7b26\u96c6 CHARSET=utf8mb4 \u3002 CREATE TABLE `tags_fileuuidmap` ( ... `uuid` char(32) NOT NULL COMMENT 'uuid', ... ) ENGINE=InnoDB AUTO_INCREMENT=396 DEFAULT CHARSET=utf8mb4 COMMENT='tags_fileuuidmap' ; Seahub \u7684\u6570\u636e\u5e93\u4e2d\uff0c\u521b\u5efa\u8868\u65f6\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\u4e3a CHARSET=utf8 \u3002 CREATE TABLE `related_files_relatedfiles` ( `id` int(11) NOT NULL AUTO_INCREMENT, `o_uuid_id` char(32) NOT NULL, `r_uuid_id` char(32) NOT NULL, PRIMARY KEY (`id`), KEY `related_files_relate_o_uuid_id_aaa8e613_fk_tags_file` (`o_uuid_id`), KEY `related_files_relate_r_uuid_id_031751df_fk_tags_file` (`r_uuid_id`), CONSTRAINT `related_files_relate_o_uuid_id_aaa8e613_fk_tags_file` FOREIGN KEY (`o_uuid_id`) REFERENCES `tags_fileuuidmap` (`uuid`), CONSTRAINT `related_files_relate_r_uuid_id_031751df_fk_tags_file` FOREIGN KEY (`r_uuid_id`) REFERENCES `tags_fileuuidmap` (`uuid`) ) ENGINE=InnoDB AUTO_INCREMENT=49 DEFAULT CHARSET=utf8 \u6240\u4ee5\u76f4\u63a5\u4f7f\u7528 Seahub \u7684\u521b\u5efa\u8bed\u53e5\uff0c\u7ed9\u963f\u91cc\u5df4\u5df4\u521b\u5efa\u65b0\u8868\u65f6\uff0c\u4f1a\u62a5\u9519\uff1a ERROR 1005 (HY000): Can't create table `ali_seahub`.`related_files_relatedfiles` (errno: 150 \"Foreign key constraint is incorrectly formed\") \u89e3\u51b3\u65b9\u6cd5 \u6839\u636e MySQL \u7684 \u5916\u952e\u6587\u6863 Corresponding columns in the foreign key and the referenced key must have similar data types. The size and sign of integer types must be the same. The length of string types need not be the same. For nonbinary (character) string columns, the character set and collation must be the same. \u5c06 Seahub \u5efa\u8868\u8bed\u53e5\u4e2d\u7684 CHARSET \u6539\u4e3a utf8mb4\uff0c\u7ecf\u6d4b\u8bd5\u53ef\u521b\u5efa\u65b0\u8868\u6210\u529f\u3002 case 2 \u8be5\u9519\u8bef\u4e00\u822c\u51fa\u73b0\u539f\u56e0\u5982\u4e0b\uff1a 1\u3001\u5916\u952e\u7684\u5f15\u7528\u7c7b\u578b\u4e0d\u4e00\u6837\uff0c\u5982\u4e3b\u952e\u662fint\u5916\u952e\u662fchar 2\u3001\u627e\u4e0d\u5230\u4e3b\u8868\u4e2d\u5f15\u7528\u7684\u5217 3\u3001\u4e3b\u952e\u548c\u5916\u952e\u7684\u5b57\u7b26\u7f16\u7801\u4e0d\u4e00\u81f4\uff0c\u4e5f\u53ef\u80fd\u5b58\u50a8\u5f15\u64ce\u4e0d\u4e00\u6837 CREATE TABLE t_employee( emp_id INT(3) PRIMARY KEY, emp_no INT(3) UNIQUE NOT NULL, emp_name VARCHAR(10) NOT NULL, emp_age tinyint(4) NOT NULL DEFAULT 25 CHECK (emp_age BETWEEN 20 AND 60), sex VARCHAR(1) CHECK (sex in ('\u7537','\u5973')), job VARCHAR(20), sal INT(10), -- inline\u5199\u6cd5 -- REFERENCES \u4e3b\u8868\uff08\u4e3b\u8868\u5b57\u6bb5\uff09 -- dept_no int REFERENCES t_dept(dept_no) -- outline\u5199\u6cd5 dept_no int NOT NULL , FOREIGN KEY(dept_no) REFERENCES t_dept(dept_no) ON DELETE SET NULL ); \u683c\u5f0f\u4e3a dept_no int NOT NULL , \u4f46\u662f\u5916\u952e\u5374\u4e3a FOREIGN KEY(dept_no) REFERENCES t_dept(dept_no) ON DELETE SET NULL \uff0c\u5220\u9664\u683c\u5f0f\u7684 NOT NULL \u5373\u53ef Duplicate entry '2147483647' for key 'PRIMARY' \u7c7b\u578b \u5b57\u8282 \u6700\u5c0f\u503c~\u6700\u5927\u503c(\u5e26\u7b26\u53f7\u7684/\u65e0\u7b26\u53f7\u7684) TINYINT 1 -128~127 / 0~255 SMALLINT 2 -32768~32767 / 0~65535 MEDIUMINT 3 -8388608~8388607 / 0~16777215 INT 4 -2147483648~2147483647 / 0~4294967295 BIGINT 8 -9223372036854775808~9223372036854775807 / 0~18446744073709551615 INT \u7c7b\u578b\uff0c\u5360\u7528 4 \u4e2a\u5b57\u8282\uff0c\u6bcf\u5b57\u8282 8 \u4e2a\u6bd4\u7279\uff0c\u5373\u603b\u5171\u5360\u7528 32 \u4e2a\u6bd4\u7279\uff0c\u6240\u4ee5\uff1a \u65e0\u7b26\u53f7\u578b\uff0c\u6700\u5927\u503c\u4e3a 4294967295\uff08\u53734byte=32bit\uff0c\u6700\u5927\u503c\u5373\u662f32\u4e2a1\u7ec4\u6210\uff09 \u6709\u7b26\u53f7\u578b\uff0c\u6700\u5927\u503c\u4e3a 2147483647\u3002 \u6240\u4ee5\u8fbe\u5230\u6700\u5927\u503c\u540e\uff0cINSERT \u8bed\u53e5\u8fd8\u4f1a\u4f7f\u7528 2147483647\uff0c\u5bfc\u81f4\u62a5\u9519\u3002 \u5efa\u8868\u8bed\u53e5 id int(11) unsigned NOT NULL AUTO_INCREMENT, \u4e2d\u7684 11 \uff0c\u53ea\u8868\u793a\u53ef\u663e\u793a\u7684\u4f4d\u6570\uff0c\u4e0e\u5b9e\u9645\u5b58\u50a8\u957f\u5ea6\u65e0\u5173\u3002 \u4e2d\u6587\u663e\u793a\u4e3a \uff1f\uff1f\uff1f\uff1f\uff1f show variables like 'character%'; set names utf8mb4;","title":"MySql Troubleshoot"},{"location":"mysql/troubleshoot/#mysql-troubleshoot","text":"","title":"MySql Troubleshoot"},{"location":"mysql/troubleshoot/#error-2002-hy000","text":"Can't connect to MySQL server on '172.17.30.163' (115) cd /etc/mysql/mariadb.conf.d/50-server.cnf vi mariadb.conf.d/50-server.cnf bind-address = 0.0.0.0 sudo systemctl restart mysql","title":"ERROR 2002 (HY000)"},{"location":"mysql/troubleshoot/#error-1130-hy000","text":"Host 'iZ2ze77tnovxl4jeegy0i4Z' is not allowed to connect to this MariaDB server mysql MariaDB [(none)]> use mysql Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed MariaDB [mysql]> select Host, User,Password from user; +-----------+------+-------------------------------------------+ | Host | User | Password | +-----------+------+-------------------------------------------+ | localhost | root | *B207A659E3668E1E01AAFEB3E47E073B98EAD62B | +-----------+------+-------------------------------------------+ 1 row in set (0.000 sec) MariaDB [mysql]> update user set Host='%' where User='root'; Query OK, 1 row affected (0.000 sec) Rows matched: 1 Changed: 1 Warnings: 0 MariaDB [mysql]> flush privileges; Query OK, 0 rows affected (0.000 sec) MariaDB [mysql]> exit Bye","title":"ERROR 1130 (HY000)"},{"location":"mysql/troubleshoot/#error-1698-28000","text":"Access denied for user 'root'@'localhost' https://stackoverflow.com/questions/39281594/error-1698-28000-access-denied-for-user-rootlocalhost Some systems like Ubuntu, mysql is using by default the UNIX auth_socket plugin. Basically means that: db_users using it, will be \"auth\" by the system user credentias. You can see if your root user is set up like this by doing the following: $ sudo mysql -u root # I had to use \"sudo\" since is new installation mysql> USE mysql; mysql> SELECT User, Host, plugin FROM mysql.user; +------------------+-----------------------+ | User | plugin | +------------------+-----------------------+ | root | auth_socket | | mysql.sys | mysql_native_password | | debian-sys-maint | mysql_native_password | +------------------+-----------------------+ As you can see in the query, the root user is using the auth_socket plugin There are 2 ways to solve this: You can set the root user to use the mysql_native_password plugin You can create a new db_user with you system_user (recommended) Option 1: $ sudo mysql -u root # I had to use \"sudo\" since is new installation mysql> USE mysql; mysql> UPDATE user SET plugin='mysql_native_password' WHERE User='root'; mysql> FLUSH PRIVILEGES; mysql> exit; $ sudo service mysql restart Option 2: (replace YOUR_SYSTEM_USER with the username you have) $ sudo mysql -u root # I had to use \"sudo\" since is new installation mysql> USE mysql; mysql> CREATE USER 'YOUR_SYSTEM_USER'@'localhost' IDENTIFIED BY 'YOUR_PASSWD'; mysql> GRANT ALL PRIVILEGES ON *.* TO 'YOUR_SYSTEM_USER'@'localhost'; mysql> UPDATE user SET plugin='auth_socket' WHERE User='YOUR_SYSTEM_USER'; mysql> FLUSH PRIVILEGES; mysql> exit; $ sudo service mysql restart Remember that if you use option #2 you'll have to connect to mysql as your system username (mysql -u YOUR_SYSTEM_USER) Note: On some systems (e.g., Debian stretch) 'auth_socket' plugin is called 'unix_socket', so the corresponding SQL command should be: UPDATE user SET plugin='unix_socket' WHERE User='YOUR_SYSTEM_USER'; Update: from @andy's comment seems that mysql 8.x.x updated/replaced the auth_socket for caching_sha2_password I don't have a system setup with mysql 8.x.x to test this, however the steps above should help you to understand the issue. Here's the reply: One change as of MySQL 8.0.4 is that the new default authentication plugin is 'caching_sha2_password'. The new 'YOUR_SYSTEM_USER' will have this auth plugin and you can login from the bash shell now with \"mysql -u YOUR_SYSTEM_USER -p\" and provide the password for this user on the prompt. No need for the \"UPDATE user SET plugin\" step. For the 8.0.4 default auth plugin update see, https://mysqlserverteam.com/mysql-8-0-4-new-default-authentication-plugin-caching_sha2_password/ mysql MariaDB [(none)]> use mysql Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed MariaDB [mysql]> UPDATE user SET plugin='mysql_native_password' WHERE User='root'; Query OK, 1 row affected (0.000 sec) Rows matched: 1 Changed: 1 Warnings: 0 MariaDB [mysql]> FLUSH PRIVILEGES; Query OK, 0 rows affected (0.000 sec) MariaDB [mysql]> exit Bye","title":"ERROR 1698 (28000)"},{"location":"mysql/troubleshoot/#error-1071-42000","text":"Specified key was too long; max key length is 767 bytes","title":"ERROR 1071 (42000)"},{"location":"mysql/troubleshoot/#case-1","text":"\u6267\u884c\u8bed\u53e5\u62a5\u9519 MySQL [ccnet_db]> CREATE TABLE IF NOT EXISTS lian3EmailUser (id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, email VARCHAR(255), passwd VARCHAR(256), is_staff BOOL NOT NULL, is_active BOOL NOT NULL, ctime BIGINT, reference_id VARCHAR(255),UNIQUE INDEX (email), UNIQUE INDEX (reference_id))ENGINE=INNODB; ERROR 1071 (42000): Specified key was too long; max key length is 767 bytes \u4f46\u662f\u540c\u6837\u8bed\u53e5\uff0c\u540e\u9762\u52a0\u4e86 CHARSET=utf8 \u5373\u53ef\u6267\u884c\u6210\u529f MySQL [ccnet_db]> CREATE TABLE IF NOT EXISTS lian3EmailUser (id BIGINT NOT NULL PRIMARY KEY AUTO_INCREMENT, email VARCHAR(255), passwd VARCHAR(256), is_staff BOOL NOT NULL, is_active BOOL NOT NULL, ctime BIGINT, reference_id VARCHAR(255),UNIQUE INDEX (email), UNIQUE INDEX (reference_id))ENGINE=INNODB CHARSET=utf8; Query OK, 0 rows affected (0.00 sec) \u68c0\u67e5\u53d1\u73b0\uff0c\u6570\u636e\u5e93\u5b57\u7b26\u96c6\u7528\u7684\u662f utf8mb4 MySQL [(none)]> show create database ccnet_db; +----------+----------------------------------------------------------------------+ | Database | Create Database | +----------+----------------------------------------------------------------------+ | ccnet_db | CREATE DATABASE `ccnet_db` /*!40100 DEFAULT CHARACTER SET utf8mb4 */ | +----------+----------------------------------------------------------------------+ 1 row in set (0.00 sec) \u6539\u4e3a utf8 \u540e\u5373\u53ef ALTER DATABASE ccnet_db DEFAULT CHARACTER SET utf8;","title":"case 1"},{"location":"mysql/troubleshoot/#case-2","text":"\u7cfb\u7edf\u53d8\u91cf innodb_large_prefix \u5f00\u542f\u4e86\uff0c\u5219\u5bf9\u4e8e\u4f7f\u7528 DYNAMIC \u6216 COMPRESSED \u884c\u683c\u5f0f\u7684 InnoDB \u8868\uff0c\u7d22\u5f15\u952e\u524d\u7f00\u9650\u5236\u4e3a3072\u5b57\u8282\u3002\u5982\u679c\u7981\u7528 innodb_large_prefix \uff0c\u4e0d\u7ba1\u662f\u4ec0\u4e48\u8868\uff0c\u7d22\u5f15\u952e\u524d\u7f00\u9650\u5236\u4e3a767\u5b57\u8282\u3002 \u4e0a\u8ff0\u7684bug\u5f88\u660e\u663e\u662f\u7d22\u5f15\u8d85\u51fa\u4e86\u9650\u5236\u7684\u957f\u5ea6767\uff08\u6211\u53f8\u751f\u4ea7\u4e0a innodb_large_prefix \u7981\u7528\u4e86\uff09\uff1a \u6211\u53d1\u73b0\u62a5\u9519\u7684\u90a3\u5f20\u8868\u5efa\u7acb\u4e86\u4e00\u4e2a varchar \u7c7b\u578b\u7684\u7d22\u5f15\uff0c varchar(255) \uff0c\u89c9\u5f97\u6ca1\u4ec0\u4e48\u95ee\u9898\uff0c\u5176\u5b9e\u4e0d\u7136\uff0c\u4e0a\u8ff0\u7684767\u662f\u5b57\u8282\uff0c\u800c varchar \u7c7b\u578b\u662f\u5b57\u7b26\uff0c\u540c\u65f6\u6211\u53d1\u73b0\u6211\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\u4e3a\uff08 utf8mb4 \uff09\uff0c\u8fd9\u4e2a\u6307\u6bcf\u4e2a\u5b57\u7b26\u6700\u5927\u7684\u5b57\u8282\u6570\u4e3a4\uff0c\u6240\u4ee5\u5f88\u660e\u663e 4*255 > 767 \u3002 \u6240\u4ee5\u5c31\u62a5\u4e0a\u8ff0\u9519\u4e86 \uff08Specified key was too long; max key length is 767 bytes\uff09 \u3002 \u89e3\u51b3\u65b9\u6cd5\uff1a \u6539\u53d8 varchar \u7684\u5b57\u7b26\u6570\uff0c\u6211\u6539\u6210\u4e8664\u5c31\u53ef\u4ee5\u4e86\u3002 varchar(64) \u6216\u8005\u542f\u7528 innodb_large_prefix \uff0c\u90a3\u4e48\u9650\u5236\u503c\u4f1a\u589e\u52a0\u52303072","title":"case 2"},{"location":"mysql/troubleshoot/#error-1044-42000","text":"Access denied for user 'seafile'@'localhost' to database 'ifile' mysql -u root -p grant all privileges on *.* to 'seafile'@'localhost' identified by 'IeKi8aht'; flush privileges;","title":"ERROR 1044 (42000)"},{"location":"mysql/troubleshoot/#error-1170-42000","text":"BLOB/TEXT Column Used in Key Specification Without a Key Length http://stackoverflow.com/questions/1827063/mysql-error-key-specification-without-a-key-length","title":"ERROR 1170 (42000)"},{"location":"mysql/troubleshoot/#err-1005","text":"Can't create table (errno: 150 \"Foreign key constraint is incorrectly formed\") \u5efa\u7acb\u5916\u952e\u7684\u5b57\u6bb5\u5fc5\u987b\u548c\u5f15\u7528\u8868\u7684\u5b57\u6bb5\u4e00\u6a21\u4e00\u6837\u7684\u7c7b\u578b\u3002 https://upliu.net/foreign-key-constraint-is-incorrectly-formed.html","title":"[Err] 1005"},{"location":"mysql/troubleshoot/#case-1_1","text":"\u963f\u91cc\u5df4\u5df4\u5b9a\u5236\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u521b\u5efa\u8868\u9700\u8981\u4f7f\u7528\u5b57\u7b26\u96c6 CHARSET=utf8mb4 \u3002 CREATE TABLE `tags_fileuuidmap` ( ... `uuid` char(32) NOT NULL COMMENT 'uuid', ... ) ENGINE=InnoDB AUTO_INCREMENT=396 DEFAULT CHARSET=utf8mb4 COMMENT='tags_fileuuidmap' ; Seahub \u7684\u6570\u636e\u5e93\u4e2d\uff0c\u521b\u5efa\u8868\u65f6\u4f7f\u7528\u7684\u5b57\u7b26\u96c6\u4e3a CHARSET=utf8 \u3002 CREATE TABLE `related_files_relatedfiles` ( `id` int(11) NOT NULL AUTO_INCREMENT, `o_uuid_id` char(32) NOT NULL, `r_uuid_id` char(32) NOT NULL, PRIMARY KEY (`id`), KEY `related_files_relate_o_uuid_id_aaa8e613_fk_tags_file` (`o_uuid_id`), KEY `related_files_relate_r_uuid_id_031751df_fk_tags_file` (`r_uuid_id`), CONSTRAINT `related_files_relate_o_uuid_id_aaa8e613_fk_tags_file` FOREIGN KEY (`o_uuid_id`) REFERENCES `tags_fileuuidmap` (`uuid`), CONSTRAINT `related_files_relate_r_uuid_id_031751df_fk_tags_file` FOREIGN KEY (`r_uuid_id`) REFERENCES `tags_fileuuidmap` (`uuid`) ) ENGINE=InnoDB AUTO_INCREMENT=49 DEFAULT CHARSET=utf8 \u6240\u4ee5\u76f4\u63a5\u4f7f\u7528 Seahub \u7684\u521b\u5efa\u8bed\u53e5\uff0c\u7ed9\u963f\u91cc\u5df4\u5df4\u521b\u5efa\u65b0\u8868\u65f6\uff0c\u4f1a\u62a5\u9519\uff1a ERROR 1005 (HY000): Can't create table `ali_seahub`.`related_files_relatedfiles` (errno: 150 \"Foreign key constraint is incorrectly formed\") \u89e3\u51b3\u65b9\u6cd5 \u6839\u636e MySQL \u7684 \u5916\u952e\u6587\u6863 Corresponding columns in the foreign key and the referenced key must have similar data types. The size and sign of integer types must be the same. The length of string types need not be the same. For nonbinary (character) string columns, the character set and collation must be the same. \u5c06 Seahub \u5efa\u8868\u8bed\u53e5\u4e2d\u7684 CHARSET \u6539\u4e3a utf8mb4\uff0c\u7ecf\u6d4b\u8bd5\u53ef\u521b\u5efa\u65b0\u8868\u6210\u529f\u3002","title":"case 1\uff0c\u963f\u91cc\u5df4\u5df4\u6570\u636e\u5e93\u5916\u952e\u95ee\u9898"},{"location":"mysql/troubleshoot/#case-2_1","text":"\u8be5\u9519\u8bef\u4e00\u822c\u51fa\u73b0\u539f\u56e0\u5982\u4e0b\uff1a 1\u3001\u5916\u952e\u7684\u5f15\u7528\u7c7b\u578b\u4e0d\u4e00\u6837\uff0c\u5982\u4e3b\u952e\u662fint\u5916\u952e\u662fchar 2\u3001\u627e\u4e0d\u5230\u4e3b\u8868\u4e2d\u5f15\u7528\u7684\u5217 3\u3001\u4e3b\u952e\u548c\u5916\u952e\u7684\u5b57\u7b26\u7f16\u7801\u4e0d\u4e00\u81f4\uff0c\u4e5f\u53ef\u80fd\u5b58\u50a8\u5f15\u64ce\u4e0d\u4e00\u6837 CREATE TABLE t_employee( emp_id INT(3) PRIMARY KEY, emp_no INT(3) UNIQUE NOT NULL, emp_name VARCHAR(10) NOT NULL, emp_age tinyint(4) NOT NULL DEFAULT 25 CHECK (emp_age BETWEEN 20 AND 60), sex VARCHAR(1) CHECK (sex in ('\u7537','\u5973')), job VARCHAR(20), sal INT(10), -- inline\u5199\u6cd5 -- REFERENCES \u4e3b\u8868\uff08\u4e3b\u8868\u5b57\u6bb5\uff09 -- dept_no int REFERENCES t_dept(dept_no) -- outline\u5199\u6cd5 dept_no int NOT NULL , FOREIGN KEY(dept_no) REFERENCES t_dept(dept_no) ON DELETE SET NULL ); \u683c\u5f0f\u4e3a dept_no int NOT NULL , \u4f46\u662f\u5916\u952e\u5374\u4e3a FOREIGN KEY(dept_no) REFERENCES t_dept(dept_no) ON DELETE SET NULL \uff0c\u5220\u9664\u683c\u5f0f\u7684 NOT NULL \u5373\u53ef","title":"case 2"},{"location":"mysql/troubleshoot/#duplicate-entry-2147483647-for-key-primary","text":"\u7c7b\u578b \u5b57\u8282 \u6700\u5c0f\u503c~\u6700\u5927\u503c(\u5e26\u7b26\u53f7\u7684/\u65e0\u7b26\u53f7\u7684) TINYINT 1 -128~127 / 0~255 SMALLINT 2 -32768~32767 / 0~65535 MEDIUMINT 3 -8388608~8388607 / 0~16777215 INT 4 -2147483648~2147483647 / 0~4294967295 BIGINT 8 -9223372036854775808~9223372036854775807 / 0~18446744073709551615 INT \u7c7b\u578b\uff0c\u5360\u7528 4 \u4e2a\u5b57\u8282\uff0c\u6bcf\u5b57\u8282 8 \u4e2a\u6bd4\u7279\uff0c\u5373\u603b\u5171\u5360\u7528 32 \u4e2a\u6bd4\u7279\uff0c\u6240\u4ee5\uff1a \u65e0\u7b26\u53f7\u578b\uff0c\u6700\u5927\u503c\u4e3a 4294967295\uff08\u53734byte=32bit\uff0c\u6700\u5927\u503c\u5373\u662f32\u4e2a1\u7ec4\u6210\uff09 \u6709\u7b26\u53f7\u578b\uff0c\u6700\u5927\u503c\u4e3a 2147483647\u3002 \u6240\u4ee5\u8fbe\u5230\u6700\u5927\u503c\u540e\uff0cINSERT \u8bed\u53e5\u8fd8\u4f1a\u4f7f\u7528 2147483647\uff0c\u5bfc\u81f4\u62a5\u9519\u3002 \u5efa\u8868\u8bed\u53e5 id int(11) unsigned NOT NULL AUTO_INCREMENT, \u4e2d\u7684 11 \uff0c\u53ea\u8868\u793a\u53ef\u663e\u793a\u7684\u4f4d\u6570\uff0c\u4e0e\u5b9e\u9645\u5b58\u50a8\u957f\u5ea6\u65e0\u5173\u3002","title":"Duplicate entry '2147483647' for key 'PRIMARY'"},{"location":"mysql/troubleshoot/#_1","text":"show variables like 'character%'; set names utf8mb4;","title":"\u4e2d\u6587\u663e\u793a\u4e3a \uff1f\uff1f\uff1f\uff1f\uff1f"},{"location":"network/http/","text":"HTTP \u5bc6\u94a5\u534f\u5546\u7684\u6b65\u9aa4 \u5ba2\u6237\u7aef\u8fde\u4e0a\u670d\u52a1\u7aef \u670d\u52a1\u7aef\u53d1\u9001 CA \u8bc1\u4e66\u7ed9\u5ba2\u6237\u7aef \u5ba2\u6237\u7aef\u9a8c\u8bc1\u8be5\u8bc1\u4e66\u7684\u53ef\u9760\u6027 \u5ba2\u6237\u7aef\u4ece CA \u8bc1\u4e66\u4e2d\u53d6\u51fa\u516c\u94a5 \u5ba2\u6237\u7aef\u751f\u6210\u4e00\u4e2a\u968f\u673a\u5bc6\u94a5 k\uff0c\u5e76\u7528\u8fd9\u4e2a\u516c\u94a5\u52a0\u5bc6\u5f97\u5230 k' \u5ba2\u6237\u7aef\u628a k' \u53d1\u9001\u7ed9\u670d\u52a1\u7aef \u670d\u52a1\u7aef\u6536\u5230 k' \u540e\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u89e3\u5bc6\u5f97\u5230 k \u6b64\u65f6\u53cc\u65b9\u90fd\u5f97\u5230\u4e86\u5bc6\u94a5 k\uff0c\u534f\u5546\u5b8c\u6210\u3002 \u57fa\u4e8e CA \u8bc1\u4e66\u8fdb\u884c\u5bc6\u94a5\u4ea4\u6362 \u7f51\u7ad9\u65b9\u9762\u9996\u5148\u8981\u82b1\u4e00\u7b14\u94f6\u5b50\uff0c\u5728\u67d0\u4e2a CA \u90a3\u91cc\u8d2d\u4e70\u4e00\u4e2a\u6570\u5b57\u8bc1\u4e66\u3002 \u8be5\u8bc1\u4e66\u901a\u5e38\u4f1a\u5bf9\u5e94\u51e0\u4e2a\u6587\u4ef6\uff1a\u5176\u4e2d\u4e00\u4e2a\u6587\u4ef6\u5305\u542b\u516c\u94a5\uff0c\u8fd8\u6709\u4e00\u4e2a\u6587\u4ef6\u5305\u542b\u79c1\u94a5\u3002\u7f51\u7ad9\u65b9\u9762\u5fc5\u987b\u5728 Web \u670d\u52a1\u5668\u4e0a\u90e8\u7f72\u8fd9\u4e24\u4e2a\u6587\u4ef6\u3002 \u6240\u8c13\u7684\u201c\u516c\u94a5\u201d\uff0c\u987e\u540d\u601d\u4e49\u5c31\u662f\u53ef\u4ee5\u516c\u5f00\u7684 key\uff1b\u800c\u6240\u8c13\u7684\u201c\u79c1\u94a5\u201d\u5c31\u662f\u79c1\u5bc6\u7684 key\u3002 \u5176\u5b9e\u524d\u9762\u5df2\u7ecf\u8bf4\u8fc7\u4e86\uff0c\u8fd9\u91cc\u518d\u5520\u53e8\u4e00\u4e0b\uff1a \u201c\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u201d\u4ece\u6570\u5b66\u4e0a\u786e\u4fdd\u4e86\u2014\u2014\u5373\u4f7f\u4f60\u77e5\u9053\u67d0\u4e2a\u516c\u94a5\uff0c\u4e5f\u5f88\u96be\uff08\u4e0d\u662f\u4e0d\u53ef\u80fd\uff0c\u662f\u5f88\u96be\uff09\u6839\u636e\u6b64\u516c\u94a5\u63a8\u5bfc\u51fa\u5bf9\u5e94\u7684\u79c1\u94a5\u3002 \u8fd9\u662f\u201c\u4e00\u6b21\u6027\u201d\u7684\u51c6\u5907\u5de5\u4f5c\u3002 \u5f53\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5\u7f51\u7ad9\uff0cWeb \u670d\u52a1\u5668\u9996\u5148\u628a\u5305\u542b\u516c\u94a5\u7684\u8bc1\u4e66\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668\u3002 \u6d4f\u89c8\u5668\u9a8c\u8bc1\u7f51\u7ad9\u53d1\u8fc7\u6765\u7684\u8bc1\u4e66\u3002\u5982\u679c\u53d1\u73b0\u5176\u4e2d\u6709\u8bc8\uff0c\u6d4f\u89c8\u5668\u4f1a\u63d0\u793a\u201cCA \u8bc1\u4e66\u5b89\u5168\u8b66\u544a\u201d\u3002 \u7531\u4e8e\u6709\u4e86\u8fd9\u4e00\u6b65\uff0c\u5c31\u5927\u5927\u964d\u4f4e\u4e86\uff08\u6ce8\u610f\uff1a\u662f\u201c\u5927\u5927\u964d\u4f4e\u201d\uff0c\u800c\u4e0d\u662f\u201c\u5f7b\u5e95\u6d88\u9664\u201d\uff09\u524d\u9762\u63d0\u5230\u7684\u201c\u4e2d\u95f4\u4eba\u653b\u51fb\u201d\u7684\u98ce\u9669\u3002 \u4e3a\u5565\u6d4f\u89c8\u5668\u80fd\u53d1\u73b0 CA \u8bc1\u4e66\u662f\u5426\u6709\u8bc8\uff1f \u56e0\u4e3a\u6b63\u7ecf\u7684 CA \u8bc1\u4e66\uff0c\u90fd\u662f\u6765\u81ea\u67d0\u4e2a\u6743\u5a01\u7684 CA\u3002\u5982\u679c\u67d0\u4e2a CA \u8db3\u591f\u6743\u5a01\uff0c\u90a3\u4e48\u4e3b\u6d41\u7684\u64cd\u4f5c\u7cfb\u7edf\uff08\u6216\u6d4f\u89c8\u5668\uff09\u4f1a\u5185\u7f6e\u8be5 CA \u7684\u201c\u6839\u8bc1\u4e66\u201d\u3002 \uff08\u6bd4\u5982 Windows \u4e2d\u5c31\u5185\u7f6e\u4e86\u51e0\u5341\u4e2a\u6743\u5a01 CA \u7684\u6839\u8bc1\u4e66\uff09 \u56e0\u6b64\uff0c\u6d4f\u89c8\u5668\u5c31\u53ef\u4ee5\u5229\u7528\u7cfb\u7edf\u5185\u7f6e\u7684\u6839\u8bc1\u4e66\uff0c\u6765\u5224\u65ad\u7f51\u7ad9\u53d1\u8fc7\u6765\u7684 CA \u8bc1\u4e66\u662f\u4e0d\u662f\u67d0\u4e2a CA \u9881\u53d1\u7684\u3002 \uff08\u5173\u4e8e\u201c\u6839\u8bc1\u4e66\u201d\u548c\u201c\u8bc1\u4e66\u4fe1\u4efb\u94fe\u201d\u7684\u6982\u5ff5\uff0c\u8bf7\u53c2\u89c1\u4e4b\u524d\u7684\u6559\u7a0b\u300a\u6570\u5b57\u8bc1\u4e66\u53caCA\u7684\u626b\u76f2\u4ecb\u7ecd\u300b\uff09 \u5982\u679c\u7f51\u7ad9\u53d1\u8fc7\u6765\u7684 CA \u8bc1\u4e66\u6ca1\u6709\u95ee\u9898\uff0c\u90a3\u4e48\u6d4f\u89c8\u5668\u5c31\u4ece\u8be5 CA \u8bc1\u4e66\u4e2d\u63d0\u53d6\u51fa\u201c\u516c\u94a5\u201d\u3002 \u7136\u540e\u6d4f\u89c8\u5668\u968f\u673a\u751f\u6210\u4e00\u4e2a\u201c\u5bf9\u79f0\u52a0\u5bc6\u7684\u5bc6\u94a5\u201d\uff08\u4ee5\u4e0b\u79f0\u4e3a k\uff09\u3002\u7528 CA \u8bc1\u4e66\u7684\u516c\u94a5\u52a0\u5bc6 k\uff0c\u5f97\u5230\u5bc6\u6587 k' \u6d4f\u89c8\u5668\u628a k' \u53d1\u9001\u7ed9\u7f51\u7ad9\u3002 \u7f51\u7ad9\u6536\u5230\u6d4f\u89c8\u5668\u53d1\u8fc7\u6765\u7684 k'\uff0c\u7528\u670d\u52a1\u5668\u4e0a\u7684\u79c1\u94a5\u8fdb\u884c\u89e3\u5bc6\uff0c\u5f97\u5230 k\u3002 \u81f3\u6b64\uff0c\u6d4f\u89c8\u5668\u548c\u7f51\u7ad9\u90fd\u62e5\u6709 k\uff0c\u201c\u5bc6\u94a5\u4ea4\u6362\u201d\u5927\u529f\u544a\u6210\u5566\u3002","title":"HTTP"},{"location":"network/http/#http","text":"\u5bc6\u94a5\u534f\u5546\u7684\u6b65\u9aa4 \u5ba2\u6237\u7aef\u8fde\u4e0a\u670d\u52a1\u7aef \u670d\u52a1\u7aef\u53d1\u9001 CA \u8bc1\u4e66\u7ed9\u5ba2\u6237\u7aef \u5ba2\u6237\u7aef\u9a8c\u8bc1\u8be5\u8bc1\u4e66\u7684\u53ef\u9760\u6027 \u5ba2\u6237\u7aef\u4ece CA \u8bc1\u4e66\u4e2d\u53d6\u51fa\u516c\u94a5 \u5ba2\u6237\u7aef\u751f\u6210\u4e00\u4e2a\u968f\u673a\u5bc6\u94a5 k\uff0c\u5e76\u7528\u8fd9\u4e2a\u516c\u94a5\u52a0\u5bc6\u5f97\u5230 k' \u5ba2\u6237\u7aef\u628a k' \u53d1\u9001\u7ed9\u670d\u52a1\u7aef \u670d\u52a1\u7aef\u6536\u5230 k' \u540e\u7528\u81ea\u5df1\u7684\u79c1\u94a5\u89e3\u5bc6\u5f97\u5230 k \u6b64\u65f6\u53cc\u65b9\u90fd\u5f97\u5230\u4e86\u5bc6\u94a5 k\uff0c\u534f\u5546\u5b8c\u6210\u3002","title":"HTTP"},{"location":"network/http/#ca","text":"\u7f51\u7ad9\u65b9\u9762\u9996\u5148\u8981\u82b1\u4e00\u7b14\u94f6\u5b50\uff0c\u5728\u67d0\u4e2a CA \u90a3\u91cc\u8d2d\u4e70\u4e00\u4e2a\u6570\u5b57\u8bc1\u4e66\u3002 \u8be5\u8bc1\u4e66\u901a\u5e38\u4f1a\u5bf9\u5e94\u51e0\u4e2a\u6587\u4ef6\uff1a\u5176\u4e2d\u4e00\u4e2a\u6587\u4ef6\u5305\u542b\u516c\u94a5\uff0c\u8fd8\u6709\u4e00\u4e2a\u6587\u4ef6\u5305\u542b\u79c1\u94a5\u3002\u7f51\u7ad9\u65b9\u9762\u5fc5\u987b\u5728 Web \u670d\u52a1\u5668\u4e0a\u90e8\u7f72\u8fd9\u4e24\u4e2a\u6587\u4ef6\u3002 \u6240\u8c13\u7684\u201c\u516c\u94a5\u201d\uff0c\u987e\u540d\u601d\u4e49\u5c31\u662f\u53ef\u4ee5\u516c\u5f00\u7684 key\uff1b\u800c\u6240\u8c13\u7684\u201c\u79c1\u94a5\u201d\u5c31\u662f\u79c1\u5bc6\u7684 key\u3002 \u5176\u5b9e\u524d\u9762\u5df2\u7ecf\u8bf4\u8fc7\u4e86\uff0c\u8fd9\u91cc\u518d\u5520\u53e8\u4e00\u4e0b\uff1a \u201c\u975e\u5bf9\u79f0\u52a0\u5bc6\u7b97\u6cd5\u201d\u4ece\u6570\u5b66\u4e0a\u786e\u4fdd\u4e86\u2014\u2014\u5373\u4f7f\u4f60\u77e5\u9053\u67d0\u4e2a\u516c\u94a5\uff0c\u4e5f\u5f88\u96be\uff08\u4e0d\u662f\u4e0d\u53ef\u80fd\uff0c\u662f\u5f88\u96be\uff09\u6839\u636e\u6b64\u516c\u94a5\u63a8\u5bfc\u51fa\u5bf9\u5e94\u7684\u79c1\u94a5\u3002 \u8fd9\u662f\u201c\u4e00\u6b21\u6027\u201d\u7684\u51c6\u5907\u5de5\u4f5c\u3002 \u5f53\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5\u7f51\u7ad9\uff0cWeb \u670d\u52a1\u5668\u9996\u5148\u628a\u5305\u542b\u516c\u94a5\u7684\u8bc1\u4e66\u53d1\u9001\u7ed9\u6d4f\u89c8\u5668\u3002 \u6d4f\u89c8\u5668\u9a8c\u8bc1\u7f51\u7ad9\u53d1\u8fc7\u6765\u7684\u8bc1\u4e66\u3002\u5982\u679c\u53d1\u73b0\u5176\u4e2d\u6709\u8bc8\uff0c\u6d4f\u89c8\u5668\u4f1a\u63d0\u793a\u201cCA \u8bc1\u4e66\u5b89\u5168\u8b66\u544a\u201d\u3002 \u7531\u4e8e\u6709\u4e86\u8fd9\u4e00\u6b65\uff0c\u5c31\u5927\u5927\u964d\u4f4e\u4e86\uff08\u6ce8\u610f\uff1a\u662f\u201c\u5927\u5927\u964d\u4f4e\u201d\uff0c\u800c\u4e0d\u662f\u201c\u5f7b\u5e95\u6d88\u9664\u201d\uff09\u524d\u9762\u63d0\u5230\u7684\u201c\u4e2d\u95f4\u4eba\u653b\u51fb\u201d\u7684\u98ce\u9669\u3002 \u4e3a\u5565\u6d4f\u89c8\u5668\u80fd\u53d1\u73b0 CA \u8bc1\u4e66\u662f\u5426\u6709\u8bc8\uff1f \u56e0\u4e3a\u6b63\u7ecf\u7684 CA \u8bc1\u4e66\uff0c\u90fd\u662f\u6765\u81ea\u67d0\u4e2a\u6743\u5a01\u7684 CA\u3002\u5982\u679c\u67d0\u4e2a CA \u8db3\u591f\u6743\u5a01\uff0c\u90a3\u4e48\u4e3b\u6d41\u7684\u64cd\u4f5c\u7cfb\u7edf\uff08\u6216\u6d4f\u89c8\u5668\uff09\u4f1a\u5185\u7f6e\u8be5 CA \u7684\u201c\u6839\u8bc1\u4e66\u201d\u3002 \uff08\u6bd4\u5982 Windows \u4e2d\u5c31\u5185\u7f6e\u4e86\u51e0\u5341\u4e2a\u6743\u5a01 CA \u7684\u6839\u8bc1\u4e66\uff09 \u56e0\u6b64\uff0c\u6d4f\u89c8\u5668\u5c31\u53ef\u4ee5\u5229\u7528\u7cfb\u7edf\u5185\u7f6e\u7684\u6839\u8bc1\u4e66\uff0c\u6765\u5224\u65ad\u7f51\u7ad9\u53d1\u8fc7\u6765\u7684 CA \u8bc1\u4e66\u662f\u4e0d\u662f\u67d0\u4e2a CA \u9881\u53d1\u7684\u3002 \uff08\u5173\u4e8e\u201c\u6839\u8bc1\u4e66\u201d\u548c\u201c\u8bc1\u4e66\u4fe1\u4efb\u94fe\u201d\u7684\u6982\u5ff5\uff0c\u8bf7\u53c2\u89c1\u4e4b\u524d\u7684\u6559\u7a0b\u300a\u6570\u5b57\u8bc1\u4e66\u53caCA\u7684\u626b\u76f2\u4ecb\u7ecd\u300b\uff09 \u5982\u679c\u7f51\u7ad9\u53d1\u8fc7\u6765\u7684 CA \u8bc1\u4e66\u6ca1\u6709\u95ee\u9898\uff0c\u90a3\u4e48\u6d4f\u89c8\u5668\u5c31\u4ece\u8be5 CA \u8bc1\u4e66\u4e2d\u63d0\u53d6\u51fa\u201c\u516c\u94a5\u201d\u3002 \u7136\u540e\u6d4f\u89c8\u5668\u968f\u673a\u751f\u6210\u4e00\u4e2a\u201c\u5bf9\u79f0\u52a0\u5bc6\u7684\u5bc6\u94a5\u201d\uff08\u4ee5\u4e0b\u79f0\u4e3a k\uff09\u3002\u7528 CA \u8bc1\u4e66\u7684\u516c\u94a5\u52a0\u5bc6 k\uff0c\u5f97\u5230\u5bc6\u6587 k' \u6d4f\u89c8\u5668\u628a k' \u53d1\u9001\u7ed9\u7f51\u7ad9\u3002 \u7f51\u7ad9\u6536\u5230\u6d4f\u89c8\u5668\u53d1\u8fc7\u6765\u7684 k'\uff0c\u7528\u670d\u52a1\u5668\u4e0a\u7684\u79c1\u94a5\u8fdb\u884c\u89e3\u5bc6\uff0c\u5f97\u5230 k\u3002 \u81f3\u6b64\uff0c\u6d4f\u89c8\u5668\u548c\u7f51\u7ad9\u90fd\u62e5\u6709 k\uff0c\u201c\u5bc6\u94a5\u4ea4\u6362\u201d\u5927\u529f\u544a\u6210\u5566\u3002","title":"\u57fa\u4e8e CA \u8bc1\u4e66\u8fdb\u884c\u5bc6\u94a5\u4ea4\u6362"},{"location":"onlyoffice/onlyoffice/","text":"OnlyOffice deploy onlyoffice server install docker please see here install nginx please see here install certbot please see here change nginx conf # for onlyoffice map $http_x_forwarded_proto $the_scheme { default $http_x_forwarded_proto; \"\" $scheme; } map $http_x_forwarded_host $the_host { default $http_x_forwarded_host; \"\" $host; } map $http_upgrade $proxy_connection { default upgrade; \"\" close; } ...... location / { # IMPORTANT ! - Trailing slash ! proxy_pass http://127.0.0.1:8123/; proxy_http_version 1.1; client_max_body_size 0; # Limit Document size to 100MB proxy_read_timeout 3600s; proxy_connect_timeout 3600s; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $proxy_connection; # IMPORTANT ! - Subfolder and NO trailing slash ! proxy_set_header X-Forwarded-Host $the_host; proxy_set_header X-Forwarded-Proto $the_scheme; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } docker run sudo docker run -i -t -d -p 8123:80 -e JWT_ENABLED=true -e JWT_SECRET=lian-secret-string --name oods-enable-jwt --restart always onlyoffice/documentserver:6.2 crontab -e 30 2 * * 1 certbot renew >> /var/log/le-renew.log 35 2 * * 1 service nginx restart","title":"OnlyOffice"},{"location":"onlyoffice/onlyoffice/#onlyoffice","text":"deploy onlyoffice server","title":"OnlyOffice"},{"location":"onlyoffice/onlyoffice/#install-docker","text":"please see here","title":"install docker"},{"location":"onlyoffice/onlyoffice/#install-nginx","text":"please see here","title":"install nginx"},{"location":"onlyoffice/onlyoffice/#install-certbot","text":"please see here","title":"install certbot"},{"location":"onlyoffice/onlyoffice/#change-nginx-conf","text":"# for onlyoffice map $http_x_forwarded_proto $the_scheme { default $http_x_forwarded_proto; \"\" $scheme; } map $http_x_forwarded_host $the_host { default $http_x_forwarded_host; \"\" $host; } map $http_upgrade $proxy_connection { default upgrade; \"\" close; } ...... location / { # IMPORTANT ! - Trailing slash ! proxy_pass http://127.0.0.1:8123/; proxy_http_version 1.1; client_max_body_size 0; # Limit Document size to 100MB proxy_read_timeout 3600s; proxy_connect_timeout 3600s; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $proxy_connection; # IMPORTANT ! - Subfolder and NO trailing slash ! proxy_set_header X-Forwarded-Host $the_host; proxy_set_header X-Forwarded-Proto $the_scheme; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; }","title":"change nginx conf"},{"location":"onlyoffice/onlyoffice/#docker-run","text":"sudo docker run -i -t -d -p 8123:80 -e JWT_ENABLED=true -e JWT_SECRET=lian-secret-string --name oods-enable-jwt --restart always onlyoffice/documentserver:6.2","title":"docker run"},{"location":"onlyoffice/onlyoffice/#crontab-e","text":"30 2 * * 1 certbot renew >> /var/log/le-renew.log 35 2 * * 1 service nginx restart","title":"crontab -e"},{"location":"python/base64/","text":"Avoiding padding errors with Python's base64 encoding >>> import base64 >>> data = '{\"u\": \"test\"}' >>> code = base64.b64encode(data.encode('utf-8')) >>> code 'eyJ1IjogInRlc3QifQ==' Note the trailing == to make len a multiple of 4. This decodes properly >>> len(code) 20 >>> base64.b64decode(code) '{\"u\": \"test\"}' >>> base64.b64decode(code) == data True without the == padding (this is how many things are encoded for e.g. access tokens) >>> base64.b64decode(code[0:18]) == data ... TypeError: Incorrect padding However, you can add back the padding >>> base64.b64decode(code + b\"==\") == data True Or add an arbitrary amount of padding (it will ignore extraneous padding) >>> base64.b64decode(code + b\"========\") == data True or >>> base64.b64decode(code + b'=' * (-len(code) % 4)) == data True This last property of python's base64 decoding ensures that the following code adding 3 padding = will never succumb to the TypeError and will always produce the same result. >>> base64.b64decode(code + b\"===\") == data True It's clumsy but effective method to deal with strings from different implementations of base64 encoders","title":"base64"},{"location":"python/base64/#avoiding-padding-errors-with-pythons-base64-encoding","text":">>> import base64 >>> data = '{\"u\": \"test\"}' >>> code = base64.b64encode(data.encode('utf-8')) >>> code 'eyJ1IjogInRlc3QifQ==' Note the trailing == to make len a multiple of 4. This decodes properly >>> len(code) 20 >>> base64.b64decode(code) '{\"u\": \"test\"}' >>> base64.b64decode(code) == data True without the == padding (this is how many things are encoded for e.g. access tokens) >>> base64.b64decode(code[0:18]) == data ... TypeError: Incorrect padding However, you can add back the padding >>> base64.b64decode(code + b\"==\") == data True Or add an arbitrary amount of padding (it will ignore extraneous padding) >>> base64.b64decode(code + b\"========\") == data True or >>> base64.b64decode(code + b'=' * (-len(code) % 4)) == data True This last property of python's base64 decoding ensures that the following code adding 3 padding = will never succumb to the TypeError and will always produce the same result. >>> base64.b64decode(code + b\"===\") == data True It's clumsy but effective method to deal with strings from different implementations of base64 encoders","title":"Avoiding padding errors with Python's base64 encoding"},{"location":"python/django%20csrf/","text":"django csrf Django Rest Framework by default will make APIView csrf excempt for ApiView. https://github.com/encode/django-rest-framework/issues/6795","title":"django csrf"},{"location":"python/django%20csrf/#django-csrf","text":"Django Rest Framework by default will make APIView csrf excempt for ApiView. https://github.com/encode/django-rest-framework/issues/6795","title":"django csrf"},{"location":"python/django/","text":"Django Session >>> from django.contrib.sessions.models import Session >>> s = Session.objects.get(pk='2b1189a188b44ad18c35e113ac6ceead') >>> s.expire_date datetime.datetime(2005, 8, 20, 13, 35, 12) >>> s.session_data 'KGRwMQpTJ19hdXRoX3VzZXJfaWQnCnAyCkkxCnMuMTExY2ZjODI2Yj...' >>> s.get_decoded() {'user_id': 42} >>> from django.contrib.sessions.backends.db import SessionStore >>> s = SessionStore() >>> s_data = \".eJxVjEEKwjAQAP-yZymbtomJJ_UjYTddqWhbyTaoiH-3RRC8DjPzgiyDDCw5DgK7ORfZQKQy97HoAkdaMQTyLbNhzxjarjaek_O1NQFdwpN1-7WorlOiK_z1TOkiYxfrZaJCfeGKSaWilKYyzlodFvX4ldZSRfU8jVEet3N-ws5h6xE3cCPV-5S7n_ADPWkfL7K4wLY2fApbRkOI6H0jDTvDNtjGNMbB-wMgXU_Z:1rGcFf:4Y53efIteKjKKAkWbOHhT3D6n3Yk0Z_vca2yDP8N-Dc\" >>> decoded_data = s.decode(s_data) Database \u624b\u52a8\u89e6\u53d1\u6570\u636e\u5e93\u4e8b\u52a1\u7684 commit \u63d0\u4ea4 from django.db import transaction from seahub.utils import gen_token token = gen_token(30) + gen_token(30) transaction.set_autocommit(False) try: t = ClientSSOToken(token=token) t.save() transaction.commit() except Exception as e: logger.error(e) transaction.rollback() finally: transaction.set_autocommit(True) USE_TZ and TIME_ZONE \u5f53\u914d\u7f6e\u4e86 USE_TZ = True \u6570\u636e\u5e93\u4e2d\u8bb0\u5f55 UTC \u65f6\u95f4\uff0cDjango \u4ece\u6570\u636e\u5e93\u4e2d\u53d6\u51fa\u65f6\u95f4\u540e\uff0c\u4f1a\u751f\u6210 tzinfo \u4e3a UTC \u7684 datetime \u5bf9\u8c61\u3002 \u5f53\u6ca1\u6709\u914d\u7f6e USE_TZ = True \u6570\u636e\u5e93\u4e2d\u8bb0\u5f55\u7684\u662f\u6839\u636e TIME_ZONE \u5f97\u5230\u7684\u672c\u5730\u65f6\u95f4\uff0cDjango \u4ece\u6570\u636e\u5e93\u4e2d\u53d6\u51fa\u65f6\u95f4\u540e\uff0c\u4f1a\u751f\u6210 tzinfo \u4e3a None \u7684 datetime \u5bf9\u8c61\u3002 \u4e3e\u4f8b\u8bf4\u660e \u6bd4\u5982\uff0c\u5728 \u5317\u4eac\u65f6\u95f4 2021-04-10 14\u70b9\u5de6\u53f3 \u521b\u5efa\u7684\u6570\u636e\uff0c\u5728\u6570\u636e\u4e2d\u5b58\u7684\u65f6\u95f4\u4e3a\uff1a \u6570\u636e\u5e93\u4e2d\u5b58\u7684\u65f6\u95f4 \u914d\u7f6e \u8bf4\u660e 2021-04-10 13:53:40 TIME_ZONE = 'Asia/Shanghai' \u5b58\u7684\u662f\u4e0a\u6d77\u5f53\u5730\u65f6\u95f4 2021-04-10 05:57:18 USE_TZ = True and TIME_ZONE = 'Asia/Shanghai' \u5ffd\u7565 TIME_ZONE \u914d\u7f6e\uff0c\u5b58\u7684\u662f UTC \u65f6\u95f4 2021-04-10 01:05:29 TIME_ZONE = America/Chicago \u5b58\u7684\u662f\u829d\u52a0\u54e5\u5f53\u5730\u65f6\u95f4 https://docs.djangoproject.com/en/3.2/ref/settings/#std:setting-USE_TZ \u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848 TypeError: can\u2019t compare offset-naive and offset-aware datetimes \u5bf9\u6bd4\u4e24\u4e2a datetime \u5bf9\u8c61\u65f6\uff0c\u5982\u679c\u4e00\u4e2a\u6709 tzinfo \u3001\u4e00\u4e2a\u6ca1\u6709 tzinfo \u5219\u4f1a\u62a5\u4ee5\u4e0a\u9519\u8bef\uff0c\u89e3\u51b3\u65b9\u6cd5\uff1a \u5c06 datetime \u5bf9\u8c61\u7edf\u4e00 make_naive \uff08 make_aware \u4e5f\u53ef\u4ee5\uff09\u540e\uff0c\u518d\u5bf9\u6bd4\u3002 from django.utils.timezone import make_naive, is_aware # before make_naive # 2021-04-09 05:32:30+00:00 # tzinfo: UTC # after make_naive # 2021-04-09 13:32:30 # tzinfo: None if is_aware(last_login_time): last_login_time = make_naive(last_login_time) https://docs.djangoproject.com/en/3.2/ref/utils/#django.utils.timezone.is_aware","title":"django"},{"location":"python/django/#django","text":"","title":"Django"},{"location":"python/django/#session","text":">>> from django.contrib.sessions.models import Session >>> s = Session.objects.get(pk='2b1189a188b44ad18c35e113ac6ceead') >>> s.expire_date datetime.datetime(2005, 8, 20, 13, 35, 12) >>> s.session_data 'KGRwMQpTJ19hdXRoX3VzZXJfaWQnCnAyCkkxCnMuMTExY2ZjODI2Yj...' >>> s.get_decoded() {'user_id': 42} >>> from django.contrib.sessions.backends.db import SessionStore >>> s = SessionStore() >>> s_data = \".eJxVjEEKwjAQAP-yZymbtomJJ_UjYTddqWhbyTaoiH-3RRC8DjPzgiyDDCw5DgK7ORfZQKQy97HoAkdaMQTyLbNhzxjarjaek_O1NQFdwpN1-7WorlOiK_z1TOkiYxfrZaJCfeGKSaWilKYyzlodFvX4ldZSRfU8jVEet3N-ws5h6xE3cCPV-5S7n_ADPWkfL7K4wLY2fApbRkOI6H0jDTvDNtjGNMbB-wMgXU_Z:1rGcFf:4Y53efIteKjKKAkWbOHhT3D6n3Yk0Z_vca2yDP8N-Dc\" >>> decoded_data = s.decode(s_data)","title":"Session"},{"location":"python/django/#database","text":"\u624b\u52a8\u89e6\u53d1\u6570\u636e\u5e93\u4e8b\u52a1\u7684 commit \u63d0\u4ea4 from django.db import transaction from seahub.utils import gen_token token = gen_token(30) + gen_token(30) transaction.set_autocommit(False) try: t = ClientSSOToken(token=token) t.save() transaction.commit() except Exception as e: logger.error(e) transaction.rollback() finally: transaction.set_autocommit(True)","title":"Database"},{"location":"python/django/#use_tz-and-time_zone","text":"","title":"USE_TZ and TIME_ZONE"},{"location":"python/django/#use_tz-true","text":"\u6570\u636e\u5e93\u4e2d\u8bb0\u5f55 UTC \u65f6\u95f4\uff0cDjango \u4ece\u6570\u636e\u5e93\u4e2d\u53d6\u51fa\u65f6\u95f4\u540e\uff0c\u4f1a\u751f\u6210 tzinfo \u4e3a UTC \u7684 datetime \u5bf9\u8c61\u3002","title":"\u5f53\u914d\u7f6e\u4e86 USE_TZ = True"},{"location":"python/django/#use_tz-true_1","text":"\u6570\u636e\u5e93\u4e2d\u8bb0\u5f55\u7684\u662f\u6839\u636e TIME_ZONE \u5f97\u5230\u7684\u672c\u5730\u65f6\u95f4\uff0cDjango \u4ece\u6570\u636e\u5e93\u4e2d\u53d6\u51fa\u65f6\u95f4\u540e\uff0c\u4f1a\u751f\u6210 tzinfo \u4e3a None \u7684 datetime \u5bf9\u8c61\u3002","title":"\u5f53\u6ca1\u6709\u914d\u7f6e USE_TZ = True"},{"location":"python/django/#_1","text":"\u6bd4\u5982\uff0c\u5728 \u5317\u4eac\u65f6\u95f4 2021-04-10 14\u70b9\u5de6\u53f3 \u521b\u5efa\u7684\u6570\u636e\uff0c\u5728\u6570\u636e\u4e2d\u5b58\u7684\u65f6\u95f4\u4e3a\uff1a \u6570\u636e\u5e93\u4e2d\u5b58\u7684\u65f6\u95f4 \u914d\u7f6e \u8bf4\u660e 2021-04-10 13:53:40 TIME_ZONE = 'Asia/Shanghai' \u5b58\u7684\u662f\u4e0a\u6d77\u5f53\u5730\u65f6\u95f4 2021-04-10 05:57:18 USE_TZ = True and TIME_ZONE = 'Asia/Shanghai' \u5ffd\u7565 TIME_ZONE \u914d\u7f6e\uff0c\u5b58\u7684\u662f UTC \u65f6\u95f4 2021-04-10 01:05:29 TIME_ZONE = America/Chicago \u5b58\u7684\u662f\u829d\u52a0\u54e5\u5f53\u5730\u65f6\u95f4 https://docs.djangoproject.com/en/3.2/ref/settings/#std:setting-USE_TZ","title":"\u4e3e\u4f8b\u8bf4\u660e"},{"location":"python/django/#_2","text":"","title":"\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848"},{"location":"python/django/#typeerror-cant-compare-offset-naive-and-offset-aware-datetimes","text":"\u5bf9\u6bd4\u4e24\u4e2a datetime \u5bf9\u8c61\u65f6\uff0c\u5982\u679c\u4e00\u4e2a\u6709 tzinfo \u3001\u4e00\u4e2a\u6ca1\u6709 tzinfo \u5219\u4f1a\u62a5\u4ee5\u4e0a\u9519\u8bef\uff0c\u89e3\u51b3\u65b9\u6cd5\uff1a \u5c06 datetime \u5bf9\u8c61\u7edf\u4e00 make_naive \uff08 make_aware \u4e5f\u53ef\u4ee5\uff09\u540e\uff0c\u518d\u5bf9\u6bd4\u3002 from django.utils.timezone import make_naive, is_aware # before make_naive # 2021-04-09 05:32:30+00:00 # tzinfo: UTC # after make_naive # 2021-04-09 13:32:30 # tzinfo: None if is_aware(last_login_time): last_login_time = make_naive(last_login_time) https://docs.djangoproject.com/en/3.2/ref/utils/#django.utils.timezone.is_aware","title":"TypeError: can\u2019t compare offset-naive and offset-aware datetimes"},{"location":"python/elasticsearch/","text":"elasticsearch create index curl -XPUT \"http://localhost:9200/movies/movie/1\" -d' { \"title\": \"The Godfather\", \"director\": \"Francis Ford Coppola\", \"year\": 1972, \"genres\": [\"Crime\", \"Drama\"] }' -H 'Content-Type: application/json' curl -XPUT \"http://localhost:9200/movies/movie/2\" -d' { \"title\": \"Lawrence of Arabia\", \"director\": \"David Lean\", \"year\": 1962, \"genres\": [\"Adventure\", \"Biography\", \"Drama\"] }' -H 'Content-Type: application/json' curl -XPUT \"http://localhost:9200/movies/movie/3\" -d' { \"title\": \"To Kill a Mockingbird\", \"director\": \"Robert Mulligan\", \"year\": 1962, \"genres\": [\"Crime\", \"Drama\", \"Mystery\"] }' -H 'Content-Type: application/json' curl -XPUT \"http://localhost:9200/movies/movie/4\" -d' { \"title\": \"Apocalypse Now\", \"director\": \"Francis Ford Coppola\", \"year\": 1979, \"genres\": [\"Drama\", \"War\"] }' -H 'Content-Type: application/json' curl -XPUT \"http://localhost:9200/movies/movie/5\" -d' { \"title\": \"Kill Bill: Vol. 1\", \"director\": \"Quentin Tarantino\", \"year\": 2003, \"genres\": [\"Action\", \"Crime\", \"Thriller\"] }' -H 'Content-Type: application/json' curl -XPUT \"http://localhost:9200/movies/movie/6\" -d' { \"title\": \"The Assassination of Jesse James by the Coward Robert Ford\", \"director\": \"Andrew Dominik\", \"year\": 2007, \"genres\": [\"Biography\", \"Crime\", \"Drama\"] }' -H 'Content-Type: application/json' search curl -XPOST \"http://localhost:9200/_search\" -d' { \"query\": { \"query_string\": { \"query\": \"ford\", \"fields\": [\"title\"] } } }' -H 'Content-Type: application/json' { \"took\": 561, \"timed_out\": false, \"_shards\": { \"total\": 4, \"successful\": 4, \"skipped\": 0, \"failed\": 0 }, \"hits\": { \"total\": { \"value\": 2, \"relation\": \"eq\" }, \"max_score\": 1.0467482, \"hits\": [ { \"_index\": \"movies\", \"_type\": \"movie\", \"_id\": \"3\", \"_score\": 1.0467482, \"_source\": { \"title\": \"To Kill a Mockingbird\", \"director\": \"Robert Mulligan\", \"year\": 1962, \"genres\": [ \"Crime\", \"Drama\", \"Mystery\" ] } }, { \"_index\": \"movies\", \"_type\": \"movie\", \"_id\": \"5\", \"_score\": 1.0467482, \"_source\": { \"title\": \"Kill Bill: Vol. 1\", \"director\": \"Quentin Tarantino\", \"year\": 2003, \"genres\": [ \"Action\", \"Crime\", \"Thriller\" ] } } ] } }","title":"elasticsearch"},{"location":"python/elasticsearch/#elasticsearch","text":"","title":"elasticsearch"},{"location":"python/elasticsearch/#create-index","text":"curl -XPUT \"http://localhost:9200/movies/movie/1\" -d' { \"title\": \"The Godfather\", \"director\": \"Francis Ford Coppola\", \"year\": 1972, \"genres\": [\"Crime\", \"Drama\"] }' -H 'Content-Type: application/json' curl -XPUT \"http://localhost:9200/movies/movie/2\" -d' { \"title\": \"Lawrence of Arabia\", \"director\": \"David Lean\", \"year\": 1962, \"genres\": [\"Adventure\", \"Biography\", \"Drama\"] }' -H 'Content-Type: application/json' curl -XPUT \"http://localhost:9200/movies/movie/3\" -d' { \"title\": \"To Kill a Mockingbird\", \"director\": \"Robert Mulligan\", \"year\": 1962, \"genres\": [\"Crime\", \"Drama\", \"Mystery\"] }' -H 'Content-Type: application/json' curl -XPUT \"http://localhost:9200/movies/movie/4\" -d' { \"title\": \"Apocalypse Now\", \"director\": \"Francis Ford Coppola\", \"year\": 1979, \"genres\": [\"Drama\", \"War\"] }' -H 'Content-Type: application/json' curl -XPUT \"http://localhost:9200/movies/movie/5\" -d' { \"title\": \"Kill Bill: Vol. 1\", \"director\": \"Quentin Tarantino\", \"year\": 2003, \"genres\": [\"Action\", \"Crime\", \"Thriller\"] }' -H 'Content-Type: application/json' curl -XPUT \"http://localhost:9200/movies/movie/6\" -d' { \"title\": \"The Assassination of Jesse James by the Coward Robert Ford\", \"director\": \"Andrew Dominik\", \"year\": 2007, \"genres\": [\"Biography\", \"Crime\", \"Drama\"] }' -H 'Content-Type: application/json'","title":"create index"},{"location":"python/elasticsearch/#search","text":"curl -XPOST \"http://localhost:9200/_search\" -d' { \"query\": { \"query_string\": { \"query\": \"ford\", \"fields\": [\"title\"] } } }' -H 'Content-Type: application/json' { \"took\": 561, \"timed_out\": false, \"_shards\": { \"total\": 4, \"successful\": 4, \"skipped\": 0, \"failed\": 0 }, \"hits\": { \"total\": { \"value\": 2, \"relation\": \"eq\" }, \"max_score\": 1.0467482, \"hits\": [ { \"_index\": \"movies\", \"_type\": \"movie\", \"_id\": \"3\", \"_score\": 1.0467482, \"_source\": { \"title\": \"To Kill a Mockingbird\", \"director\": \"Robert Mulligan\", \"year\": 1962, \"genres\": [ \"Crime\", \"Drama\", \"Mystery\" ] } }, { \"_index\": \"movies\", \"_type\": \"movie\", \"_id\": \"5\", \"_score\": 1.0467482, \"_source\": { \"title\": \"Kill Bill: Vol. 1\", \"director\": \"Quentin Tarantino\", \"year\": 2003, \"genres\": [ \"Action\", \"Crime\", \"Thriller\" ] } } ] } }","title":"search"},{"location":"python/ldap/","text":"ldap \u7f29\u5199 \u5168\u79f0 LDAP Light Directory Access Portocol DN Distinguished Name dc Domain Component ou Organization Unit cn Common Name uid User ID cn=username,ou=people,dc=test,dc=com \u662f\u4e00\u4e2a DN\uff0c\u4ee3\u8868\u4e00\u6761\u8bb0\u5f55\uff0c\u4ee3\u8868\u4e00\u4f4d\u5728 test.com \u516c\u53f8 people \u90e8\u95e8\u7684\u7528\u6237 username\u3002 python3-ldap apt install python3-ldap import ldap from pprint import pprint ldapconn = ldap.initialize('ldap://ldap.forumsys.com:389') ldapconn.simple_bind_s('cn=read-only-admin,dc=example,dc=com', 'password') base_dn = 'dc=example,dc=com' print(\"\\nsearch_filter = 'ou=scientists'\") search_filter = 'ou=scientists' result = ldapconn.search_s(base_dn, ldap.SCOPE_SUBTREE, search_filter, None) pprint(result) print(\"\\nsearch_filter = 'uid=tesla'\") search_filter = 'uid=tesla' result = ldapconn.search_s(base_dn, ldap.SCOPE_SUBTREE, search_filter, None) pprint(result) search_filter = 'ou=scientists' [('ou=scientists,dc=example,dc=com', {'cn': [b'Scientists'], 'objectClass': [b'groupOfUniqueNames', b'top'], 'ou': [b'scientists'], 'uniqueMember': [b'uid=einstein,dc=example,dc=com', b'uid=galieleo,dc=example,dc=com', b'uid=tesla,dc=example,dc=com', b'uid=newton,dc=example,dc=com', b'uid=training,dc=example,dc=com', b'uid=jmacy,dc=example,dc=com']})] search_filter = 'uid=tesla' [('uid=tesla,dc=example,dc=com', {'cn': [b'Nikola Tesla'], 'gidNumber': [b'99999'], 'homeDirectory': [b'home'], 'mail': [b'tesla@ldap.forumsys.com'], 'objectClass': [b'inetOrgPerson', b'organizationalPerson', b'person', b'top', b'posixAccount'], 'sn': [b'Tesla'], 'uid': [b'tesla'], 'uidNumber': [b'88888']})] ldap test server zflexldapadministrator LDAP Server Connection Info: Server: www.zflexldap.com Port: 389 Bind DN: cn=ro_admin,ou=sysadmins,dc=zflexsoftware,dc=com Bind Password: zflexpass Other Users IDs and their passwords are: uid=guest1,ou=users,ou=guests,dc=zflexsoftware,dc=com guest1password uid=guest2,ou=users,ou=guests,dc=zflexsoftware,dc=com guest2password uid=guest3,ou=users,ou=guests,dc=zflexsoftware,dc=com guest3password https://www.zflexldapadministrator.com/index.php/blog/82-free-online-ldap forumsys Here are the credentials for an Online LDAP Test Server that you can use for testing your applications that require LDAP-based authentication. Our goal is to eliminate the need for you to download, install and configure an LDAP sever for testing. If all you need is to test connectivity and authentication against a few identities, you have come to the right place. LDAP Server Information (read-only access): Server: ldap.forumsys.com Port: 389 Bind DN: cn=read-only-admin,dc=example,dc=com Bind Password: password All user passwords are password . You may also bind to individual Users (uid) or the two Groups (ou) that include: ou=mathematicians,dc=example,dc=com riemann gauss euler euclid ou=scientists,dc=example,dc=com einstein newton galieleo tesla https://www.forumsys.com/tutorials/integration-how-to/ldap/online-ldap-test-server/","title":"ldap"},{"location":"python/ldap/#ldap","text":"\u7f29\u5199 \u5168\u79f0 LDAP Light Directory Access Portocol DN Distinguished Name dc Domain Component ou Organization Unit cn Common Name uid User ID cn=username,ou=people,dc=test,dc=com \u662f\u4e00\u4e2a DN\uff0c\u4ee3\u8868\u4e00\u6761\u8bb0\u5f55\uff0c\u4ee3\u8868\u4e00\u4f4d\u5728 test.com \u516c\u53f8 people \u90e8\u95e8\u7684\u7528\u6237 username\u3002","title":"ldap"},{"location":"python/ldap/#python3-ldap","text":"apt install python3-ldap import ldap from pprint import pprint ldapconn = ldap.initialize('ldap://ldap.forumsys.com:389') ldapconn.simple_bind_s('cn=read-only-admin,dc=example,dc=com', 'password') base_dn = 'dc=example,dc=com' print(\"\\nsearch_filter = 'ou=scientists'\") search_filter = 'ou=scientists' result = ldapconn.search_s(base_dn, ldap.SCOPE_SUBTREE, search_filter, None) pprint(result) print(\"\\nsearch_filter = 'uid=tesla'\") search_filter = 'uid=tesla' result = ldapconn.search_s(base_dn, ldap.SCOPE_SUBTREE, search_filter, None) pprint(result) search_filter = 'ou=scientists' [('ou=scientists,dc=example,dc=com', {'cn': [b'Scientists'], 'objectClass': [b'groupOfUniqueNames', b'top'], 'ou': [b'scientists'], 'uniqueMember': [b'uid=einstein,dc=example,dc=com', b'uid=galieleo,dc=example,dc=com', b'uid=tesla,dc=example,dc=com', b'uid=newton,dc=example,dc=com', b'uid=training,dc=example,dc=com', b'uid=jmacy,dc=example,dc=com']})] search_filter = 'uid=tesla' [('uid=tesla,dc=example,dc=com', {'cn': [b'Nikola Tesla'], 'gidNumber': [b'99999'], 'homeDirectory': [b'home'], 'mail': [b'tesla@ldap.forumsys.com'], 'objectClass': [b'inetOrgPerson', b'organizationalPerson', b'person', b'top', b'posixAccount'], 'sn': [b'Tesla'], 'uid': [b'tesla'], 'uidNumber': [b'88888']})]","title":"python3-ldap"},{"location":"python/ldap/#ldap-test-server","text":"","title":"ldap test server"},{"location":"python/ldap/#zflexldapadministrator","text":"LDAP Server Connection Info: Server: www.zflexldap.com Port: 389 Bind DN: cn=ro_admin,ou=sysadmins,dc=zflexsoftware,dc=com Bind Password: zflexpass Other Users IDs and their passwords are: uid=guest1,ou=users,ou=guests,dc=zflexsoftware,dc=com guest1password uid=guest2,ou=users,ou=guests,dc=zflexsoftware,dc=com guest2password uid=guest3,ou=users,ou=guests,dc=zflexsoftware,dc=com guest3password https://www.zflexldapadministrator.com/index.php/blog/82-free-online-ldap","title":"zflexldapadministrator"},{"location":"python/ldap/#forumsys","text":"Here are the credentials for an Online LDAP Test Server that you can use for testing your applications that require LDAP-based authentication. Our goal is to eliminate the need for you to download, install and configure an LDAP sever for testing. If all you need is to test connectivity and authentication against a few identities, you have come to the right place. LDAP Server Information (read-only access): Server: ldap.forumsys.com Port: 389 Bind DN: cn=read-only-admin,dc=example,dc=com Bind Password: password All user passwords are password . You may also bind to individual Users (uid) or the two Groups (ou) that include: ou=mathematicians,dc=example,dc=com riemann gauss euler euclid ou=scientists,dc=example,dc=com einstein newton galieleo tesla https://www.forumsys.com/tutorials/integration-how-to/ldap/online-ldap-test-server/","title":"forumsys"},{"location":"python/logging/","text":"logging \u65e5\u5fd7\u7ea7\u522b\u7b49\u7ea7 CRITICAL > ERROR > WARNING > INFO > DEBUG > NOTSET #!/usr/bin/env python # coding:utf-8 import logging logging.basicConfig( level=logging.DEBUG, format='%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s', datefmt='%a, %d %b %Y %H:%M:%S', filename='test.log', filemode='w' ) logging.debug('debug message') logging.info('info message') logging.warning('warning message') logging.error('error message') logging.critical('critical message') %(name)s Logger\u7684\u540d\u5b57 %(levelno)s \u6570\u5b57\u5f62\u5f0f\u7684\u65e5\u5fd7\u7ea7\u522b %(levelname)s \u6587\u672c\u5f62\u5f0f\u7684\u65e5\u5fd7\u7ea7\u522b %(pathname)s \u8c03\u7528\u65e5\u5fd7\u8f93\u51fa\u51fd\u6570\u7684\u6a21\u5757\u7684\u5b8c\u6574\u8def\u5f84\u540d\uff0c\u53ef\u80fd\u6ca1\u6709 %(filename)s \u8c03\u7528\u65e5\u5fd7\u8f93\u51fa\u51fd\u6570\u7684\u6a21\u5757\u7684\u6587\u4ef6\u540d %(module)s \u8c03\u7528\u65e5\u5fd7\u8f93\u51fa\u51fd\u6570\u7684\u6a21\u5757\u540d %(funcName)s \u8c03\u7528\u65e5\u5fd7\u8f93\u51fa\u51fd\u6570\u7684\u51fd\u6570\u540d %(lineno)d \u8c03\u7528\u65e5\u5fd7\u8f93\u51fa\u51fd\u6570\u7684\u8bed\u53e5\u6240\u5728\u7684\u4ee3\u7801\u884c %(created)f \u5f53\u524d\u65f6\u95f4\uff0c\u7528UNIX\u6807\u51c6\u7684\u8868\u793a\u65f6\u95f4\u7684\u6d6e\u70b9\u6570\u8868\u793a %(relativeCreated)d \u8f93\u51fa\u65e5\u5fd7\u4fe1\u606f\u65f6\u7684\uff0c\u81eaLogger\u521b\u5efa\u4ee5 \u6765\u7684\u6beb\u79d2\u6570 %(asctime)s \u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u5f53\u524d\u65f6\u95f4\u3002\u9ed8\u8ba4\u683c\u5f0f\u662f \u201c2003-07-08 16:49:45,896\u201d\u3002\u9017\u53f7\u540e\u9762\u7684\u662f\u6beb\u79d2 %(thread)d \u7ebf\u7a0bID\u3002\u53ef\u80fd\u6ca1\u6709 %(threadName)s \u7ebf\u7a0b\u540d\u3002\u53ef\u80fd\u6ca1\u6709 %(process)d \u8fdb\u7a0bID\u3002\u53ef\u80fd\u6ca1\u6709 %(message)s\u7528\u6237\u8f93\u51fa\u7684\u6d88\u606f Django logging \u4ee3\u7801\u6587\u4ef6\u4e2d\uff0c\u76f4\u63a5\u53ef\u4ee5 get \u5230\u81ea\u5b9a\u4e49\u7684 onlyoffice logger\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684 onlyoffice logger \u6765\u5904\u7406\u3002 logger = logging.getLogger('onlyoffice') \u4ee3\u7801\u6587\u4ef6\u4e2d( seahub/api2/endpoints/upload_links.py )\uff0cget logger \u65f6\uff0c\u83b7\u53d6\u5230\u7684\u662f __name__ \uff08 seahub.api2.endpoints.upload_links \uff09\uff0c\u6309\u5c42\u7ea7\u5173\u7cfb\u4f9d\u6b21\u5411\u4e0a\u5bfb\u627e logger\u3002 logger = logging.getLogger(__name__) logger.error('in upload link') \u5982\u679c\u81ea\u5b9a\u4e49\u6216\u8005\u5c42\u7ea7\u5173\u7cfb\u5747\u672a\u627e\u5230 logger\uff0c\u5219\u4f7f\u7528 root\uff08\u6216 '' \uff09\u5b9a\u4e49\u7684 logger\u3002 settins.py LOGGING = { 'version': 1, 'disable_existing_loggers': False, 'formatters': { 'upload_link_format': { 'format': '%(lineno)s %(funcName)s %(message)s', }, 'standard': { 'format': '%(asctime)s [%(levelname)s] %(name)s:%(lineno)s %(funcName)s %(message)s', } }, 'filters': { 'require_debug_false': { '()': 'django.utils.log.RequireDebugFalse' }, 'require_debug_true': { '()': 'django.utils.log.RequireDebugTrue' }, }, 'handlers': { 'upload_link_handler': { 'level': 'DEBUG', 'class': 'logging.StreamHandler', 'formatter': 'upload_link_format', }, 'console': { 'level': 'DEBUG', 'filters': ['require_debug_true'], 'class': 'logging.StreamHandler', 'formatter': 'standard', }, 'default': { 'level': 'INFO', 'class': 'logging.handlers.RotatingFileHandler', 'filename': os.path.join(LOG_DIR, 'seahub.log'), 'maxBytes': 1024*1024*100, # 100 MB 'backupCount': 5, 'formatter': 'standard', }, 'onlyoffice_handler': { 'level': 'INFO', 'class': 'logging.handlers.RotatingFileHandler', 'filename': os.path.join(LOG_DIR, 'onlyoffice.log'), 'maxBytes': 1024*1024*100, # 100 MB 'backupCount': 5, 'formatter': 'standard', }, }, 'loggers': { '': { # \u9ed8\u8ba4 logger 'handlers': ['default'], 'level': 'INFO', 'propagate': True }, 'seahub.api2.endpoints': { # \u6309\u5c42\u7ea7\u5173\u7cfb\u4f9d\u6b21\u5411\u4e0a\u5bfb\u627e logger 'handlers': ['upload_link_handler', ], 'level': 'DEBUG', 'propagate': False }, 'onlyoffice': { # \u81ea\u5b9a\u4e49\u7684 onlyoffice logger 'handlers': ['onlyoffice_handler', ], 'level': 'INFO', 'propagate': False }, 'django.db.backends': { 'handlers': ['console'], 'level': \"DEBUG\", 'propagate': False, }, } }","title":"logging"},{"location":"python/logging/#logging","text":"\u65e5\u5fd7\u7ea7\u522b\u7b49\u7ea7 CRITICAL > ERROR > WARNING > INFO > DEBUG > NOTSET #!/usr/bin/env python # coding:utf-8 import logging logging.basicConfig( level=logging.DEBUG, format='%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s', datefmt='%a, %d %b %Y %H:%M:%S', filename='test.log', filemode='w' ) logging.debug('debug message') logging.info('info message') logging.warning('warning message') logging.error('error message') logging.critical('critical message') %(name)s Logger\u7684\u540d\u5b57 %(levelno)s \u6570\u5b57\u5f62\u5f0f\u7684\u65e5\u5fd7\u7ea7\u522b %(levelname)s \u6587\u672c\u5f62\u5f0f\u7684\u65e5\u5fd7\u7ea7\u522b %(pathname)s \u8c03\u7528\u65e5\u5fd7\u8f93\u51fa\u51fd\u6570\u7684\u6a21\u5757\u7684\u5b8c\u6574\u8def\u5f84\u540d\uff0c\u53ef\u80fd\u6ca1\u6709 %(filename)s \u8c03\u7528\u65e5\u5fd7\u8f93\u51fa\u51fd\u6570\u7684\u6a21\u5757\u7684\u6587\u4ef6\u540d %(module)s \u8c03\u7528\u65e5\u5fd7\u8f93\u51fa\u51fd\u6570\u7684\u6a21\u5757\u540d %(funcName)s \u8c03\u7528\u65e5\u5fd7\u8f93\u51fa\u51fd\u6570\u7684\u51fd\u6570\u540d %(lineno)d \u8c03\u7528\u65e5\u5fd7\u8f93\u51fa\u51fd\u6570\u7684\u8bed\u53e5\u6240\u5728\u7684\u4ee3\u7801\u884c %(created)f \u5f53\u524d\u65f6\u95f4\uff0c\u7528UNIX\u6807\u51c6\u7684\u8868\u793a\u65f6\u95f4\u7684\u6d6e\u70b9\u6570\u8868\u793a %(relativeCreated)d \u8f93\u51fa\u65e5\u5fd7\u4fe1\u606f\u65f6\u7684\uff0c\u81eaLogger\u521b\u5efa\u4ee5 \u6765\u7684\u6beb\u79d2\u6570 %(asctime)s \u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u5f53\u524d\u65f6\u95f4\u3002\u9ed8\u8ba4\u683c\u5f0f\u662f \u201c2003-07-08 16:49:45,896\u201d\u3002\u9017\u53f7\u540e\u9762\u7684\u662f\u6beb\u79d2 %(thread)d \u7ebf\u7a0bID\u3002\u53ef\u80fd\u6ca1\u6709 %(threadName)s \u7ebf\u7a0b\u540d\u3002\u53ef\u80fd\u6ca1\u6709 %(process)d \u8fdb\u7a0bID\u3002\u53ef\u80fd\u6ca1\u6709 %(message)s\u7528\u6237\u8f93\u51fa\u7684\u6d88\u606f","title":"logging"},{"location":"python/logging/#django-logging","text":"\u4ee3\u7801\u6587\u4ef6\u4e2d\uff0c\u76f4\u63a5\u53ef\u4ee5 get \u5230\u81ea\u5b9a\u4e49\u7684 onlyoffice logger\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684 onlyoffice logger \u6765\u5904\u7406\u3002 logger = logging.getLogger('onlyoffice') \u4ee3\u7801\u6587\u4ef6\u4e2d( seahub/api2/endpoints/upload_links.py )\uff0cget logger \u65f6\uff0c\u83b7\u53d6\u5230\u7684\u662f __name__ \uff08 seahub.api2.endpoints.upload_links \uff09\uff0c\u6309\u5c42\u7ea7\u5173\u7cfb\u4f9d\u6b21\u5411\u4e0a\u5bfb\u627e logger\u3002 logger = logging.getLogger(__name__) logger.error('in upload link') \u5982\u679c\u81ea\u5b9a\u4e49\u6216\u8005\u5c42\u7ea7\u5173\u7cfb\u5747\u672a\u627e\u5230 logger\uff0c\u5219\u4f7f\u7528 root\uff08\u6216 '' \uff09\u5b9a\u4e49\u7684 logger\u3002 settins.py LOGGING = { 'version': 1, 'disable_existing_loggers': False, 'formatters': { 'upload_link_format': { 'format': '%(lineno)s %(funcName)s %(message)s', }, 'standard': { 'format': '%(asctime)s [%(levelname)s] %(name)s:%(lineno)s %(funcName)s %(message)s', } }, 'filters': { 'require_debug_false': { '()': 'django.utils.log.RequireDebugFalse' }, 'require_debug_true': { '()': 'django.utils.log.RequireDebugTrue' }, }, 'handlers': { 'upload_link_handler': { 'level': 'DEBUG', 'class': 'logging.StreamHandler', 'formatter': 'upload_link_format', }, 'console': { 'level': 'DEBUG', 'filters': ['require_debug_true'], 'class': 'logging.StreamHandler', 'formatter': 'standard', }, 'default': { 'level': 'INFO', 'class': 'logging.handlers.RotatingFileHandler', 'filename': os.path.join(LOG_DIR, 'seahub.log'), 'maxBytes': 1024*1024*100, # 100 MB 'backupCount': 5, 'formatter': 'standard', }, 'onlyoffice_handler': { 'level': 'INFO', 'class': 'logging.handlers.RotatingFileHandler', 'filename': os.path.join(LOG_DIR, 'onlyoffice.log'), 'maxBytes': 1024*1024*100, # 100 MB 'backupCount': 5, 'formatter': 'standard', }, }, 'loggers': { '': { # \u9ed8\u8ba4 logger 'handlers': ['default'], 'level': 'INFO', 'propagate': True }, 'seahub.api2.endpoints': { # \u6309\u5c42\u7ea7\u5173\u7cfb\u4f9d\u6b21\u5411\u4e0a\u5bfb\u627e logger 'handlers': ['upload_link_handler', ], 'level': 'DEBUG', 'propagate': False }, 'onlyoffice': { # \u81ea\u5b9a\u4e49\u7684 onlyoffice logger 'handlers': ['onlyoffice_handler', ], 'level': 'INFO', 'propagate': False }, 'django.db.backends': { 'handlers': ['console'], 'level': \"DEBUG\", 'propagate': False, }, } }","title":"Django logging"},{"location":"python/notebook/","text":"","title":"notebook"},{"location":"python/pil/","text":"PIL crop image from PIL import Image filename = r'screencapture-joinquant-research-2020-11-19-15_36_46.jpg' img = Image.open(filename) size = img.size height = [0, 2800, 4300, 10300, 16300, 22300] for i in range(len(height)): if i+1 >= len(height): break sub_img = img.crop((0, height[i], size[0], height[i+1])) sub_img.save('tmp_{0}.png'.format(i))","title":"PIL"},{"location":"python/pil/#pil","text":"","title":"PIL"},{"location":"python/pil/#crop-image","text":"from PIL import Image filename = r'screencapture-joinquant-research-2020-11-19-15_36_46.jpg' img = Image.open(filename) size = img.size height = [0, 2800, 4300, 10300, 16300, 22300] for i in range(len(height)): if i+1 >= len(height): break sub_img = img.crop((0, height[i], size[0], height[i+1])) sub_img.save('tmp_{0}.png'.format(i))","title":"crop image"},{"location":"python/python/","text":"pip install mysqlclient ubuntu 20.04 python 3.8.0 Python.h: No such file or directory sudo apt-get install python3-dev sudo apt install libpython3.8-dev","title":"Python"},{"location":"python/re/","text":"re In [1]: import re In [2]: line = 'CREATE TABLE IF NOT EXISTS `api2_tokenv2` (`key` varchar(40) NOT NULL PRIMARY KEY...' In [3]: m = re.search('CREATE TABLE(?: IF NOT EXISTS)? [`\"]?(\\w+)[`\"]?(\\s*\\(.*)', line) In [4]: m.groups() Out[4]: ('api2_tokenv2', ' (`key` varchar(40) NOT NULL PRIMARY KEY...') \\1 \\2 \u5206\u522b\u4ee3\u8868\u4ec0\u4e48\u4e86\u5462\uff1f\u5176\u5b9e\u4ee3\u8868\u7684\u5c31\u662f group(1) \u548c group(2) \uff0c\u53ef\u4ee5\u5f15\u7528\u5df2\u7ecf\u5339\u914d\u51fa\u6765\u7684\u5b57\u7b26\u4e32\u3002 In [1]: import re In [2]: line = \"created_at datetime NOT NULL DEFAULT `1970-01-01 00:00:00`,\" In [3]: line = re.sub(r\"default `([^`]*)`\", r\"default '\\1'\", line, 0, re.IGNORECASE) In [4]: line Out[4]: \"created_at datetime NOT NULL default '1970-01-01 00:00:00',\"","title":"re"},{"location":"python/re/#re","text":"In [1]: import re In [2]: line = 'CREATE TABLE IF NOT EXISTS `api2_tokenv2` (`key` varchar(40) NOT NULL PRIMARY KEY...' In [3]: m = re.search('CREATE TABLE(?: IF NOT EXISTS)? [`\"]?(\\w+)[`\"]?(\\s*\\(.*)', line) In [4]: m.groups() Out[4]: ('api2_tokenv2', ' (`key` varchar(40) NOT NULL PRIMARY KEY...') \\1 \\2 \u5206\u522b\u4ee3\u8868\u4ec0\u4e48\u4e86\u5462\uff1f\u5176\u5b9e\u4ee3\u8868\u7684\u5c31\u662f group(1) \u548c group(2) \uff0c\u53ef\u4ee5\u5f15\u7528\u5df2\u7ecf\u5339\u914d\u51fa\u6765\u7684\u5b57\u7b26\u4e32\u3002 In [1]: import re In [2]: line = \"created_at datetime NOT NULL DEFAULT `1970-01-01 00:00:00`,\" In [3]: line = re.sub(r\"default `([^`]*)`\", r\"default '\\1'\", line, 0, re.IGNORECASE) In [4]: line Out[4]: \"created_at datetime NOT NULL default '1970-01-01 00:00:00',\"","title":"re"},{"location":"python/restful-api/","text":"restful api example from dropbox api \u6279\u91cf\u5220\u9664\u6587\u4ef6 https://www.dropbox.com/developers/documentation/http/documentation#files-delete_batch \u8bf7\u6c42 curl -X POST https://api.dropboxapi.com/2/files/delete_batch \u53c2\u6570 { \"entries\": [ { \"path\": \"/Homework/math/Prime_Numbers.txt\" } ] } \u6279\u91cf\u79fb\u52a8\u6587\u4ef6 \u8bf7\u6c42 curl -X POST https://api.dropboxapi.com/2/files/move_batch \u53c2\u6570 { \"entries\": [ { \"from_path\": \"/Homework/math\", \"to_path\": \"/Homework/algebra\" } ], \"allow_shared_folder\": false, \"autorename\": false } reference http://www.restapitutorial.com/lessons/whatisrest.html https://developers.google.com/drive/v3/web/batch https://developers.facebook.com/docs/graph-api/making-multiple-requests?locale=en_US https://docs.box.com/reference#files","title":"restful-api"},{"location":"python/restful-api/#restful-api","text":"","title":"restful api"},{"location":"python/restful-api/#example","text":"from dropbox api","title":"example"},{"location":"python/restful-api/#_1","text":"https://www.dropbox.com/developers/documentation/http/documentation#files-delete_batch \u8bf7\u6c42 curl -X POST https://api.dropboxapi.com/2/files/delete_batch \u53c2\u6570 { \"entries\": [ { \"path\": \"/Homework/math/Prime_Numbers.txt\" } ] }","title":"\u6279\u91cf\u5220\u9664\u6587\u4ef6"},{"location":"python/restful-api/#_2","text":"\u8bf7\u6c42 curl -X POST https://api.dropboxapi.com/2/files/move_batch \u53c2\u6570 { \"entries\": [ { \"from_path\": \"/Homework/math\", \"to_path\": \"/Homework/algebra\" } ], \"allow_shared_folder\": false, \"autorename\": false }","title":"\u6279\u91cf\u79fb\u52a8\u6587\u4ef6"},{"location":"python/restful-api/#reference","text":"http://www.restapitutorial.com/lessons/whatisrest.html https://developers.google.com/drive/v3/web/batch https://developers.facebook.com/docs/graph-api/making-multiple-requests?locale=en_US https://docs.box.com/reference#files","title":"reference"},{"location":"python/scripts/deactive%20users/","text":"\u8981\u5728 shell \u811a\u672c\u4e2d\u5bf9\u6bcf\u4e2a email \u53d1\u9001\u4e00\u4e2a HTTP PUT \u8bf7\u6c42\uff0c\u4f60\u53ef\u4ee5\u5c06 curl \u547d\u4ee4\u5d4c\u5165\u5230 for \u5faa\u73af\u4e2d\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b\u811a\u672c\uff0c\u5c55\u793a\u4e86\u5982\u4f55\u5bf9\u6bcf\u4e2a email \u5730\u5740\u6267\u884c curl \u8bf7\u6c42\u3002 \u811a\u672c\u793a\u4f8b #!/bin/bash # \u6307\u5b9a\u6587\u4ef6\u540d file=\"emails.txt\" # API \u8bf7\u6c42\u7684\u57fa\u7840 URL \u548c Token base_url=\"https://cloud.seafile.com/api/v2.1/admin/users\" token=\"f2d84d433a7d6a255e27f325c1050df48e8c26ac\" # \u4f7f\u7528 while \u5faa\u73af\u9010\u884c\u8bfb\u53d6\u6587\u4ef6 while IFS= read -r email do # \u6784\u9020 curl \u547d\u4ee4 curl -X PUT \\ -d \"is_active=false\" \\ -H \"Authorization: Token $token\" \\ -H \"Accept: application/json; charset=utf-8; indent=4\" \\ \"$base_url/$email/\" # \u53ef\u9009\uff1a\u5728\u6bcf\u6b21\u8bf7\u6c42\u540e\u6dfb\u52a0\u4e00\u4e2a\u8f93\u51fa\uff0c\u4fbf\u4e8e\u8ddf\u8e2a\u5904\u7406\u8fdb\u5ea6 echo \"Processed email: $email\" done < \"$file\" \u811a\u672c\u8bf4\u660e \u53d8\u91cf\u58f0\u660e : file=\"emails.txt\" : \u6307\u5b9a\u5305\u542b email \u5730\u5740\u7684\u6587\u4ef6\u540d\u3002 base_url : API \u7684\u57fa\u7840 URL\u3002 token : \u7528\u4e8e\u6388\u6743\u7684 API Token\u3002 \u8bfb\u53d6\u6587\u4ef6 : while IFS= read -r email : \u4f7f\u7528 while \u5faa\u73af\u9010\u884c\u8bfb\u53d6\u6587\u4ef6\u4e2d\u7684 email \u5730\u5740\u3002 \u53d1\u9001 curl \u8bf7\u6c42 : curl -X PUT \uff1a\u4f7f\u7528 curl \u547d\u4ee4\u53d1\u9001 HTTP PUT \u8bf7\u6c42\u3002 -d \"is_active=false\" \uff1a\u8bbe\u7f6e\u8bf7\u6c42\u4f53\u6570\u636e\uff0c\u8fd9\u91cc\u5c06 is_active \u5b57\u6bb5\u8bbe\u7f6e\u4e3a false \u3002 -H \"Authorization: Token $token\" \uff1a\u6dfb\u52a0\u8bf7\u6c42\u5934\uff0c\u7528\u4e8e\u8ba4\u8bc1\u3002 -H \"Accept: application/json; charset=utf-8; indent=4\" \uff1a\u8bbe\u7f6e\u8bf7\u6c42\u5934\uff0c\u6307\u5b9a\u63a5\u53d7\u7684\u54cd\u5e94\u7c7b\u578b\u4e3a JSON\u3002 \"$base_url/$email/\" : \u6784\u9020\u8bf7\u6c42\u7684\u5b8c\u6574 URL\uff0c\u5305\u542b email \u5730\u5740\u3002 \u5904\u7406\u8f93\u51fa : echo \"Processed email: $email\" \uff1a\u53ef\u9009\uff0c\u7528\u4e8e\u8f93\u51fa\u6bcf\u6b21\u5904\u7406\u7684 email\uff0c\u4fbf\u4e8e\u8ddf\u8e2a\u811a\u672c\u7684\u6267\u884c\u8fc7\u7a0b\u3002 \u8fd0\u884c\u811a\u672c \u521b\u5efa\u6587\u4ef6 : \u521b\u5efa\u4e00\u4e2a\u5305\u542b email \u5730\u5740\u7684\u6587\u4ef6\uff0c\u4f8b\u5982 emails.txt \uff0c\u6bcf\u884c\u4e00\u4e2a email\u3002 email1@example.com email2@example.com email3@example.com \u4fdd\u5b58\u811a\u672c : \u5c06\u4e0a\u8ff0\u811a\u672c\u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u6bd4\u5982 process_emails.sh \u3002 \u7ed9\u4e88\u6267\u884c\u6743\u9650 : \u4f7f\u811a\u672c\u53ef\u6267\u884c\u3002 bash chmod +x process_emails.sh \u8fd0\u884c\u811a\u672c : bash ./process_emails.sh \u786e\u4fdd\u4f60\u5728\u5b9e\u9645\u4f7f\u7528\u811a\u672c\u4e4b\u524d\uff0c\u5df2\u7ecf\u68c0\u67e5\u4e86\u6240\u6709\u7684\u8bf7\u6c42\u53c2\u6570\u548c API URL \u7684\u6b63\u786e\u6027\uff0c\u4ee5\u907f\u514d\u610f\u5916\u7684\u66f4\u6539\u6216\u9519\u8bef\u3002","title":"Deactive users"},{"location":"python/scripts/deactive%20users/#_1","text":"#!/bin/bash # \u6307\u5b9a\u6587\u4ef6\u540d file=\"emails.txt\" # API \u8bf7\u6c42\u7684\u57fa\u7840 URL \u548c Token base_url=\"https://cloud.seafile.com/api/v2.1/admin/users\" token=\"f2d84d433a7d6a255e27f325c1050df48e8c26ac\" # \u4f7f\u7528 while \u5faa\u73af\u9010\u884c\u8bfb\u53d6\u6587\u4ef6 while IFS= read -r email do # \u6784\u9020 curl \u547d\u4ee4 curl -X PUT \\ -d \"is_active=false\" \\ -H \"Authorization: Token $token\" \\ -H \"Accept: application/json; charset=utf-8; indent=4\" \\ \"$base_url/$email/\" # \u53ef\u9009\uff1a\u5728\u6bcf\u6b21\u8bf7\u6c42\u540e\u6dfb\u52a0\u4e00\u4e2a\u8f93\u51fa\uff0c\u4fbf\u4e8e\u8ddf\u8e2a\u5904\u7406\u8fdb\u5ea6 echo \"Processed email: $email\" done < \"$file\"","title":"\u811a\u672c\u793a\u4f8b"},{"location":"python/scripts/deactive%20users/#_2","text":"\u53d8\u91cf\u58f0\u660e : file=\"emails.txt\" : \u6307\u5b9a\u5305\u542b email \u5730\u5740\u7684\u6587\u4ef6\u540d\u3002 base_url : API \u7684\u57fa\u7840 URL\u3002 token : \u7528\u4e8e\u6388\u6743\u7684 API Token\u3002 \u8bfb\u53d6\u6587\u4ef6 : while IFS= read -r email : \u4f7f\u7528 while \u5faa\u73af\u9010\u884c\u8bfb\u53d6\u6587\u4ef6\u4e2d\u7684 email \u5730\u5740\u3002 \u53d1\u9001 curl \u8bf7\u6c42 : curl -X PUT \uff1a\u4f7f\u7528 curl \u547d\u4ee4\u53d1\u9001 HTTP PUT \u8bf7\u6c42\u3002 -d \"is_active=false\" \uff1a\u8bbe\u7f6e\u8bf7\u6c42\u4f53\u6570\u636e\uff0c\u8fd9\u91cc\u5c06 is_active \u5b57\u6bb5\u8bbe\u7f6e\u4e3a false \u3002 -H \"Authorization: Token $token\" \uff1a\u6dfb\u52a0\u8bf7\u6c42\u5934\uff0c\u7528\u4e8e\u8ba4\u8bc1\u3002 -H \"Accept: application/json; charset=utf-8; indent=4\" \uff1a\u8bbe\u7f6e\u8bf7\u6c42\u5934\uff0c\u6307\u5b9a\u63a5\u53d7\u7684\u54cd\u5e94\u7c7b\u578b\u4e3a JSON\u3002 \"$base_url/$email/\" : \u6784\u9020\u8bf7\u6c42\u7684\u5b8c\u6574 URL\uff0c\u5305\u542b email \u5730\u5740\u3002 \u5904\u7406\u8f93\u51fa : echo \"Processed email: $email\" \uff1a\u53ef\u9009\uff0c\u7528\u4e8e\u8f93\u51fa\u6bcf\u6b21\u5904\u7406\u7684 email\uff0c\u4fbf\u4e8e\u8ddf\u8e2a\u811a\u672c\u7684\u6267\u884c\u8fc7\u7a0b\u3002","title":"\u811a\u672c\u8bf4\u660e"},{"location":"python/scripts/deactive%20users/#_3","text":"\u521b\u5efa\u6587\u4ef6 : \u521b\u5efa\u4e00\u4e2a\u5305\u542b email \u5730\u5740\u7684\u6587\u4ef6\uff0c\u4f8b\u5982 emails.txt \uff0c\u6bcf\u884c\u4e00\u4e2a email\u3002 email1@example.com email2@example.com email3@example.com \u4fdd\u5b58\u811a\u672c : \u5c06\u4e0a\u8ff0\u811a\u672c\u4fdd\u5b58\u5230\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u6bd4\u5982 process_emails.sh \u3002 \u7ed9\u4e88\u6267\u884c\u6743\u9650 : \u4f7f\u811a\u672c\u53ef\u6267\u884c\u3002 bash chmod +x process_emails.sh \u8fd0\u884c\u811a\u672c : bash ./process_emails.sh \u786e\u4fdd\u4f60\u5728\u5b9e\u9645\u4f7f\u7528\u811a\u672c\u4e4b\u524d\uff0c\u5df2\u7ecf\u68c0\u67e5\u4e86\u6240\u6709\u7684\u8bf7\u6c42\u53c2\u6570\u548c API URL \u7684\u6b63\u786e\u6027\uff0c\u4ee5\u907f\u514d\u610f\u5916\u7684\u66f4\u6539\u6216\u9519\u8bef\u3002","title":"\u8fd0\u884c\u811a\u672c"},{"location":"python/scripts/x-days-new-high/%E7%99%BE%E6%97%A5%E6%96%B0%E9%AB%98%E7%AE%97%E6%B3%95/","text":"\u767e\u65e5\u65b0\u9ad8 \u5df2\u77e5\u4e00\u53ea\u80a1\u7968\u8fc7\u53bb 200 \u5929\u7684\u4ef7\u683c [Price1, Price2, Price3, ..., Price100, Price101, ..., Price200] \u6c42\u6700\u8fd1 100 \u5929\u4e2d\uff08Price100 ~ Price200\uff09\u90fd\u6709\u54ea\u51e0\u5929\u521b\u4e86\u767e\u65e5\u65b0\u9ad8\u3002 \u7b97\u6cd5 \u7b97\u7b2c 100 \u5929\u7684\u4ef7\u683c Price100 \u662f\u5426\u521b\u4e86\u767e\u65e5\u65b0\u9ad8\u3002 \u6c42\u51fa\u76f8\u5bf9 Price100 \u4e4b\u524d 99 \u5929\u7684\u4ef7\u683c [Price1, Price2, Price3, ..., Price99] \u4e2d\uff0c\u80a1\u4ef7\u6700\u9ad8\u662f\u54ea\u5929\uff0c\u5047\u8bbe\u4e3a PriceX\u3002 \u5982\u679c Price100 > PriceX\uff0c\u5219 Price100 \u521b\u4e86\u767e\u65e5\u65b0\u9ad8\uff0c\u7b26\u5408\u6761\u4ef6\uff0c\u5e76\u5c06 PrcieX \u91cd\u65b0\u8d4b\u503c\u4e3a Price100\u3002 \u7b97\u7b2c 101 \u5929\u7684\u4ef7\u683c Price101 \u662f\u5426\u521b\u4e86\u767e\u65e5\u65b0\u9ad8\u3002 \u6b64\u65f6\uff0c\u518d\u83b7\u53d6\u76f8\u5bf9 Price101 \u4e4b\u524d 99 \u5929\u7684\u4ef7\u683c\u4e2d\u80a1\u4ef7\u6700\u9ad8\u662f\u54ea\u5929\u65f6\uff0c\u4e0d\u9700\u8981\u8ba1\u7b97 [Price2, Price3, Price4, ..., Price100] \uff0c\u56e0\u4e3a\u6839\u636e\u4e0a\u6b21\uff08\u7b2c 100 \u5929\uff09\u7684\u8ba1\u7b97\uff0c\u5df2\u77e5\u662f PriceX \u4e86\u3002 \u5982\u679c Price101 > PriceX\uff0c\u5219 Price101 \u521b\u4e86\u767e\u65e5\u65b0\u9ad8\uff0c\u7b26\u5408\u6761\u4ef6\uff0c\u5e76\u5c06 PrcieX \u91cd\u65b0\u8d4b\u503c\u4e3a Price101\u3002 \u4ee5\u6b64\u7c7b\u63a8\u8ba1\u7b97\u5230\u7b2c 200 \u5929\u3002 \u6ce8\u610f \u8ba1\u7b97\u7b2c Y \u5929\u7684\u4ef7\u683c PriceY \u662f\u5426\u521b\u4e86\u767e\u65e5\u65b0\u9ad8\u65f6\uff0c\u53ea\u8981 PriceX \u5728\u76f8\u5bf9 PriceY \u4e4b\u524d\u7684 99 \u5929\u4e2d\uff0c\u5373\u53ef\u76f4\u63a5\u5bf9\u6bd4 PriceY \u548c PriceX\u3002\u5426\u5219\u9700\u8981\u518d\u6b21\u8ba1\u7b97\u76f8\u5bf9 PriceY \u4e4b\u524d 99 \u5929\u7684\u4ef7\u683c\u4e2d\uff0c\u80a1\u4ef7\u6700\u9ad8\u662f\u54ea\u5929\u3002","title":"\u767e\u65e5\u65b0\u9ad8"},{"location":"python/scripts/x-days-new-high/%E7%99%BE%E6%97%A5%E6%96%B0%E9%AB%98%E7%AE%97%E6%B3%95/#_1","text":"\u5df2\u77e5\u4e00\u53ea\u80a1\u7968\u8fc7\u53bb 200 \u5929\u7684\u4ef7\u683c [Price1, Price2, Price3, ..., Price100, Price101, ..., Price200] \u6c42\u6700\u8fd1 100 \u5929\u4e2d\uff08Price100 ~ Price200\uff09\u90fd\u6709\u54ea\u51e0\u5929\u521b\u4e86\u767e\u65e5\u65b0\u9ad8\u3002","title":"\u767e\u65e5\u65b0\u9ad8"},{"location":"python/scripts/x-days-new-high/%E7%99%BE%E6%97%A5%E6%96%B0%E9%AB%98%E7%AE%97%E6%B3%95/#_2","text":"\u7b97\u7b2c 100 \u5929\u7684\u4ef7\u683c Price100 \u662f\u5426\u521b\u4e86\u767e\u65e5\u65b0\u9ad8\u3002 \u6c42\u51fa\u76f8\u5bf9 Price100 \u4e4b\u524d 99 \u5929\u7684\u4ef7\u683c [Price1, Price2, Price3, ..., Price99] \u4e2d\uff0c\u80a1\u4ef7\u6700\u9ad8\u662f\u54ea\u5929\uff0c\u5047\u8bbe\u4e3a PriceX\u3002 \u5982\u679c Price100 > PriceX\uff0c\u5219 Price100 \u521b\u4e86\u767e\u65e5\u65b0\u9ad8\uff0c\u7b26\u5408\u6761\u4ef6\uff0c\u5e76\u5c06 PrcieX \u91cd\u65b0\u8d4b\u503c\u4e3a Price100\u3002 \u7b97\u7b2c 101 \u5929\u7684\u4ef7\u683c Price101 \u662f\u5426\u521b\u4e86\u767e\u65e5\u65b0\u9ad8\u3002 \u6b64\u65f6\uff0c\u518d\u83b7\u53d6\u76f8\u5bf9 Price101 \u4e4b\u524d 99 \u5929\u7684\u4ef7\u683c\u4e2d\u80a1\u4ef7\u6700\u9ad8\u662f\u54ea\u5929\u65f6\uff0c\u4e0d\u9700\u8981\u8ba1\u7b97 [Price2, Price3, Price4, ..., Price100] \uff0c\u56e0\u4e3a\u6839\u636e\u4e0a\u6b21\uff08\u7b2c 100 \u5929\uff09\u7684\u8ba1\u7b97\uff0c\u5df2\u77e5\u662f PriceX \u4e86\u3002 \u5982\u679c Price101 > PriceX\uff0c\u5219 Price101 \u521b\u4e86\u767e\u65e5\u65b0\u9ad8\uff0c\u7b26\u5408\u6761\u4ef6\uff0c\u5e76\u5c06 PrcieX \u91cd\u65b0\u8d4b\u503c\u4e3a Price101\u3002 \u4ee5\u6b64\u7c7b\u63a8\u8ba1\u7b97\u5230\u7b2c 200 \u5929\u3002","title":"\u7b97\u6cd5"},{"location":"python/scripts/x-days-new-high/%E7%99%BE%E6%97%A5%E6%96%B0%E9%AB%98%E7%AE%97%E6%B3%95/#_3","text":"\u8ba1\u7b97\u7b2c Y \u5929\u7684\u4ef7\u683c PriceY \u662f\u5426\u521b\u4e86\u767e\u65e5\u65b0\u9ad8\u65f6\uff0c\u53ea\u8981 PriceX \u5728\u76f8\u5bf9 PriceY \u4e4b\u524d\u7684 99 \u5929\u4e2d\uff0c\u5373\u53ef\u76f4\u63a5\u5bf9\u6bd4 PriceY \u548c PriceX\u3002\u5426\u5219\u9700\u8981\u518d\u6b21\u8ba1\u7b97\u76f8\u5bf9 PriceY \u4e4b\u524d 99 \u5929\u7684\u4ef7\u683c\u4e2d\uff0c\u80a1\u4ef7\u6700\u9ad8\u662f\u54ea\u5929\u3002","title":"\u6ce8\u610f"},{"location":"saml2/saml2/","text":"saml2 saml\uff0cSecurity Assertion Markup Language\uff0c\u5b89\u5168\u65ad\u8a00\u6807\u8bb0\u8bed\u8a00\u3002 SP\uff0cService Provider \u670d\u52a1\u63d0\u4f9b\u65b9\u3002 IdP\uff0cIdentity Provider \u8eab\u4efd\u8ba4\u8bc1\u65b9\u3002 \u901a\u8fc7\u6d4f\u89c8\u5668 GET \u6216\u8005 POST \u8bf7\u6c42\u6765\u8f6c\u53d1\u8bf7\u6c42\u3001\u4ea4\u4e92\u4fe1\u606f\u3002 IAM\uff0cIdentity and Access Management. IdP Metadata.xml \u53c2\u6570 \u542b\u4e49 entityID IdP \u552f\u4e00\u6807\u8bc6\u3002 \u5efa\u8bae\u4f7f\u7528\u57df\u540d\u5f62\u5f0f\uff0c\u786e\u4fdd\u5168\u5c40\u552f\u4e00\u3002\u53d6\u503c\u4e2d\u8981\u5305\u542b\u201chttps://\u201d\u3002 \u793a\u4f8b\uff1ahttps://www.idp.com \u4e24\u4e2a \u5185\u7684\u503c \u662f\u4e00\u4efd\u5305\u542b\u516c\u94a5\u7684\u8bc1\u4e66\uff0c\u8be5\u8bc1\u4e66\u7528\u4e8e\u9a8c\u8bc1\u7b7e\u540d\u3002\u4e3a\u4e86\u786e\u4fdd\u5b89\u5168\u6027\uff0c\u5efa\u8bae\u4f7f\u7528\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e2048\u4f4d\u7684\u516c\u94a5\u3002SP\u901a\u8fc7IDP\u5143\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u7b7e\u540d\u8bc1\u4e66\u6765\u786e\u8ba4\u8ba4\u8bc1\u8fc7\u7a0b\u4e2d\u65ad\u8a00\u6d88\u606f\u7684\u53ef\u4fe1\u6027\u3001\u5b8c\u6574\u6027\u3002 <md:SingleLogoutService\u4e2dLocation\u7684\u503c \u4f1a\u8bdd\u6ce8\u9500\u529f\u80fd\u3002\u793a\u4f8b\uff1ahttps://www.idp.com/saml/logout <md:SingleSignOnService\u4e2dLocation\u7684\u503c IDP\u5904\u7406SAML\u8bf7\u6c42\u8ba4\u8bc1\u7684\u5730\u5740\uff0c\u7528\u4ee5\u63a5\u6536\u5904\u7406SAMLRequest\uff0c\u5e76\u751f\u6210SAMLResponse\uff0c\u793a\u4f8b\uff1ahttps://www.idp.com/saml/login \u767b\u5f55\u6d41\u7a0b \u672a\u767b\u5f55\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u5c06\u9875\u9762\u91cd\u5b9a\u5411\u5230 IdP\uff0c HTTP Redirect Binding https://samltest.id/idp/profile/SAML2/Redirect/SSO?SAMLRequest=fVNdj5swEHy%2FX4F4Twy0lyArSZUm%2FYiUJijQPvSl2rOXniWwqb3c5f59bZLr5aRrQAixnp3dmV1mDtqm48ue7vUB%2F%2FTo6CaKjm2jHR%2BO5nFvNTfglOMaWnScBC%2BX37Y8Gye8s4aMME38Kul6DjiHlpTRIWmznsf73aft%2Fstm96uWAlLI6izL8xon%2FkGAuywFuJ2K6URmaZokE6hD4g%2B0znPMY08ZvqOosOZBSbQ7X3Eel0VEXsxQw7keN9oRaPL4JEtHye0oS6sk5%2B9ynr3%2FGVBrj1YaaCC9J%2BocZyyoCTRjJZmSHfN6a9UgC2IydkCpLApiZbkPFMXZjY9KS6V%2FX7fh7gRy%2FGtVFaNiX1aBYvlszspo17doS7QPSuD3w%2FbUlW8qzabjxN8pz5N8yj6AcPFisGAW%2BuWDXrt4G90igQQCNmOX4Jf0jgcDN%2BvCNEo8DfFwfTa2Bfq%2FpNQXCBElR%2FUA5b12HQpVK5TxP5pl05jHlUUgPyOyPcYRe1X8vIQoh5X0LhAeKVqZtgOrXJgNHkHQWfCL6Ev4qvE7dsB6cXUNBRcB58OFfz0aK8P8%2FDhRVhZ888bS2aQ3yU9dsyttL26ejy%2F%2Fr8Vf&RelayState=http%3A%2F%2F127.0.0.1%3A8087%2F Query String Parameters\uff1a SAMLRequest \u3002 RelayState \uff0can URL parameter that we use to say to our Identity Provider where he should send the response back\u3002 \u4e0b\u9762 python3-saml-demo-django \u4ee3\u7801\u793a\u4f8b\u4e2d\uff0c\u914d\u7f6e saml/advanced_settings.json \u4e2d\u7684 \"authnRequestsSigned\": True, \uff0c\u5219\u4f1a\u4f7f\u7528 SigAlg \u548c Signature \u53c2\u6570\u3002 GET https://samltest.id/idp/profile/SAML2/Redirect/SSO?SAMLRequest=fVNNj9owEL3vr4hyBychfFlARaEfSBQikt1DL5WxJ11LiZ3ak13239cObJeVtiSHKOM3b%2Ba9Gc8sq6uGLlt8VAf404LFuyA41ZWytDuah61RVDMrLVWsBkuR03z5Y0uTfkQbo1FzXYXvkm7nMGvBoNTKJ23W83C%2F%2B7Ldf9vsfqWTMZsM4hFPh8ekTOPRMR0Mk%2Bl0cBSpGIppGsNUJCPmEx%2FAWMcxDx2l%2Fw%2BCzOgnKcDsXMV5mGcBOjFdDWtb2CiLTKHDR0nci4a9eFrEEY0GNI1%2BetTaoaVi2JE%2BIjaWEuLVeJq%2BFESKhji9payAeDEJOYCQBjiSPN97iuzixmephFS%2Fb9twPIMs%2FV4UWS%2Fb54WnWL6as9LKtjWYHMyT5HB%2F2J67ck3FybgfuTemk2gyJp8Yt%2BGis2Dm%2B6WdXrP4GF0DMsGQkRm5Br%2BlN9QbuFlnupL8pYv756s2NcP%2FS4pdAR%2BRold2UNoq2wCXpQQR%2FqNZVpV%2BXhlg6GaEpoUwIO%2BKX5YQRLeSzgWEEwYrXTfMSOtnAyfG8SL4TfQ1fFW5HTtAubi5hpxyj3PhzH2etRF%2Bfm6cIArDXPPa4MWkD8nPXZMbbS%2FuXo%2Bv79fiLw%3D%3D&RelayState=http%3A%2F%2F127.0.0.1%3A8087%2F&Signature=DKJ1wQO7FTxrt7mGh6ytws%2B8KvMaM5AdT1Ls3sBM5JSPZOMsCdvCwMWAOkGU8EE1LGtkFrD6mpjI%2B%2FXeejQ03e6LdjrtGCdVp0ht2tunEpsPv2Ia31%2FvSGs39jCBRmTkPOnl21Of8T%2BOnCfmjxs4qhpFX25KX0TxfhK%2BMP9ZXa1XKAcrdiLXC%2B0jNYQth75eCG%2BrvgW53inFfNy6diNdPqM0AjhCVqhSFezuBuw9BJciVXi9T8occUiWFDCOFn8ThjrJOB0eslft2%2Bx5GrKnjr8RO1so7WnSz1N5FIe5Uw0713iXD16BsM9xVHLHbA01E0SIy%2Bz40J3C4XZyhB43Vw%3D%3D&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256 SigAlg \uff0c\u53ef\u9009\uff0c\u7b7e\u540d\u7b97\u6cd5\uff08\u6bd4\u5982\uff1a http://www.w3.org/2001/04/xmldsig-more#rsa-sha256 \uff09\u3002 Signature \uff0c\u53ef\u9009\uff0c\u7b7e\u540d\u503c\u3002SP \u53d1\u8d77\u8bf7\u6c42\u524d\uff0c\u4f1a\u5c06\u8bf7\u6c42\u4e2d\u7684 SAMLRequest={SAMLRequest}&RelayState={RelayState}&SigAlg={SigAlg} \u4f7f\u7528 SP \u79c1\u94a5\u7b7e\u540d\uff08\u7b7e\u540d\u7b97\u6cd5\u4e3a SigAlg \u5b57\u6bb5\u6307\u5b9a\u7684\u7b97\u6cd5\uff09\uff0c\u4e4b\u540e\u518d\u505a\u4e00\u6b21 Base64 \u7f16\u7801\u4f5c\u4e3a\u7b7e\u540d\u503c\u3002 \u5982\u679c\u6709\u53c2\u6570\u7b7e\u540d\u7684\u8bdd\uff0cIdP \u6536\u5230\u8bf7\u6c42\u540e\u901a\u8fc7 SP \u516c\u94a5\uff08SP Metadata.xml\u6587\u4ef6\u4e2d <ds:X509Certificate></ds:X509Certificate> \u6807\u7b7e\u5185\u7684\u503c\uff09\u6765\u9a8c\u8bc1\u7b7e\u540d\u3002\u7b7e\u540d\u9a8c\u8bc1\u901a\u8fc7\uff0c\u5219\u8868\u660e\u662f\u5408\u6cd5 SP \u53d1\u9001\u7684\u8bf7\u6c42\u53ef\u4ee5\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\uff0c\u5426\u5219\u8bf7\u6c42\u975e\u6cd5\u3002 HTTP POST Binding POST https://win-mi64c2jsv9s.lian.local/adfs/ls/ Form Data: SAMLRequest \u3002 RelayState \u3002 \u663e\u793a Idp \u767b\u5f55\u9875\u9762\uff0c\u7528\u6237\u767b\u5f55\u6210\u529f\u540e\uff0cIdP \u53d1\u9001 POST \u8bf7\u6c42\uff08\u5c31\u662f\u4e00\u4e2a HTML form \u8868\u5355\u548c\u4e00\u6bb5\u7acb\u5373\u63d0\u4ea4\u8be5\u8868\u5355\u7684 JS \u4ee3\u7801\uff09\u7ed9 SP\uff08AssertionConsumerService\uff09\u5e76\u5e26\u4e0a\u4ee5\u4e0b\u53c2\u6570\uff1a POST https://demo.seafile.top/saml2/acs/ Form Data: SAMLResponse \u3002 RelayState \uff0csamlRequest\u4e2d\u76f8\u540c\u53c2\u6570\u503c\u3002 SP \u6536\u5230 SAMLResponse \u540e\uff0c\u89e3\u6790\u51fa\u7528\u6237\u4fe1\u606f\uff0c\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\u3002 Saml Tech Overview Referer Reloading SAML: Do you really need SAML? Reloading SAML : SAML Basics \u534e\u4e3a\u4e91 IDP Metadata.xml \u534e\u4e3a\u4e91 saml \u8ba4\u8bc1 Authing saml overview Tools decode SAML requests https://developers.onelogin.com/saml/online-tools/x509-certs/obtain-self-signed-certs python3-saml-demo-django https://github.com/imwhatiam/python3-saml-demo-django idp \u4f7f\u7528 https://samltest.id/ \u63d0\u4f9b\u7684\u670d\u52a1\u3002\u4e5f\u53ef\u5bf9\u63a5 onelogin \u63d0\u4f9b\u7684 idp \u670d\u52a1\uff0c\u5177\u4f53\u53c2\u8003\uff1ahttps://developers.onelogin.com/saml/python \u3002 sp \u4f7f\u7528 https://github.com/onelogin/python3-saml \u7528\u6cd5 \u8fd0\u884c\u547d\u4ee4\uff08\u4e5f\u53ef\u4e0b\u8f7d Dockerfile \u548c settings.json \u5230\u540c\u4e00\u76ee\u5f55\u540e\u81ea\u884c docker build -t imwhatiam/python3-saml-demo-django:v1 . \uff09\uff1a docker run -it -p 8000:8000 --name test-saml2 imwhatiam/python3-saml-demo-django:v1 bash \u8fdb\u5165\u5230\u5bb9\u5668\u540e\uff0c\u518d\u8fd0\u884c\uff1a python3 manage.py runserver 0.0.0.0:8000 \u7136\u540e\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee http://127.0.0.1:8000/ \u70b9\u51fb Login\uff0c\u4e4b\u540e\u8fdb\u5165\u5230 https://samltest.id/ \u7684\u767b\u5f55\u754c\u9762\uff0c\u6309\u63d0\u793a\u8f93\u5165\u7528\u6237\u540d\u5bc6\u7801\u540e\uff0c\u5373\u53ef\u8df3\u8f6c\u56de\u672c\u5730\uff0c\u5e76\u663e\u793a\u5df2\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f\u3002 \u989d\u5916\u8bf4\u660e \u4e0a\u4f20 metadata \u5230 https://samltest.id/ \u6211\u5df2\u7ecf\u9884\u5148\u8bbe\u7f6e\u597d\uff0c\u5982 sp \u8bbf\u95ee\u5730\u5740\u53d8\u4e86\uff0c\u9700\u8981\u91cd\u65b0\u4e0a\u4f20\uff1a \u8bbf\u95ee http{s}://new-domain-or-ip/metadata/ \u5e76\u5c06 xml \u6587\u4ef6\u4e0b\u8f7d\u5230\u672c\u5730\u3002 \u8bbf\u95ee https://samltest.id/upload.php \u5c06 xml \u6587\u4ef6\u4e0a\u4f20\u4e0a\u53bb\u3002 \u914d\u7f6e settings.json \u6211\u5df2\u9884\u5148\u914d\u7f6e\u597d: sp \u90e8\u5206\u4f7f\u7528 onelogin \u9ed8\u8ba4\u914d\u7f6e https://github.com/onelogin/python3-saml/blob/master/demo-django/saml/settings.json#L4 \uff0c\u4f46\u6ce8\u610f\u9700\u8981\u6539\u4e3a\u81ea\u5df1\u7684\u57df\u540d\u6216IP\u3002 sp \u4f7f\u7528\u81ea\u7b7e\u540d\u8bc1\u4e66\uff1a openssl req -new -x509 -days 3652 -nodes -out sp.crt -keyout sp.key idp \u90e8\u5206\u53c2\u8003 https://samltest.id/download/#SAMLtest%E2%80%99s_IdP","title":"saml2"},{"location":"saml2/saml2/#saml2","text":"saml\uff0cSecurity Assertion Markup Language\uff0c\u5b89\u5168\u65ad\u8a00\u6807\u8bb0\u8bed\u8a00\u3002 SP\uff0cService Provider \u670d\u52a1\u63d0\u4f9b\u65b9\u3002 IdP\uff0cIdentity Provider \u8eab\u4efd\u8ba4\u8bc1\u65b9\u3002 \u901a\u8fc7\u6d4f\u89c8\u5668 GET \u6216\u8005 POST \u8bf7\u6c42\u6765\u8f6c\u53d1\u8bf7\u6c42\u3001\u4ea4\u4e92\u4fe1\u606f\u3002 IAM\uff0cIdentity and Access Management.","title":"saml2"},{"location":"saml2/saml2/#idp-metadataxml","text":"\u53c2\u6570 \u542b\u4e49 entityID IdP \u552f\u4e00\u6807\u8bc6\u3002 \u5efa\u8bae\u4f7f\u7528\u57df\u540d\u5f62\u5f0f\uff0c\u786e\u4fdd\u5168\u5c40\u552f\u4e00\u3002\u53d6\u503c\u4e2d\u8981\u5305\u542b\u201chttps://\u201d\u3002 \u793a\u4f8b\uff1ahttps://www.idp.com \u4e24\u4e2a \u5185\u7684\u503c \u662f\u4e00\u4efd\u5305\u542b\u516c\u94a5\u7684\u8bc1\u4e66\uff0c\u8be5\u8bc1\u4e66\u7528\u4e8e\u9a8c\u8bc1\u7b7e\u540d\u3002\u4e3a\u4e86\u786e\u4fdd\u5b89\u5168\u6027\uff0c\u5efa\u8bae\u4f7f\u7528\u957f\u5ea6\u5927\u4e8e\u7b49\u4e8e2048\u4f4d\u7684\u516c\u94a5\u3002SP\u901a\u8fc7IDP\u5143\u6570\u636e\u6587\u4ef6\u4e2d\u7684\u7b7e\u540d\u8bc1\u4e66\u6765\u786e\u8ba4\u8ba4\u8bc1\u8fc7\u7a0b\u4e2d\u65ad\u8a00\u6d88\u606f\u7684\u53ef\u4fe1\u6027\u3001\u5b8c\u6574\u6027\u3002 <md:SingleLogoutService\u4e2dLocation\u7684\u503c \u4f1a\u8bdd\u6ce8\u9500\u529f\u80fd\u3002\u793a\u4f8b\uff1ahttps://www.idp.com/saml/logout <md:SingleSignOnService\u4e2dLocation\u7684\u503c IDP\u5904\u7406SAML\u8bf7\u6c42\u8ba4\u8bc1\u7684\u5730\u5740\uff0c\u7528\u4ee5\u63a5\u6536\u5904\u7406SAMLRequest\uff0c\u5e76\u751f\u6210SAMLResponse\uff0c\u793a\u4f8b\uff1ahttps://www.idp.com/saml/login","title":"IdP Metadata.xml"},{"location":"saml2/saml2/#_1","text":"\u672a\u767b\u5f55\u65f6\uff0c\u6d4f\u89c8\u5668\u4f1a\u5c06\u9875\u9762\u91cd\u5b9a\u5411\u5230 IdP\uff0c HTTP Redirect Binding https://samltest.id/idp/profile/SAML2/Redirect/SSO?SAMLRequest=fVNdj5swEHy%2FX4F4Twy0lyArSZUm%2FYiUJijQPvSl2rOXniWwqb3c5f59bZLr5aRrQAixnp3dmV1mDtqm48ue7vUB%2F%2FTo6CaKjm2jHR%2BO5nFvNTfglOMaWnScBC%2BX37Y8Gye8s4aMME38Kul6DjiHlpTRIWmznsf73aft%2Fstm96uWAlLI6izL8xon%2FkGAuywFuJ2K6URmaZokE6hD4g%2B0znPMY08ZvqOosOZBSbQ7X3Eel0VEXsxQw7keN9oRaPL4JEtHye0oS6sk5%2B9ynr3%2FGVBrj1YaaCC9J%2BocZyyoCTRjJZmSHfN6a9UgC2IydkCpLApiZbkPFMXZjY9KS6V%2FX7fh7gRy%2FGtVFaNiX1aBYvlszspo17doS7QPSuD3w%2FbUlW8qzabjxN8pz5N8yj6AcPFisGAW%2BuWDXrt4G90igQQCNmOX4Jf0jgcDN%2BvCNEo8DfFwfTa2Bfq%2FpNQXCBElR%2FUA5b12HQpVK5TxP5pl05jHlUUgPyOyPcYRe1X8vIQoh5X0LhAeKVqZtgOrXJgNHkHQWfCL6Ev4qvE7dsB6cXUNBRcB58OFfz0aK8P8%2FDhRVhZ888bS2aQ3yU9dsyttL26ejy%2F%2Fr8Vf&RelayState=http%3A%2F%2F127.0.0.1%3A8087%2F Query String Parameters\uff1a SAMLRequest \u3002 RelayState \uff0can URL parameter that we use to say to our Identity Provider where he should send the response back\u3002 \u4e0b\u9762 python3-saml-demo-django \u4ee3\u7801\u793a\u4f8b\u4e2d\uff0c\u914d\u7f6e saml/advanced_settings.json \u4e2d\u7684 \"authnRequestsSigned\": True, \uff0c\u5219\u4f1a\u4f7f\u7528 SigAlg \u548c Signature \u53c2\u6570\u3002 GET https://samltest.id/idp/profile/SAML2/Redirect/SSO?SAMLRequest=fVNNj9owEL3vr4hyBychfFlARaEfSBQikt1DL5WxJ11LiZ3ak13239cObJeVtiSHKOM3b%2Ba9Gc8sq6uGLlt8VAf404LFuyA41ZWytDuah61RVDMrLVWsBkuR03z5Y0uTfkQbo1FzXYXvkm7nMGvBoNTKJ23W83C%2F%2B7Ldf9vsfqWTMZsM4hFPh8ekTOPRMR0Mk%2Bl0cBSpGIppGsNUJCPmEx%2FAWMcxDx2l%2Fw%2BCzOgnKcDsXMV5mGcBOjFdDWtb2CiLTKHDR0nci4a9eFrEEY0GNI1%2BetTaoaVi2JE%2BIjaWEuLVeJq%2BFESKhji9payAeDEJOYCQBjiSPN97iuzixmephFS%2Fb9twPIMs%2FV4UWS%2Fb54WnWL6as9LKtjWYHMyT5HB%2F2J67ck3FybgfuTemk2gyJp8Yt%2BGis2Dm%2B6WdXrP4GF0DMsGQkRm5Br%2BlN9QbuFlnupL8pYv756s2NcP%2FS4pdAR%2BRold2UNoq2wCXpQQR%2FqNZVpV%2BXhlg6GaEpoUwIO%2BKX5YQRLeSzgWEEwYrXTfMSOtnAyfG8SL4TfQ1fFW5HTtAubi5hpxyj3PhzH2etRF%2Bfm6cIArDXPPa4MWkD8nPXZMbbS%2FuXo%2Bv79fiLw%3D%3D&RelayState=http%3A%2F%2F127.0.0.1%3A8087%2F&Signature=DKJ1wQO7FTxrt7mGh6ytws%2B8KvMaM5AdT1Ls3sBM5JSPZOMsCdvCwMWAOkGU8EE1LGtkFrD6mpjI%2B%2FXeejQ03e6LdjrtGCdVp0ht2tunEpsPv2Ia31%2FvSGs39jCBRmTkPOnl21Of8T%2BOnCfmjxs4qhpFX25KX0TxfhK%2BMP9ZXa1XKAcrdiLXC%2B0jNYQth75eCG%2BrvgW53inFfNy6diNdPqM0AjhCVqhSFezuBuw9BJciVXi9T8occUiWFDCOFn8ThjrJOB0eslft2%2Bx5GrKnjr8RO1so7WnSz1N5FIe5Uw0713iXD16BsM9xVHLHbA01E0SIy%2Bz40J3C4XZyhB43Vw%3D%3D&SigAlg=http%3A%2F%2Fwww.w3.org%2F2001%2F04%2Fxmldsig-more%23rsa-sha256 SigAlg \uff0c\u53ef\u9009\uff0c\u7b7e\u540d\u7b97\u6cd5\uff08\u6bd4\u5982\uff1a http://www.w3.org/2001/04/xmldsig-more#rsa-sha256 \uff09\u3002 Signature \uff0c\u53ef\u9009\uff0c\u7b7e\u540d\u503c\u3002SP \u53d1\u8d77\u8bf7\u6c42\u524d\uff0c\u4f1a\u5c06\u8bf7\u6c42\u4e2d\u7684 SAMLRequest={SAMLRequest}&RelayState={RelayState}&SigAlg={SigAlg} \u4f7f\u7528 SP \u79c1\u94a5\u7b7e\u540d\uff08\u7b7e\u540d\u7b97\u6cd5\u4e3a SigAlg \u5b57\u6bb5\u6307\u5b9a\u7684\u7b97\u6cd5\uff09\uff0c\u4e4b\u540e\u518d\u505a\u4e00\u6b21 Base64 \u7f16\u7801\u4f5c\u4e3a\u7b7e\u540d\u503c\u3002 \u5982\u679c\u6709\u53c2\u6570\u7b7e\u540d\u7684\u8bdd\uff0cIdP \u6536\u5230\u8bf7\u6c42\u540e\u901a\u8fc7 SP \u516c\u94a5\uff08SP Metadata.xml\u6587\u4ef6\u4e2d <ds:X509Certificate></ds:X509Certificate> \u6807\u7b7e\u5185\u7684\u503c\uff09\u6765\u9a8c\u8bc1\u7b7e\u540d\u3002\u7b7e\u540d\u9a8c\u8bc1\u901a\u8fc7\uff0c\u5219\u8868\u660e\u662f\u5408\u6cd5 SP \u53d1\u9001\u7684\u8bf7\u6c42\u53ef\u4ee5\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\uff0c\u5426\u5219\u8bf7\u6c42\u975e\u6cd5\u3002 HTTP POST Binding POST https://win-mi64c2jsv9s.lian.local/adfs/ls/ Form Data: SAMLRequest \u3002 RelayState \u3002 \u663e\u793a Idp \u767b\u5f55\u9875\u9762\uff0c\u7528\u6237\u767b\u5f55\u6210\u529f\u540e\uff0cIdP \u53d1\u9001 POST \u8bf7\u6c42\uff08\u5c31\u662f\u4e00\u4e2a HTML form \u8868\u5355\u548c\u4e00\u6bb5\u7acb\u5373\u63d0\u4ea4\u8be5\u8868\u5355\u7684 JS \u4ee3\u7801\uff09\u7ed9 SP\uff08AssertionConsumerService\uff09\u5e76\u5e26\u4e0a\u4ee5\u4e0b\u53c2\u6570\uff1a POST https://demo.seafile.top/saml2/acs/ Form Data: SAMLResponse \u3002 RelayState \uff0csamlRequest\u4e2d\u76f8\u540c\u53c2\u6570\u503c\u3002 SP \u6536\u5230 SAMLResponse \u540e\uff0c\u89e3\u6790\u51fa\u7528\u6237\u4fe1\u606f\uff0c\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\u3002","title":"\u767b\u5f55\u6d41\u7a0b"},{"location":"saml2/saml2/#saml-tech-overview","text":"","title":"Saml Tech Overview"},{"location":"saml2/saml2/#referer","text":"Reloading SAML: Do you really need SAML? Reloading SAML : SAML Basics \u534e\u4e3a\u4e91 IDP Metadata.xml \u534e\u4e3a\u4e91 saml \u8ba4\u8bc1 Authing saml overview","title":"Referer"},{"location":"saml2/saml2/#tools","text":"decode SAML requests https://developers.onelogin.com/saml/online-tools/x509-certs/obtain-self-signed-certs","title":"Tools"},{"location":"saml2/saml2/#python3-saml-demo-django","text":"https://github.com/imwhatiam/python3-saml-demo-django idp \u4f7f\u7528 https://samltest.id/ \u63d0\u4f9b\u7684\u670d\u52a1\u3002\u4e5f\u53ef\u5bf9\u63a5 onelogin \u63d0\u4f9b\u7684 idp \u670d\u52a1\uff0c\u5177\u4f53\u53c2\u8003\uff1ahttps://developers.onelogin.com/saml/python \u3002 sp \u4f7f\u7528 https://github.com/onelogin/python3-saml","title":"python3-saml-demo-django"},{"location":"saml2/saml2/#_2","text":"\u8fd0\u884c\u547d\u4ee4\uff08\u4e5f\u53ef\u4e0b\u8f7d Dockerfile \u548c settings.json \u5230\u540c\u4e00\u76ee\u5f55\u540e\u81ea\u884c docker build -t imwhatiam/python3-saml-demo-django:v1 . \uff09\uff1a docker run -it -p 8000:8000 --name test-saml2 imwhatiam/python3-saml-demo-django:v1 bash \u8fdb\u5165\u5230\u5bb9\u5668\u540e\uff0c\u518d\u8fd0\u884c\uff1a python3 manage.py runserver 0.0.0.0:8000 \u7136\u540e\u6d4f\u89c8\u5668\u4e2d\u8bbf\u95ee http://127.0.0.1:8000/ \u70b9\u51fb Login\uff0c\u4e4b\u540e\u8fdb\u5165\u5230 https://samltest.id/ \u7684\u767b\u5f55\u754c\u9762\uff0c\u6309\u63d0\u793a\u8f93\u5165\u7528\u6237\u540d\u5bc6\u7801\u540e\uff0c\u5373\u53ef\u8df3\u8f6c\u56de\u672c\u5730\uff0c\u5e76\u663e\u793a\u5df2\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f\u3002","title":"\u7528\u6cd5"},{"location":"saml2/saml2/#_3","text":"","title":"\u989d\u5916\u8bf4\u660e"},{"location":"saml2/saml2/#metadata-httpssamltestid","text":"\u6211\u5df2\u7ecf\u9884\u5148\u8bbe\u7f6e\u597d\uff0c\u5982 sp \u8bbf\u95ee\u5730\u5740\u53d8\u4e86\uff0c\u9700\u8981\u91cd\u65b0\u4e0a\u4f20\uff1a \u8bbf\u95ee http{s}://new-domain-or-ip/metadata/ \u5e76\u5c06 xml \u6587\u4ef6\u4e0b\u8f7d\u5230\u672c\u5730\u3002 \u8bbf\u95ee https://samltest.id/upload.php \u5c06 xml \u6587\u4ef6\u4e0a\u4f20\u4e0a\u53bb\u3002","title":"\u4e0a\u4f20 metadata \u5230 https://samltest.id/"},{"location":"saml2/saml2/#settingsjson","text":"\u6211\u5df2\u9884\u5148\u914d\u7f6e\u597d: sp \u90e8\u5206\u4f7f\u7528 onelogin \u9ed8\u8ba4\u914d\u7f6e https://github.com/onelogin/python3-saml/blob/master/demo-django/saml/settings.json#L4 \uff0c\u4f46\u6ce8\u610f\u9700\u8981\u6539\u4e3a\u81ea\u5df1\u7684\u57df\u540d\u6216IP\u3002 sp \u4f7f\u7528\u81ea\u7b7e\u540d\u8bc1\u4e66\uff1a openssl req -new -x509 -days 3652 -nodes -out sp.crt -keyout sp.key idp \u90e8\u5206\u53c2\u8003 https://samltest.id/download/#SAMLtest%E2%80%99s_IdP","title":"\u914d\u7f6e settings.json"},{"location":"seafile/conf/","text":"Seafile seahub_settings.py CAS \u6d4b\u8bd5\u7528\u6237\u540d\uff1a casuser \u5bc6\u7801\uff1a Mellon ENABLE_CAS = True CAS_SERVER_URL = 'https://casserver.herokuapp.com/cas/' CAS_LOGOUT_COMPLETELY = True","title":"common conf"},{"location":"seafile/conf/#seafile","text":"","title":"Seafile"},{"location":"seafile/conf/#seahub_settingspy","text":"","title":"seahub_settings.py"},{"location":"seafile/conf/#cas","text":"\u6d4b\u8bd5\u7528\u6237\u540d\uff1a casuser \u5bc6\u7801\uff1a Mellon ENABLE_CAS = True CAS_SERVER_URL = 'https://casserver.herokuapp.com/cas/' CAS_LOGOUT_COMPLETELY = True","title":"CAS"},{"location":"seafile/cas/cas/","text":"CAS \u96c6\u6210 \u6d4b\u8bd5\u7528\u6237\u540d\uff1a casuser \u5bc6\u7801\uff1a Mellon via python pip3 install python-cas seahub_settings.py ENABLE_CAS = True CAS_SERVER_URL = 'https://casserver.herokuapp.com/cas/' CAS_LOGOUT_COMPLETELY = True via apache ubuntu 18.04 apt-get install libapache2-mod-auth-cas vi /etc/apache2/mods-enabled/auth_cas.conf CASCookiePath /var/cache/apache2/mod_auth_cas/ CASLoginURL https://casserver.herokuapp.com/cas/login CASValidateURL https://casserver.herokuapp.com/cas/serviceValidate vi /etc/apache2/sites-enabled/000-default.conf <VirtualHost *:80> Alias /media /home/user/haiwen/seafile-server-latest/seahub/media RewriteEngine On <Location /media> Require all granted </Location> <Location /sso> AuthType CAS Require valid-user CASAuthNHeader remote-user </Location> # seafile fileserver ProxyPass /seafhttp http://127.0.0.1:8082 ProxyPassReverse /seafhttp http://127.0.0.1:8082 RewriteRule ^/seafhttp - [QSA,L] # seahub SetEnvIf Authorization \"(.*)\" HTTP_AUTHORIZATION=$1 ProxyPreserveHost On ProxyPass / http://127.0.0.1:8000/ ProxyPassReverse / http://127.0.0.1:8000/ </VirtualHost> vi /opt/seafile/conf/seahub_settings.py ENABLE_REMOTE_USER_AUTHENTICATION = True REMOTE_USER_DOMAIN = 'your.seafile-domain.com' centos 7 yum install mod_auth_cas vi /etc/httpd/conf.d/auth_cas.conf \u5176\u4ed6\u540c\u4e0a https://apereo.github.io/cas/6.0.x/index.html https://dacurry-tns.github.io/deploying-apereo-cas/introduction_overview.html","title":"CAS"},{"location":"seafile/cas/cas/#cas","text":"\u6d4b\u8bd5\u7528\u6237\u540d\uff1a casuser \u5bc6\u7801\uff1a Mellon","title":"CAS \u96c6\u6210"},{"location":"seafile/cas/cas/#via-python","text":"pip3 install python-cas seahub_settings.py ENABLE_CAS = True CAS_SERVER_URL = 'https://casserver.herokuapp.com/cas/' CAS_LOGOUT_COMPLETELY = True","title":"via python"},{"location":"seafile/cas/cas/#via-apache","text":"","title":"via apache"},{"location":"seafile/cas/cas/#ubuntu-1804","text":"apt-get install libapache2-mod-auth-cas vi /etc/apache2/mods-enabled/auth_cas.conf CASCookiePath /var/cache/apache2/mod_auth_cas/ CASLoginURL https://casserver.herokuapp.com/cas/login CASValidateURL https://casserver.herokuapp.com/cas/serviceValidate vi /etc/apache2/sites-enabled/000-default.conf <VirtualHost *:80> Alias /media /home/user/haiwen/seafile-server-latest/seahub/media RewriteEngine On <Location /media> Require all granted </Location> <Location /sso> AuthType CAS Require valid-user CASAuthNHeader remote-user </Location> # seafile fileserver ProxyPass /seafhttp http://127.0.0.1:8082 ProxyPassReverse /seafhttp http://127.0.0.1:8082 RewriteRule ^/seafhttp - [QSA,L] # seahub SetEnvIf Authorization \"(.*)\" HTTP_AUTHORIZATION=$1 ProxyPreserveHost On ProxyPass / http://127.0.0.1:8000/ ProxyPassReverse / http://127.0.0.1:8000/ </VirtualHost> vi /opt/seafile/conf/seahub_settings.py ENABLE_REMOTE_USER_AUTHENTICATION = True REMOTE_USER_DOMAIN = 'your.seafile-domain.com'","title":"ubuntu 18.04"},{"location":"seafile/cas/cas/#centos-7","text":"yum install mod_auth_cas vi /etc/httpd/conf.d/auth_cas.conf \u5176\u4ed6\u540c\u4e0a https://apereo.github.io/cas/6.0.x/index.html https://dacurry-tns.github.io/deploying-apereo-cas/introduction_overview.html","title":"centos 7"},{"location":"seafile/cas/cas-django-integration/","text":"cas-django-integration","title":"cas-django-integration"},{"location":"seafile/cas/cas-django-integration/#cas-django-integration","text":"","title":"cas-django-integration"},{"location":"tools/certbot/","text":"Certbot install Nginx on Ubuntu 20.04 sudo apt update sudo apt install snapd sudo snap install core sudo snap refresh core sudo apt-get remove certbot sudo snap install --classic certbot sudo ln -s /snap/bin/certbot /usr/bin/certbot sudo certbot --nginx https://snapcraft.io/docs/installing-snap-on-ubuntu https://certbot.eff.org/lets-encrypt/ubuntufocal-nginx","title":"certbot"},{"location":"tools/certbot/#certbot","text":"","title":"Certbot"},{"location":"tools/certbot/#install","text":"Nginx on Ubuntu 20.04 sudo apt update sudo apt install snapd sudo snap install core sudo snap refresh core sudo apt-get remove certbot sudo snap install --classic certbot sudo ln -s /snap/bin/certbot /usr/bin/certbot sudo certbot --nginx https://snapcraft.io/docs/installing-snap-on-ubuntu https://certbot.eff.org/lets-encrypt/ubuntufocal-nginx","title":"install"},{"location":"tools/ffmpeg/","text":"ffmpeg \u6162\u901f\u64ad\u653e ffmpeg -i Untitled.mp4 -filter:v \"setpts=4*PTS\" output.mp4","title":"ffmpeg"},{"location":"tools/ffmpeg/#ffmpeg","text":"\u6162\u901f\u64ad\u653e ffmpeg -i Untitled.mp4 -filter:v \"setpts=4*PTS\" output.mp4","title":"ffmpeg"},{"location":"tools/git/","text":"Git git\u91cc\u7684\u4e09\u4e2a\u533a\u57df\u6982\u5ff5\uff1a working directory\uff1a\u5c31\u662f\u4f60\u6240\u64cd\u4f5c\u7684\u90a3\u4e9b\u6587\u4ef6 stage(index)\uff1a\u6682\u5b58\u533a\u57df\uff0c\u672c\u8d28\u4e0a\u662f\u4e2a\u6587\u4ef6\uff0c\u4e5f\u5c31\u662f.git/index history\uff1a\u4f60\u6240\u63d0\u4ea4\u7684\u6240\u6709\u8bb0\u5f55\uff0c\u6587\u4ef6\u5386\u53f2\u5185\u5bb9\u7b49\u7b49\u3002git\u662f\u4e2a\u5206\u5e03\u5f0f\u7248\u672c\u7ba1\u7406\u7cfb\u7edf\uff0c\u5728\u4f60\u672c\u5730\u6709\u9879\u76ee\u7684\u6240\u6709\u5386\u53f2\u63d0\u4ea4\u8bb0\u5f55\uff1b\u6587\u4ef6\u5386\u53f2\u8bb0\u5f55\uff1b\u63d0\u4ea4\u65e5\u5fd7\u7b49\u7b49\u3002 git\u4e2d\u8fd8\u6709\u4e09\u7c7b\u5e38\u7528\u5bf9\u8c61\uff1a blob\uff1a\u7528\u4e8e\u8868\u793a\u4e00\u4e2a\u6587\u4ef6 tree\uff1a\u7528\u4e8e\u8868\u793a\u4e00\u4e2a\u76ee\u5f55\uff0c\u7d22\u5f15\u5230\u82e5\u5e72\u6587\u4ef6\u6216\u5b50\u76ee\u5f55 commit\uff1a\u7528\u4e8e\u8868\u793a\u4e00\u6b21\u63d0\u4ea4(commit) proxy \u56fd\u5185\u955c\u50cf git remote add cdn https://github.com.cnpmjs.org/haiwen/seahub.git git config --global url.https://hub.fastgit.org/.insteadOf https://github.com/ ssh \u4ee3\u7406 How to force Git to use socks proxy over its ssh connection vim ~/.ssh/config Host github.com HostName github.com User git ProxyCommand nc -v -x 127.0.0.1:1080 %h %p git command git reset git reset HEAD^ a.py \uff1a\u56de\u9000a.py\u8fd9\u4e2a\u6587\u4ef6\u7684\u7248\u672c\u5230\u4e0a\u4e00\u4e2a\u7248\u672c git reset HEAD~1 \uff1a\u9ed8\u8ba4\u4e3a --mixed , git status \u540e\u4e3a Changes not staged for commit, \u5373 git add \u4e4b\u524d\u7684\u72b6\u6001\u3002 git reset --soft HEAD~1 \uff1a git status \u540e\u4e3a Changes to be committed, \u5373 git add \u4e4b\u540e\u7684\u72b6\u6001\u3002 git reset --hard HEAD~1 \uff1a\u6240\u6709\u66f4\u6539\u90fd\u88ab\u4e22\u5f03 git stash git stash \uff1a\u5907\u4efd\u5f53\u524d\u7684\u5de5\u4f5c\u533a\u7684\u5185\u5bb9\uff0c\u4ece\u6700\u8fd1\u7684\u4e00\u6b21\u63d0\u4ea4\u4e2d\u8bfb\u53d6\u76f8\u5173\u5185\u5bb9\uff0c\u8ba9\u5de5\u4f5c\u533a\u4fdd\u8bc1\u548c\u4e0a\u6b21\u63d0\u4ea4\u7684\u5185\u5bb9\u4e00\u81f4\u3002\u540c\u65f6\uff0c\u5c06\u5f53\u524d\u7684\u5de5\u4f5c\u533a\u5185\u5bb9\u4fdd\u5b58\u5230Git\u6808\u4e2d\u3002 git stash pop \uff1a\u4eceGit\u6808\u4e2d\u8bfb\u53d6\u6700\u8fd1\u4e00\u6b21\u4fdd\u5b58\u7684\u5185\u5bb9\uff0c\u6062\u590d\u5de5\u4f5c\u533a\u7684\u76f8\u5173\u5185\u5bb9\u3002\u7531\u4e8e\u53ef\u80fd\u5b58\u5728\u591a\u4e2aStash\u7684\u5185\u5bb9\uff0c\u6240\u4ee5\u7528\u6808\u6765\u7ba1\u7406\uff0cpop\u4f1a\u4ece\u6700\u8fd1\u7684\u4e00\u4e2astash\u4e2d\u8bfb\u53d6\u5185\u5bb9\u5e76\u6062\u590d\u3002 git stash list \uff1a\u663e\u793aGit\u6808\u5185\u7684\u6240\u6709\u5907\u4efd\uff0c\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u5217\u8868\u6765\u51b3\u5b9a\u4ece\u90a3\u4e2a\u5730\u65b9\u6062\u590d\u3002 git stash clear \uff1a\u6e05\u7a7aGit\u6808\u3002\u6b64\u65f6\u4f7f\u7528gitg\u7b49\u56fe\u5f62\u5316\u5de5\u5177\u4f1a\u53d1\u73b0\uff0c\u539f\u6765stash\u7684\u54ea\u4e9b\u8282\u70b9\u90fd\u6d88\u5931\u4e86 git show git show ebff \uff1a\u67e5 log \u662f commit ebff810c461ad1924fc422fd1d01db23d858773b \u7684\u5167\u5bb9 git show v1 \uff1a\u67e5 tag:v1 \u7684\u4fee\u6539\u5167\u5bb9 git show v1:test.txt \uff1a\u67e5 tag:v1 \u7684 test.txt \u6a94\u6848\u4fee\u6539\u5167\u5bb9 git show HEAD \uff1a\u6b64\u7248\u672c\u4fee\u6539\u7684\u8cc7\u6599 git show HEAD^ \uff1a\u524d\u4e00\u7248\u4fee\u6539\u7684\u8cc7\u6599 git show HEAD^^ \uff1a\u524d\u524d\u4e00\u7248\u4fee\u6539\u7684\u8cc7\u6599 git show HEAD~4 \uff1a\u524d\u524d\u524d\u524d\u4e00\u7248\u4fee\u6539\u7684\u8cc7\u6599 git grep git grep \"te\" v1 \uff1a\u67e5 v1 \u662f\u5426\u6709 \"te\" \u7684\u5b57\u4e32 git grep \"te\" \uff1a\u67e5\u73fe\u5728\u7248\u672c\u662f\u5426\u6709 \"te\" \u7684\u5b57\u4e32 git branch change branch name\uff1a git branch -m <oldname> <newname> rename the current branch\uff1a git branch -m <newname> delete merged branck, use -D to delete unmerged branch\uff1a git branch -d [name] delete remote branch\uff1a git push origin :remote-branch push local branch to remote branch\uff1a git push origin local-branch:remote-branch fetch remote branch to local branch\uff1a git fetch origin remote-branch:local-branch List referenced remote branches\uff1a git branch -r git remote \u68c0\u51fa\u4ed3\u5e93\uff1a git clone git://github.com/jquery/jquery.git \u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93\uff1a git remote -v \u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93\uff1a git remote add [name] [url] \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\uff1a git remote rm [name] \u4fee\u6539\u8fdc\u7a0b\u4ed3\u5e93\uff1a git remote set-url --push [name] [newUrl] \u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93\uff1a git pull [remoteName] [localBranchName] \u63a8\u9001\u8fdc\u7a0b\u4ed3\u5e93 git push [remoteName] [localBranchName] .gitignore does not work git rm --cached -r . git add . git status Revert changes to a file in a commit git show some_commit_sha1 -- some_file.c | git apply -R export git log git --no-pager log > log.txt \u6062\u590d\u672c\u5730\u5df2\u5220\u9664\u7684 commit git reflog git reset --hard 98abc5a \u83b7\u53d6\u8fdc\u7a0b pull request\uff0c\u5e76\u65b0\u5efa\u4e00\u4e2a\u5206\u652f git fetch origin pull/pull-request-ID/head:local-branch-name \u83b7\u53d6\u8fdc\u7a0b tag\uff0c\u5e76\u57fa\u4e8e\u67d0\u4e00 tag \u65b0\u5efa\u4e00\u4e2a\u5206\u652f git fetch origin tag v7.1.9-pro git fetch --tags --prune git checkout tags/v1.0 -b NewBranch Clean up outdated references in local repository git remote prune origin mac \u4e0b git \u547d\u4ee4\u81ea\u52a8\u8865\u5168 \u5b89\u88c5 Homebrew /usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" \u5b89\u88c5 bash-completion brew install bash-completion brew info bash-completion Add the following line to your ~/.bash_profile : [[ -r \"/usr/local/etc/profile.d/bash_completion.sh\" ]] && . \"/usr/local/etc/profile.d/bash_completion.sh\" \u4e0b\u8f7d git-completion.bash wget https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash mv git-completion.bash ~/.git-completion.bash \u914d\u7f6e ~/.bashrc Add the following line to your ~/.bashrc : source ~/.git-completion.bash","title":"git"},{"location":"tools/git/#git","text":"git\u91cc\u7684\u4e09\u4e2a\u533a\u57df\u6982\u5ff5\uff1a working directory\uff1a\u5c31\u662f\u4f60\u6240\u64cd\u4f5c\u7684\u90a3\u4e9b\u6587\u4ef6 stage(index)\uff1a\u6682\u5b58\u533a\u57df\uff0c\u672c\u8d28\u4e0a\u662f\u4e2a\u6587\u4ef6\uff0c\u4e5f\u5c31\u662f.git/index history\uff1a\u4f60\u6240\u63d0\u4ea4\u7684\u6240\u6709\u8bb0\u5f55\uff0c\u6587\u4ef6\u5386\u53f2\u5185\u5bb9\u7b49\u7b49\u3002git\u662f\u4e2a\u5206\u5e03\u5f0f\u7248\u672c\u7ba1\u7406\u7cfb\u7edf\uff0c\u5728\u4f60\u672c\u5730\u6709\u9879\u76ee\u7684\u6240\u6709\u5386\u53f2\u63d0\u4ea4\u8bb0\u5f55\uff1b\u6587\u4ef6\u5386\u53f2\u8bb0\u5f55\uff1b\u63d0\u4ea4\u65e5\u5fd7\u7b49\u7b49\u3002 git\u4e2d\u8fd8\u6709\u4e09\u7c7b\u5e38\u7528\u5bf9\u8c61\uff1a blob\uff1a\u7528\u4e8e\u8868\u793a\u4e00\u4e2a\u6587\u4ef6 tree\uff1a\u7528\u4e8e\u8868\u793a\u4e00\u4e2a\u76ee\u5f55\uff0c\u7d22\u5f15\u5230\u82e5\u5e72\u6587\u4ef6\u6216\u5b50\u76ee\u5f55 commit\uff1a\u7528\u4e8e\u8868\u793a\u4e00\u6b21\u63d0\u4ea4(commit)","title":"Git"},{"location":"tools/git/#proxy","text":"","title":"proxy"},{"location":"tools/git/#_1","text":"git remote add cdn https://github.com.cnpmjs.org/haiwen/seahub.git git config --global url.https://hub.fastgit.org/.insteadOf https://github.com/","title":"\u56fd\u5185\u955c\u50cf"},{"location":"tools/git/#ssh","text":"How to force Git to use socks proxy over its ssh connection vim ~/.ssh/config Host github.com HostName github.com User git ProxyCommand nc -v -x 127.0.0.1:1080 %h %p","title":"ssh \u4ee3\u7406"},{"location":"tools/git/#git-command","text":"","title":"git command"},{"location":"tools/git/#git-reset","text":"git reset HEAD^ a.py \uff1a\u56de\u9000a.py\u8fd9\u4e2a\u6587\u4ef6\u7684\u7248\u672c\u5230\u4e0a\u4e00\u4e2a\u7248\u672c git reset HEAD~1 \uff1a\u9ed8\u8ba4\u4e3a --mixed , git status \u540e\u4e3a Changes not staged for commit, \u5373 git add \u4e4b\u524d\u7684\u72b6\u6001\u3002 git reset --soft HEAD~1 \uff1a git status \u540e\u4e3a Changes to be committed, \u5373 git add \u4e4b\u540e\u7684\u72b6\u6001\u3002 git reset --hard HEAD~1 \uff1a\u6240\u6709\u66f4\u6539\u90fd\u88ab\u4e22\u5f03","title":"git reset"},{"location":"tools/git/#git-stash","text":"git stash \uff1a\u5907\u4efd\u5f53\u524d\u7684\u5de5\u4f5c\u533a\u7684\u5185\u5bb9\uff0c\u4ece\u6700\u8fd1\u7684\u4e00\u6b21\u63d0\u4ea4\u4e2d\u8bfb\u53d6\u76f8\u5173\u5185\u5bb9\uff0c\u8ba9\u5de5\u4f5c\u533a\u4fdd\u8bc1\u548c\u4e0a\u6b21\u63d0\u4ea4\u7684\u5185\u5bb9\u4e00\u81f4\u3002\u540c\u65f6\uff0c\u5c06\u5f53\u524d\u7684\u5de5\u4f5c\u533a\u5185\u5bb9\u4fdd\u5b58\u5230Git\u6808\u4e2d\u3002 git stash pop \uff1a\u4eceGit\u6808\u4e2d\u8bfb\u53d6\u6700\u8fd1\u4e00\u6b21\u4fdd\u5b58\u7684\u5185\u5bb9\uff0c\u6062\u590d\u5de5\u4f5c\u533a\u7684\u76f8\u5173\u5185\u5bb9\u3002\u7531\u4e8e\u53ef\u80fd\u5b58\u5728\u591a\u4e2aStash\u7684\u5185\u5bb9\uff0c\u6240\u4ee5\u7528\u6808\u6765\u7ba1\u7406\uff0cpop\u4f1a\u4ece\u6700\u8fd1\u7684\u4e00\u4e2astash\u4e2d\u8bfb\u53d6\u5185\u5bb9\u5e76\u6062\u590d\u3002 git stash list \uff1a\u663e\u793aGit\u6808\u5185\u7684\u6240\u6709\u5907\u4efd\uff0c\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u5217\u8868\u6765\u51b3\u5b9a\u4ece\u90a3\u4e2a\u5730\u65b9\u6062\u590d\u3002 git stash clear \uff1a\u6e05\u7a7aGit\u6808\u3002\u6b64\u65f6\u4f7f\u7528gitg\u7b49\u56fe\u5f62\u5316\u5de5\u5177\u4f1a\u53d1\u73b0\uff0c\u539f\u6765stash\u7684\u54ea\u4e9b\u8282\u70b9\u90fd\u6d88\u5931\u4e86","title":"git stash"},{"location":"tools/git/#git-show","text":"git show ebff \uff1a\u67e5 log \u662f commit ebff810c461ad1924fc422fd1d01db23d858773b \u7684\u5167\u5bb9 git show v1 \uff1a\u67e5 tag:v1 \u7684\u4fee\u6539\u5167\u5bb9 git show v1:test.txt \uff1a\u67e5 tag:v1 \u7684 test.txt \u6a94\u6848\u4fee\u6539\u5167\u5bb9 git show HEAD \uff1a\u6b64\u7248\u672c\u4fee\u6539\u7684\u8cc7\u6599 git show HEAD^ \uff1a\u524d\u4e00\u7248\u4fee\u6539\u7684\u8cc7\u6599 git show HEAD^^ \uff1a\u524d\u524d\u4e00\u7248\u4fee\u6539\u7684\u8cc7\u6599 git show HEAD~4 \uff1a\u524d\u524d\u524d\u524d\u4e00\u7248\u4fee\u6539\u7684\u8cc7\u6599","title":"git show"},{"location":"tools/git/#git-grep","text":"git grep \"te\" v1 \uff1a\u67e5 v1 \u662f\u5426\u6709 \"te\" \u7684\u5b57\u4e32 git grep \"te\" \uff1a\u67e5\u73fe\u5728\u7248\u672c\u662f\u5426\u6709 \"te\" \u7684\u5b57\u4e32","title":"git grep"},{"location":"tools/git/#git-branch","text":"change branch name\uff1a git branch -m <oldname> <newname> rename the current branch\uff1a git branch -m <newname> delete merged branck, use -D to delete unmerged branch\uff1a git branch -d [name] delete remote branch\uff1a git push origin :remote-branch push local branch to remote branch\uff1a git push origin local-branch:remote-branch fetch remote branch to local branch\uff1a git fetch origin remote-branch:local-branch List referenced remote branches\uff1a git branch -r","title":"git branch"},{"location":"tools/git/#git-remote","text":"\u68c0\u51fa\u4ed3\u5e93\uff1a git clone git://github.com/jquery/jquery.git \u67e5\u770b\u8fdc\u7a0b\u4ed3\u5e93\uff1a git remote -v \u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93\uff1a git remote add [name] [url] \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\uff1a git remote rm [name] \u4fee\u6539\u8fdc\u7a0b\u4ed3\u5e93\uff1a git remote set-url --push [name] [newUrl] \u62c9\u53d6\u8fdc\u7a0b\u4ed3\u5e93\uff1a git pull [remoteName] [localBranchName] \u63a8\u9001\u8fdc\u7a0b\u4ed3\u5e93 git push [remoteName] [localBranchName]","title":"git remote"},{"location":"tools/git/#gitignore-does-not-work","text":"git rm --cached -r . git add . git status","title":".gitignore does not work"},{"location":"tools/git/#revert-changes-to-a-file-in-a-commit","text":"git show some_commit_sha1 -- some_file.c | git apply -R","title":"Revert changes to a file in a commit"},{"location":"tools/git/#export-git-log","text":"git --no-pager log > log.txt","title":"export git log"},{"location":"tools/git/#commit","text":"git reflog git reset --hard 98abc5a","title":"\u6062\u590d\u672c\u5730\u5df2\u5220\u9664\u7684 commit"},{"location":"tools/git/#pull-request","text":"git fetch origin pull/pull-request-ID/head:local-branch-name","title":"\u83b7\u53d6\u8fdc\u7a0b pull request\uff0c\u5e76\u65b0\u5efa\u4e00\u4e2a\u5206\u652f"},{"location":"tools/git/#tag-tag","text":"git fetch origin tag v7.1.9-pro git fetch --tags --prune git checkout tags/v1.0 -b NewBranch","title":"\u83b7\u53d6\u8fdc\u7a0b tag\uff0c\u5e76\u57fa\u4e8e\u67d0\u4e00 tag \u65b0\u5efa\u4e00\u4e2a\u5206\u652f"},{"location":"tools/git/#clean-up-outdated-references-in-local-repository","text":"git remote prune origin","title":"Clean up outdated references in local repository"},{"location":"tools/git/#mac-git","text":"","title":"mac \u4e0b git \u547d\u4ee4\u81ea\u52a8\u8865\u5168"},{"location":"tools/git/#homebrew","text":"/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"","title":"\u5b89\u88c5 Homebrew"},{"location":"tools/git/#bash-completion","text":"brew install bash-completion brew info bash-completion Add the following line to your ~/.bash_profile : [[ -r \"/usr/local/etc/profile.d/bash_completion.sh\" ]] && . \"/usr/local/etc/profile.d/bash_completion.sh\"","title":"\u5b89\u88c5 bash-completion"},{"location":"tools/git/#git-completionbash","text":"wget https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash mv git-completion.bash ~/.git-completion.bash","title":"\u4e0b\u8f7d git-completion.bash"},{"location":"tools/git/#bashrc","text":"Add the following line to your ~/.bashrc : source ~/.git-completion.bash","title":"\u914d\u7f6e ~/.bashrc"},{"location":"tools/memcached/","text":"memcached install for ubuntu sudo apt-get install memcached sudo pip install python-memcached clear memcached echo 'flush_all' | nc localhost 11211 or echo 'flush_all' | netcat localhost 11211 or $ telnet localhost 11211 Trying 127.0.0.1... Connected to localhost. Escape character is '^]'. flush_all OK quit Connection to localhost closed by foreign host. $ restart/start/stop... restart memcached systemctl restart memcached start memcached systemctl start memcached stop memcached systemctl stop memcached start memcached at boot systemctl enable memcached check the status of memcached systemctl status memcached","title":"memcached"},{"location":"tools/memcached/#memcached","text":"","title":"memcached"},{"location":"tools/memcached/#install","text":"for ubuntu sudo apt-get install memcached sudo pip install python-memcached","title":"install"},{"location":"tools/memcached/#clear-memcached","text":"echo 'flush_all' | nc localhost 11211 or echo 'flush_all' | netcat localhost 11211 or $ telnet localhost 11211 Trying 127.0.0.1... Connected to localhost. Escape character is '^]'. flush_all OK quit Connection to localhost closed by foreign host. $","title":"clear memcached"},{"location":"tools/memcached/#restartstartstop","text":"restart memcached systemctl restart memcached start memcached systemctl start memcached stop memcached systemctl stop memcached start memcached at boot systemctl enable memcached check the status of memcached systemctl status memcached","title":"restart/start/stop..."},{"location":"tools/nginx/","text":"nginx install apt update apt install nginx SNI A more generic solution for running several HTTPS servers on a single IP address is TLS Server Name Indication extension (SNI, RFC 6066), which allows a browser to pass a requested server name during the SSL handshake and, therefore, the server will know which certificate it should use for the connection. nginx \u662f\u5426\u652f\u6301 SNI root@ubuntu-demo-com ~ # nginx -V nginx version: nginx/1.10.3 (Ubuntu) built with OpenSSL 1.0.2g 1 Mar 2016 TLS SNI support enabled \u6d4b\u8bd5 \u914d\u7f6e nginx Bind two different domain to the same IP. Two nginx virtual hosts with different server name and certificate. python requests module \u6d4b\u8bd5 >>> import requests >>> requests.get('https://www.imwhatiam.com') <Response [200]> >>> requests.get('https://demo.seafile.com') <Response [200] openssl s_client \u547d\u4ee4\u6d4b\u8bd5 \u7b2c\u4e00\u4e2a\u8bf7\u6c42\u52a0\u4e86 -servername \u53c2\u6570\uff0c\u8bf7\u6c42 www.imwhatiam.com:443 \uff0c\u5f97\u5230 /CN=www.imwhatiam.com liandembp:~ lian$ openssl s_client -servername www.imwhatiam.com -connect www.imwhatiam.com:443 CONNECTED(00000005) depth=1 C = US, O = Let's Encrypt, CN = Let's Encrypt Authority X3 verify error:num=20:unable to get local issuer certificate verify return:0 --- Certificate chain 0 s:/CN=www.imwhatiam.com i:/C=US/O=Let's Encrypt/CN=Let's Encrypt Authority X3 1 s:/C=US/O=Let's Encrypt/CN=Let's Encrypt Authority X3 i:/O=Digital Signature Trust Co./CN=DST Root CA X3 \u7b2c\u4e8c\u4e2a\u8bf7\u6c42\u6ca1\u52a0 -servername \u53c2\u6570\uff0c\u8bf7\u6c42 www.imwhatiam.com:443 \uff0c\u5f97\u5230 /CN=demo.seafile.com \u5f53\u4e0d\u52a0 -servername \u53c2\u6570\u7684\u65f6\u5019\uff0c\u5f97\u5230\u7684\u8bc1\u4e66\uff0c\u548c nginx \u914d\u7f6e\u4e2d\u7684\u987a\u5e8f\u6709\u5173\u3002\u54ea\u4e2a server_name \u7684\u914d\u7f6e\u5728\u6587\u4ef6\u6700\u524d\uff0c\u8fd4\u56de\u54ea\u4e2a\u3002 openssl s_client -connect www.imwhatiam.com:443 CONNECTED(00000005) depth=1 C = US, O = Let's Encrypt, CN = Let's Encrypt Authority X3 verify error:num=20:unable to get local issuer certificate verify return:0 --- Certificate chain 0 s:/CN=demo.seafile.com i:/C=US/O=Let's Encrypt/CN=Let's Encrypt Authority X3 1 s:/C=US/O=Let's Encrypt/CN=Let's Encrypt Authority X3 i:/O=Digital Signature Trust Co./CN=DST Root CA X3","title":"nginx"},{"location":"tools/nginx/#nginx","text":"","title":"nginx"},{"location":"tools/nginx/#install","text":"apt update apt install nginx","title":"install"},{"location":"tools/nginx/#sni","text":"A more generic solution for running several HTTPS servers on a single IP address is TLS Server Name Indication extension (SNI, RFC 6066), which allows a browser to pass a requested server name during the SSL handshake and, therefore, the server will know which certificate it should use for the connection.","title":"SNI"},{"location":"tools/nginx/#nginx-sni","text":"root@ubuntu-demo-com ~ # nginx -V nginx version: nginx/1.10.3 (Ubuntu) built with OpenSSL 1.0.2g 1 Mar 2016 TLS SNI support enabled","title":"nginx \u662f\u5426\u652f\u6301 SNI"},{"location":"tools/nginx/#_1","text":"","title":"\u6d4b\u8bd5"},{"location":"tools/nginx/#nginx_1","text":"Bind two different domain to the same IP. Two nginx virtual hosts with different server name and certificate.","title":"\u914d\u7f6e nginx"},{"location":"tools/nginx/#python-requests-module","text":">>> import requests >>> requests.get('https://www.imwhatiam.com') <Response [200]> >>> requests.get('https://demo.seafile.com') <Response [200]","title":"python requests module \u6d4b\u8bd5"},{"location":"tools/nginx/#openssl-s_client","text":"\u7b2c\u4e00\u4e2a\u8bf7\u6c42\u52a0\u4e86 -servername \u53c2\u6570\uff0c\u8bf7\u6c42 www.imwhatiam.com:443 \uff0c\u5f97\u5230 /CN=www.imwhatiam.com liandembp:~ lian$ openssl s_client -servername www.imwhatiam.com -connect www.imwhatiam.com:443 CONNECTED(00000005) depth=1 C = US, O = Let's Encrypt, CN = Let's Encrypt Authority X3 verify error:num=20:unable to get local issuer certificate verify return:0 --- Certificate chain 0 s:/CN=www.imwhatiam.com i:/C=US/O=Let's Encrypt/CN=Let's Encrypt Authority X3 1 s:/C=US/O=Let's Encrypt/CN=Let's Encrypt Authority X3 i:/O=Digital Signature Trust Co./CN=DST Root CA X3 \u7b2c\u4e8c\u4e2a\u8bf7\u6c42\u6ca1\u52a0 -servername \u53c2\u6570\uff0c\u8bf7\u6c42 www.imwhatiam.com:443 \uff0c\u5f97\u5230 /CN=demo.seafile.com \u5f53\u4e0d\u52a0 -servername \u53c2\u6570\u7684\u65f6\u5019\uff0c\u5f97\u5230\u7684\u8bc1\u4e66\uff0c\u548c nginx \u914d\u7f6e\u4e2d\u7684\u987a\u5e8f\u6709\u5173\u3002\u54ea\u4e2a server_name \u7684\u914d\u7f6e\u5728\u6587\u4ef6\u6700\u524d\uff0c\u8fd4\u56de\u54ea\u4e2a\u3002 openssl s_client -connect www.imwhatiam.com:443 CONNECTED(00000005) depth=1 C = US, O = Let's Encrypt, CN = Let's Encrypt Authority X3 verify error:num=20:unable to get local issuer certificate verify return:0 --- Certificate chain 0 s:/CN=demo.seafile.com i:/C=US/O=Let's Encrypt/CN=Let's Encrypt Authority X3 1 s:/C=US/O=Let's Encrypt/CN=Let's Encrypt Authority X3 i:/O=Digital Signature Trust Co./CN=DST Root CA X3","title":"openssl s_client \u547d\u4ee4\u6d4b\u8bd5"},{"location":"tools/ngrok/","text":"ngrok https://ngrok.com/ ./ngrok authtoken {your auth token} ./ngrok http 8000","title":"ngrok"},{"location":"tools/ngrok/#ngrok","text":"https://ngrok.com/ ./ngrok authtoken {your auth token} ./ngrok http 8000","title":"ngrok"},{"location":"tools/product-key/","text":"beyond compare Beyond Compare 4 key \u6ce8\u518c\u7801 w4G-in5u3SH75RoB3VZIX8htiZgw4ELilwvPcHAIQWfwfXv5n0IHDp5hv 1BM3+H1XygMtiE0-JBgacjE9tz33sIh542EmsGs1yg638UxVfmWqNLqu- Zw91XxNEiZF7DC7-iV1XbSfsgxI8Tvqr-ZMTxlGCJU+2YLveAc-YXs8ci RTtssts7leEbJ979H5v+G0sw-FwP9bjvE4GCJ8oj+jtlp7wFmpVdzovEh v5Vg3dMqhqTiQHKfmHjYbb0o5OUxq0jOWxg5NKim9dhCVF+avO6mDeRNc OYpl7BatIcd6tsiwdhHKRnyGshyVEjSgRCRY11IgyvdRPnbW8UOVULuTE vmware VMWARE FUSION8 PRO\u53ef\u7528\u7684\u5e8f\u5217\u53f7 FY7N2-6RGD2-081XZ-UYWQC-ZPKCA","title":"beyond compare"},{"location":"tools/product-key/#beyond-compare","text":"Beyond Compare 4 key \u6ce8\u518c\u7801 w4G-in5u3SH75RoB3VZIX8htiZgw4ELilwvPcHAIQWfwfXv5n0IHDp5hv 1BM3+H1XygMtiE0-JBgacjE9tz33sIh542EmsGs1yg638UxVfmWqNLqu- Zw91XxNEiZF7DC7-iV1XbSfsgxI8Tvqr-ZMTxlGCJU+2YLveAc-YXs8ci RTtssts7leEbJ979H5v+G0sw-FwP9bjvE4GCJ8oj+jtlp7wFmpVdzovEh v5Vg3dMqhqTiQHKfmHjYbb0o5OUxq0jOWxg5NKim9dhCVF+avO6mDeRNc OYpl7BatIcd6tsiwdhHKRnyGshyVEjSgRCRY11IgyvdRPnbW8UOVULuTE","title":"beyond compare"},{"location":"tools/product-key/#vmware","text":"VMWARE FUSION8 PRO\u53ef\u7528\u7684\u5e8f\u5217\u53f7 FY7N2-6RGD2-081XZ-UYWQC-ZPKCA","title":"vmware"},{"location":"tools/regex/","text":"Regex \u5b57\u7b26 \u542b\u4e49 .(dot) \u4efb\u610f\u5355\u4e00\u5b57\u7b26 \\d \u4efb\u610f\u4e00\u4f4d\u6570\u5b57 [A-Z] A \u5230 Z\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\uff08\u5927\u5199\uff09 [a-z] a \u5230 z\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\uff08\u5c0f\u5199\uff09 [A-Za-z] a \u5230 z\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09 + \u5339\u914d\u4e00\u4e2a\u6216\u66f4\u591a (\u4f8b\u5982, \\d+ \u5339\u914d\u4e00\u4e2a\u6216 \u591a\u4e2a\u6570\u5b57\u5b57\u7b26) [^/]+ \u4e00\u4e2a\u6216\u591a\u4e2a\u4e0d\u4e3a\u2018/\u2019\u7684\u5b57\u7b26 ? \u96f6\u4e2a\u6216\u4e00\u4e2a\u4e4b\u524d\u7684\u8868\u8fbe\u5f0f\uff08\u4f8b\u5982\uff1a\\d? \u5339\u914d\u96f6\u4e2a\u6216\u4e00\u4e2a\u6570\u5b57\uff09 * \u5339\u914d0\u4e2a\u6216\u66f4\u591a (\u4f8b\u5982, \\d* \u5339\u914d0\u4e2a \u6216\u66f4\u591a\u6570\u5b57\u5b57\u7b26) {1,3} \u4ecb\u4e8e\u4e00\u4e2a\u548c\u4e09\u4e2a\uff08\u5305\u542b\uff09\u4e4b\u524d\u7684\u8868\u8fbe\u5f0f\uff08\u4f8b\u5982\uff0c\\d{1,3}\u5339\u914d\u4e00\u4e2a\u6216\u4e24\u4e2a\u6216\u4e09\u4e2a\u6570\u5b57\uff09","title":"regex"},{"location":"tools/regex/#regex","text":"\u5b57\u7b26 \u542b\u4e49 .(dot) \u4efb\u610f\u5355\u4e00\u5b57\u7b26 \\d \u4efb\u610f\u4e00\u4f4d\u6570\u5b57 [A-Z] A \u5230 Z\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\uff08\u5927\u5199\uff09 [a-z] a \u5230 z\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\uff08\u5c0f\u5199\uff09 [A-Za-z] a \u5230 z\u4e2d\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09 + \u5339\u914d\u4e00\u4e2a\u6216\u66f4\u591a (\u4f8b\u5982, \\d+ \u5339\u914d\u4e00\u4e2a\u6216 \u591a\u4e2a\u6570\u5b57\u5b57\u7b26) [^/]+ \u4e00\u4e2a\u6216\u591a\u4e2a\u4e0d\u4e3a\u2018/\u2019\u7684\u5b57\u7b26 ? \u96f6\u4e2a\u6216\u4e00\u4e2a\u4e4b\u524d\u7684\u8868\u8fbe\u5f0f\uff08\u4f8b\u5982\uff1a\\d? \u5339\u914d\u96f6\u4e2a\u6216\u4e00\u4e2a\u6570\u5b57\uff09 * \u5339\u914d0\u4e2a\u6216\u66f4\u591a (\u4f8b\u5982, \\d* \u5339\u914d0\u4e2a \u6216\u66f4\u591a\u6570\u5b57\u5b57\u7b26) {1,3} \u4ecb\u4e8e\u4e00\u4e2a\u548c\u4e09\u4e2a\uff08\u5305\u542b\uff09\u4e4b\u524d\u7684\u8868\u8fbe\u5f0f\uff08\u4f8b\u5982\uff0c\\d{1,3}\u5339\u914d\u4e00\u4e2a\u6216\u4e24\u4e2a\u6216\u4e09\u4e2a\u6570\u5b57\uff09","title":"Regex"},{"location":"tools/science-online/","text":"Science Online \u56fd\u5185\u6e90 pip pip install -i https://pypi.tuna.tsinghua.edu.cn/simple some-package vi ~/.pip/pip.conf [global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple [install] trusted-host = https://pypi.tuna.tsinghua.edu.cn npm // \u67e5\u8be2\u6e90 npm config get registry // \u66f4\u6362\u56fd\u5185\u6e90 npm config set registry https://registry.npmmirror.com // \u6062\u590d\u5b98\u65b9\u6e90 npm config set registry https://registry.npmjs.org // \u5220\u9664\u6ce8\u518c\u8868 npm config delete registry github git config --global url.https://kkgithub.com/.insteadOf https://github.com/ homebrew https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/ export HOMEBREW_API_DOMAIN=\"https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/api\" export HOMEBREW_BOTTLE_DOMAIN=\"https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles\" export HOMEBREW_BREW_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git\" export HOMEBREW_CORE_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git\" export HOMEBREW_PIP_INDEX_URL=\"https://pypi.tuna.tsinghua.edu.cn/simple\" git clone --depth=1 https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/install.git brew-install /bin/bash brew-install/install.sh rm -rf brew-install brew update create ssh tunnel ssh -qTfnN -D 1080 root@example.com -q: quiet\u6a21\u5f0f\uff0c\u5ffd\u89c6\u5927\u90e8\u5206\u7684\u8b66\u544a\u548c\u8bca\u65ad\u4fe1\u606f\uff08\u6bd4\u5982\u7aef\u53e3\u8f6c\u53d1\u65f6\u7684\u5404\u79cd\u8fde\u63a5\u9519\u8bef\uff09 -T: \u7981\u7528tty\u5206\u914d(pseudo-terminal allocation) -f: \u767b\u5f55\u6210\u529f\u540e\u5373\u8f6c\u4e3a\u540e\u53f0\u4efb\u52a1\u6267\u884c -n: \u91cd\u5b9a\u5411stdin\u4e3a/dev/null\uff0c\u7528\u4e8e\u914d\u5408-f\u540e\u53f0\u4efb\u52a1 -N: \u4e0d\u6267\u884c\u8fdc\u7a0b\u547d\u4ee4\uff08\u4e13\u95e8\u505a\u7aef\u53e3\u8f6c\u53d1\uff09 git \u8bbe\u7f6e socks5 \u4ee3\u7406 git config --global http.proxy 'socks5://127.0.0.1:1080' git config --global https.proxy 'socks5://127.0.0.1:1080' git config --global --unset http.proxy git config --global --unset https.proxy npm \u8bbe\u7f6e socks5 \u4ee3\u7406 npm install --registry=https://registry.npm.taobao.org npm config set proxy socks5://127.0.0.1:1080 npm config set https-proxy socks5://127.0.0.1:1080 npm config delete proxy npm config delete https-proxy github.com \u8bbe\u7f6e socks5 \u4ee3\u7406 vi ~/.ssh/config Host github.com HostName github.com User git ProxyCommand nc -v -x 127.0.0.1:1080 %h %p bash \u8bbe\u7f6e\u5168\u5c40\u4ee3\u7406 export http_proxy=\"socks5://127.0.0.1:1080\" export https_proxy=\"socks5://127.0.0.1:1080\" # \u53d6\u6d88\u6240\u6709 socks \u4ee3\u7406 unset all_proxy && unset ALL_PROXY curl \u8bbe\u7f6e socks5 \u4ee3\u7406 curl --socks5-hostname localhost:1080 http://www.google.com/ Shadowsocks ss-local https://github.com/shadowsocks/ShadowsocksX-NG test if ss-local works curl --socks5 127.0.0.1:1080 http://cip.cc ssserver pip install shadowsocks tested on ubuntu 18.04 pip install shadowsocks create configuration file vim /etc/shadowsocks.json { \"server\":\"server ip\", \"server_port\":8388, \"local_address\": \"127.0.0.1\", \"local_port\":1080, \"password\":\"yourpassword\", \"timeout\":300, \"method\":\"aes-256-cfb\", \"fast_open\": false } start ssserver ssserver -c /etc/shadowsocks.json -d start if the following error occurs AttributeError: /usr/lib/x86_64-linux-gnu/libcrypto.so.1.1: undefined symbol: EVP_CIPHER_CTX_cleanup then vi /usr/local/lib/python3.6/dist-packages/shadowsocks/crypto/openssl.py %s/EVP_CIPHER_CTX_cleanup/EVP_CIPHER_CTX_reset/gc apt install shadowsocks-libev sudo apt update sudo apt upgrade sudo apt install vim git wget curl tmux sudo apt install shadowsocks-libev reboot vi /etc/shadowsocks-libev/config.json sudo systemctl restart shadowsocks-libev sudo systemctl status shadowsocks-libev sudo systemctl enable shadowsocks-libev cat /etc/shadowsocks-libev/config.json sudo iptables -I INPUT -p tcp --dport 8388 -j ACCEPT sudo iptables -I INPUT -p udp --dport 8388 -j ACCEPT sudo ufw allow 8388","title":"science online"},{"location":"tools/science-online/#science-online","text":"","title":"Science Online"},{"location":"tools/science-online/#_1","text":"","title":"\u56fd\u5185\u6e90"},{"location":"tools/science-online/#pip","text":"pip install -i https://pypi.tuna.tsinghua.edu.cn/simple some-package vi ~/.pip/pip.conf [global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple [install] trusted-host = https://pypi.tuna.tsinghua.edu.cn","title":"pip"},{"location":"tools/science-online/#npm","text":"// \u67e5\u8be2\u6e90 npm config get registry // \u66f4\u6362\u56fd\u5185\u6e90 npm config set registry https://registry.npmmirror.com // \u6062\u590d\u5b98\u65b9\u6e90 npm config set registry https://registry.npmjs.org // \u5220\u9664\u6ce8\u518c\u8868 npm config delete registry","title":"npm"},{"location":"tools/science-online/#github","text":"git config --global url.https://kkgithub.com/.insteadOf https://github.com/","title":"github"},{"location":"tools/science-online/#homebrew","text":"https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/ export HOMEBREW_API_DOMAIN=\"https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles/api\" export HOMEBREW_BOTTLE_DOMAIN=\"https://mirrors.tuna.tsinghua.edu.cn/homebrew-bottles\" export HOMEBREW_BREW_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git\" export HOMEBREW_CORE_GIT_REMOTE=\"https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git\" export HOMEBREW_PIP_INDEX_URL=\"https://pypi.tuna.tsinghua.edu.cn/simple\" git clone --depth=1 https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/install.git brew-install /bin/bash brew-install/install.sh rm -rf brew-install brew update","title":"homebrew"},{"location":"tools/science-online/#create-ssh-tunnel","text":"ssh -qTfnN -D 1080 root@example.com -q: quiet\u6a21\u5f0f\uff0c\u5ffd\u89c6\u5927\u90e8\u5206\u7684\u8b66\u544a\u548c\u8bca\u65ad\u4fe1\u606f\uff08\u6bd4\u5982\u7aef\u53e3\u8f6c\u53d1\u65f6\u7684\u5404\u79cd\u8fde\u63a5\u9519\u8bef\uff09 -T: \u7981\u7528tty\u5206\u914d(pseudo-terminal allocation) -f: \u767b\u5f55\u6210\u529f\u540e\u5373\u8f6c\u4e3a\u540e\u53f0\u4efb\u52a1\u6267\u884c -n: \u91cd\u5b9a\u5411stdin\u4e3a/dev/null\uff0c\u7528\u4e8e\u914d\u5408-f\u540e\u53f0\u4efb\u52a1 -N: \u4e0d\u6267\u884c\u8fdc\u7a0b\u547d\u4ee4\uff08\u4e13\u95e8\u505a\u7aef\u53e3\u8f6c\u53d1\uff09","title":"create ssh tunnel"},{"location":"tools/science-online/#git-socks5","text":"git config --global http.proxy 'socks5://127.0.0.1:1080' git config --global https.proxy 'socks5://127.0.0.1:1080' git config --global --unset http.proxy git config --global --unset https.proxy","title":"git \u8bbe\u7f6e socks5 \u4ee3\u7406"},{"location":"tools/science-online/#npm-socks5","text":"npm install --registry=https://registry.npm.taobao.org npm config set proxy socks5://127.0.0.1:1080 npm config set https-proxy socks5://127.0.0.1:1080 npm config delete proxy npm config delete https-proxy","title":"npm \u8bbe\u7f6e socks5 \u4ee3\u7406"},{"location":"tools/science-online/#githubcom-socks5","text":"vi ~/.ssh/config Host github.com HostName github.com User git ProxyCommand nc -v -x 127.0.0.1:1080 %h %p","title":"github.com \u8bbe\u7f6e socks5 \u4ee3\u7406"},{"location":"tools/science-online/#bash","text":"export http_proxy=\"socks5://127.0.0.1:1080\" export https_proxy=\"socks5://127.0.0.1:1080\" # \u53d6\u6d88\u6240\u6709 socks \u4ee3\u7406 unset all_proxy && unset ALL_PROXY","title":"bash \u8bbe\u7f6e\u5168\u5c40\u4ee3\u7406"},{"location":"tools/science-online/#curl-socks5","text":"curl --socks5-hostname localhost:1080 http://www.google.com/","title":"curl \u8bbe\u7f6e socks5 \u4ee3\u7406"},{"location":"tools/science-online/#shadowsocks","text":"","title":"Shadowsocks"},{"location":"tools/science-online/#ss-local","text":"https://github.com/shadowsocks/ShadowsocksX-NG test if ss-local works curl --socks5 127.0.0.1:1080 http://cip.cc","title":"ss-local"},{"location":"tools/science-online/#ssserver","text":"","title":"ssserver"},{"location":"tools/science-online/#pip-install-shadowsocks","text":"tested on ubuntu 18.04 pip install shadowsocks create configuration file vim /etc/shadowsocks.json { \"server\":\"server ip\", \"server_port\":8388, \"local_address\": \"127.0.0.1\", \"local_port\":1080, \"password\":\"yourpassword\", \"timeout\":300, \"method\":\"aes-256-cfb\", \"fast_open\": false } start ssserver ssserver -c /etc/shadowsocks.json -d start if the following error occurs AttributeError: /usr/lib/x86_64-linux-gnu/libcrypto.so.1.1: undefined symbol: EVP_CIPHER_CTX_cleanup then vi /usr/local/lib/python3.6/dist-packages/shadowsocks/crypto/openssl.py %s/EVP_CIPHER_CTX_cleanup/EVP_CIPHER_CTX_reset/gc","title":"pip install shadowsocks"},{"location":"tools/science-online/#apt-install-shadowsocks-libev","text":"sudo apt update sudo apt upgrade sudo apt install vim git wget curl tmux sudo apt install shadowsocks-libev reboot vi /etc/shadowsocks-libev/config.json sudo systemctl restart shadowsocks-libev sudo systemctl status shadowsocks-libev sudo systemctl enable shadowsocks-libev cat /etc/shadowsocks-libev/config.json sudo iptables -I INPUT -p tcp --dport 8388 -j ACCEPT sudo iptables -I INPUT -p udp --dport 8388 -j ACCEPT sudo ufw allow 8388","title":"apt install shadowsocks-libev"},{"location":"tools/tmux/","text":"tmux Ctrl-b then [ then you can use your normal navigation keys to scroll around (eg. Up Arrow or PgDn ). Press q to quit scroll mode. tmux ls tmux attach -t 2 tmux kill-session -t 3 C-b ? \u663e\u793a\u5feb\u6377\u952e\u5e2e\u52a9 C-b C-o \u8c03\u6362\u7a97\u53e3\u4f4d\u7f6e\uff0c\u7c7b\u4f3c\u4e0evim \u91cc\u7684C-w C-b \u7a7a\u683c\u952e \u91c7\u7528\u4e0b\u4e00\u4e2a\u5185\u7f6e\u5e03\u5c40 C-b ! \u628a\u5f53\u524d\u7a97\u53e3\u53d8\u4e3a\u65b0\u7a97\u53e3 C-b \u201c \u6a2a\u5411\u5206\u9694\u7a97\u53e3 C-b % \u7eb5\u5411\u5206\u9694\u7a97\u53e3 C-b q \u663e\u793a\u5206\u9694\u7a97\u53e3\u7684\u7f16\u53f7 C-b o \u8df3\u5230\u4e0b\u4e00\u4e2a\u5206\u9694\u7a97\u53e3 C-b \u4e0a\u4e0b\u952e \u4e0a\u4e00\u4e2a\u53ca\u4e0b\u4e00\u4e2a\u5206\u9694\u7a97\u53e3 C-b C-\u65b9\u5411\u952e \u8c03\u6574\u5206\u9694\u7a97\u53e3\u5927\u5c0f C-b c \u521b\u5efa\u65b0\u7a97\u53e3 C-b 0~9 \u9009\u62e9\u51e0\u53f7\u7a97\u53e3 C-b c \u521b\u5efa\u65b0\u7a97\u53e3 C-b n \u9009\u62e9\u4e0b\u4e00\u4e2a\u7a97\u53e3 C-b l \u5207\u6362\u5230\u6700\u540e\u4f7f\u7528\u7684\u7a97\u53e3 C-b p \u9009\u62e9\u524d\u4e00\u4e2a\u7a97\u53e3 C-b w \u4ee5\u83dc\u5355\u65b9\u5f0f\u663e\u793a\u53ca\u9009\u62e9\u7a97\u53e3 C-b t \u663e\u793a\u65f6\u949f C-b ; \u5207\u6362\u5230\u6700\u540e\u4e00\u4e2a\u4f7f\u7528\u7684\u9762\u677f C-b x \u5173\u95ed\u9762\u677f C-b & \u5173\u95ed\u7a97\u53e3 C-b s \u4ee5\u83dc\u5355\u65b9\u5f0f\u663e\u793a\u548c\u9009\u62e9\u4f1a\u8bdd C-b d \u9000\u51fatumx\uff0c\u5e76\u4fdd\u5b58\u5f53\u524d\u4f1a\u8bdd\uff0c\u8fd9\u65f6\uff0ctmux\u4ecd\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u53ef\u4ee5\u901a\u8fc7tmux attach\u8fdb\u5165 \u5230\u6307\u5b9a\u7684\u4f1a\u8bdd Ctrl+b // \u6fc0\u6d3b\u63a7\u5236\u53f0\uff1b\u6b64\u65f6\u4ee5\u4e0b\u6309\u952e\u751f\u6548 \u7cfb\u7edf\u64cd\u4f5c ? // \u5217\u51fa\u6240\u6709\u5feb\u6377\u952e\uff1b\u6309q\u8fd4\u56de d // \u8131\u79bb\u5f53\u524d\u4f1a\u8bdd\uff1b\u8fd9\u6837\u53ef\u4ee5\u6682\u65f6\u8fd4\u56deShell\u754c\u9762\uff0c\u8f93\u5165tmux attach\u80fd\u591f\u91cd\u65b0\u8fdb\u5165\u4e4b\u524d\u7684\u4f1a\u8bdd D // \u9009\u62e9\u8981\u8131\u79bb\u7684\u4f1a\u8bdd\uff1b\u5728\u540c\u65f6\u5f00\u542f\u4e86\u591a\u4e2a\u4f1a\u8bdd\u65f6\u4f7f\u7528 Ctrl+z // \u6302\u8d77\u5f53\u524d\u4f1a\u8bdd r // \u5f3a\u5236\u91cd\u7ed8\u672a\u8131\u79bb\u7684\u4f1a\u8bdd s // \u9009\u62e9\u5e76\u5207\u6362\u4f1a\u8bdd\uff1b\u5728\u540c\u65f6\u5f00\u542f\u4e86\u591a\u4e2a\u4f1a\u8bdd\u65f6\u4f7f\u7528 : // \u8fdb\u5165\u547d\u4ee4\u884c\u6a21\u5f0f\uff1b\u6b64\u65f6\u53ef\u4ee5\u8f93\u5165\u652f\u6301\u7684\u547d\u4ee4\uff0c\u4f8b\u5982kill-server\u53ef\u4ee5\u5173\u95ed\u670d\u52a1\u5668 \\[ // \u8fdb\u5165\u590d\u5236\u6a21\u5f0f\uff1b\u6b64\u65f6\u7684\u64cd\u4f5c\u4e0evi/emacs\u76f8\u540c\uff0c\u6309q/Esc\u9000\u51fa ~ // \u5217\u51fa\u63d0\u793a\u4fe1\u606f\u7f13\u5b58\uff1b\u5176\u4e2d\u5305\u542b\u4e86\u4e4b\u524dtmux\u8fd4\u56de\u7684\u5404\u79cd\u63d0\u793a\u4fe1\u606f \u7a97\u53e3\u64cd\u4f5c c // \u521b\u5efa\u65b0\u7a97\u53e3 & // \u5173\u95ed\u5f53\u524d\u7a97\u53e3 \u6570\u5b57\u952e // \u5207\u6362\u81f3\u6307\u5b9a\u7a97\u53e3 p // \u5207\u6362\u81f3\u4e0a\u4e00\u7a97\u53e3 n // \u5207\u6362\u81f3\u4e0b\u4e00\u7a97\u53e3 l // \u5728\u524d\u540e\u4e24\u4e2a\u7a97\u53e3\u95f4\u4e92\u76f8\u5207\u6362 w // \u901a\u8fc7\u7a97\u53e3\u5217\u8868\u5207\u6362\u7a97\u53e3 , // \u91cd\u547d\u540d\u5f53\u524d\u7a97\u53e3\uff1b\u8fd9\u6837\u4fbf\u4e8e\u8bc6\u522b . // \u4fee\u6539\u5f53\u524d\u7a97\u53e3\u7f16\u53f7\uff1b\u76f8\u5f53\u4e8e\u7a97\u53e3\u91cd\u65b0\u6392\u5e8f f // \u5728\u6240\u6709\u7a97\u53e3\u4e2d\u67e5\u627e\u6307\u5b9a\u6587\u672c \u9762\u677f\u64cd\u4f5c \u201d // \u5c06\u5f53\u524d\u9762\u677f\u5e73\u5206\u4e3a\u4e0a\u4e0b\u4e24\u5757 % // \u5c06\u5f53\u524d\u9762\u677f\u5e73\u5206\u4e3a\u5de6\u53f3\u4e24\u5757 x // \u5173\u95ed\u5f53\u524d\u9762\u677f ! // \u5c06\u5f53\u524d\u9762\u677f\u7f6e\u4e8e\u65b0\u7a97\u53e3\uff1b\u5373\u65b0\u5efa\u4e00\u4e2a\u7a97\u53e3\uff0c\u5176\u4e2d\u4ec5\u5305\u542b\u5f53\u524d\u9762\u677f Ctrl+\u65b9\u5411\u952e // \u4ee51\u4e2a\u5355\u5143\u683c\u4e3a\u5355\u4f4d\u79fb\u52a8\u8fb9\u7f18\u4ee5\u8c03\u6574\u5f53\u524d\u9762\u677f\u5927\u5c0f Alt+\u65b9\u5411\u952e // \u4ee55\u4e2a\u5355\u5143\u683c\u4e3a\u5355\u4f4d\u79fb\u52a8\u8fb9\u7f18\u4ee5\u8c03\u6574\u5f53\u524d\u9762\u677f\u5927\u5c0f Space // \u5728\u9884\u7f6e\u7684\u9762\u677f\u5e03\u5c40\u4e2d\u5faa\u73af\u5207\u6362\uff1b\u4f9d\u6b21\u5305\u62eceven-horizontal\u3001even-vertical\u3001main-horizontal\u3001main-vertical\u3001tiled q // \u663e\u793a\u9762\u677f\u7f16\u53f7 o // \u5728\u5f53\u524d\u7a97\u53e3\u4e2d\u9009\u62e9\u4e0b\u4e00\u9762\u677f \u65b9\u5411\u952e // \u79fb\u52a8\u5149\u6807\u4ee5\u9009\u62e9\u9762\u677f { // \u5411\u524d\u7f6e\u6362\u5f53\u524d\u9762\u677f } // \u5411\u540e\u7f6e\u6362\u5f53\u524d\u9762\u677f Alt+o // \u9006\u65f6\u9488\u65cb\u8f6c\u5f53\u524d\u7a97\u53e3\u7684\u9762\u677f Ctrl+o // \u987a\u65f6\u9488\u65cb\u8f6c\u5f53\u524d\u7a97\u53e3\u7684\u9762\u677f","title":"tmux"},{"location":"tools/tmux/#tmux","text":"Ctrl-b then [ then you can use your normal navigation keys to scroll around (eg. Up Arrow or PgDn ). Press q to quit scroll mode. tmux ls tmux attach -t 2 tmux kill-session -t 3 C-b ? \u663e\u793a\u5feb\u6377\u952e\u5e2e\u52a9 C-b C-o \u8c03\u6362\u7a97\u53e3\u4f4d\u7f6e\uff0c\u7c7b\u4f3c\u4e0evim \u91cc\u7684C-w C-b \u7a7a\u683c\u952e \u91c7\u7528\u4e0b\u4e00\u4e2a\u5185\u7f6e\u5e03\u5c40 C-b ! \u628a\u5f53\u524d\u7a97\u53e3\u53d8\u4e3a\u65b0\u7a97\u53e3 C-b \u201c \u6a2a\u5411\u5206\u9694\u7a97\u53e3 C-b % \u7eb5\u5411\u5206\u9694\u7a97\u53e3 C-b q \u663e\u793a\u5206\u9694\u7a97\u53e3\u7684\u7f16\u53f7 C-b o \u8df3\u5230\u4e0b\u4e00\u4e2a\u5206\u9694\u7a97\u53e3 C-b \u4e0a\u4e0b\u952e \u4e0a\u4e00\u4e2a\u53ca\u4e0b\u4e00\u4e2a\u5206\u9694\u7a97\u53e3 C-b C-\u65b9\u5411\u952e \u8c03\u6574\u5206\u9694\u7a97\u53e3\u5927\u5c0f C-b c \u521b\u5efa\u65b0\u7a97\u53e3 C-b 0~9 \u9009\u62e9\u51e0\u53f7\u7a97\u53e3 C-b c \u521b\u5efa\u65b0\u7a97\u53e3 C-b n \u9009\u62e9\u4e0b\u4e00\u4e2a\u7a97\u53e3 C-b l \u5207\u6362\u5230\u6700\u540e\u4f7f\u7528\u7684\u7a97\u53e3 C-b p \u9009\u62e9\u524d\u4e00\u4e2a\u7a97\u53e3 C-b w \u4ee5\u83dc\u5355\u65b9\u5f0f\u663e\u793a\u53ca\u9009\u62e9\u7a97\u53e3 C-b t \u663e\u793a\u65f6\u949f C-b ; \u5207\u6362\u5230\u6700\u540e\u4e00\u4e2a\u4f7f\u7528\u7684\u9762\u677f C-b x \u5173\u95ed\u9762\u677f C-b & \u5173\u95ed\u7a97\u53e3 C-b s \u4ee5\u83dc\u5355\u65b9\u5f0f\u663e\u793a\u548c\u9009\u62e9\u4f1a\u8bdd C-b d \u9000\u51fatumx\uff0c\u5e76\u4fdd\u5b58\u5f53\u524d\u4f1a\u8bdd\uff0c\u8fd9\u65f6\uff0ctmux\u4ecd\u5728\u540e\u53f0\u8fd0\u884c\uff0c\u53ef\u4ee5\u901a\u8fc7tmux attach\u8fdb\u5165 \u5230\u6307\u5b9a\u7684\u4f1a\u8bdd Ctrl+b // \u6fc0\u6d3b\u63a7\u5236\u53f0\uff1b\u6b64\u65f6\u4ee5\u4e0b\u6309\u952e\u751f\u6548 \u7cfb\u7edf\u64cd\u4f5c ? // \u5217\u51fa\u6240\u6709\u5feb\u6377\u952e\uff1b\u6309q\u8fd4\u56de d // \u8131\u79bb\u5f53\u524d\u4f1a\u8bdd\uff1b\u8fd9\u6837\u53ef\u4ee5\u6682\u65f6\u8fd4\u56deShell\u754c\u9762\uff0c\u8f93\u5165tmux attach\u80fd\u591f\u91cd\u65b0\u8fdb\u5165\u4e4b\u524d\u7684\u4f1a\u8bdd D // \u9009\u62e9\u8981\u8131\u79bb\u7684\u4f1a\u8bdd\uff1b\u5728\u540c\u65f6\u5f00\u542f\u4e86\u591a\u4e2a\u4f1a\u8bdd\u65f6\u4f7f\u7528 Ctrl+z // \u6302\u8d77\u5f53\u524d\u4f1a\u8bdd r // \u5f3a\u5236\u91cd\u7ed8\u672a\u8131\u79bb\u7684\u4f1a\u8bdd s // \u9009\u62e9\u5e76\u5207\u6362\u4f1a\u8bdd\uff1b\u5728\u540c\u65f6\u5f00\u542f\u4e86\u591a\u4e2a\u4f1a\u8bdd\u65f6\u4f7f\u7528 : // \u8fdb\u5165\u547d\u4ee4\u884c\u6a21\u5f0f\uff1b\u6b64\u65f6\u53ef\u4ee5\u8f93\u5165\u652f\u6301\u7684\u547d\u4ee4\uff0c\u4f8b\u5982kill-server\u53ef\u4ee5\u5173\u95ed\u670d\u52a1\u5668 \\[ // \u8fdb\u5165\u590d\u5236\u6a21\u5f0f\uff1b\u6b64\u65f6\u7684\u64cd\u4f5c\u4e0evi/emacs\u76f8\u540c\uff0c\u6309q/Esc\u9000\u51fa ~ // \u5217\u51fa\u63d0\u793a\u4fe1\u606f\u7f13\u5b58\uff1b\u5176\u4e2d\u5305\u542b\u4e86\u4e4b\u524dtmux\u8fd4\u56de\u7684\u5404\u79cd\u63d0\u793a\u4fe1\u606f \u7a97\u53e3\u64cd\u4f5c c // \u521b\u5efa\u65b0\u7a97\u53e3 & // \u5173\u95ed\u5f53\u524d\u7a97\u53e3 \u6570\u5b57\u952e // \u5207\u6362\u81f3\u6307\u5b9a\u7a97\u53e3 p // \u5207\u6362\u81f3\u4e0a\u4e00\u7a97\u53e3 n // \u5207\u6362\u81f3\u4e0b\u4e00\u7a97\u53e3 l // \u5728\u524d\u540e\u4e24\u4e2a\u7a97\u53e3\u95f4\u4e92\u76f8\u5207\u6362 w // \u901a\u8fc7\u7a97\u53e3\u5217\u8868\u5207\u6362\u7a97\u53e3 , // \u91cd\u547d\u540d\u5f53\u524d\u7a97\u53e3\uff1b\u8fd9\u6837\u4fbf\u4e8e\u8bc6\u522b . // \u4fee\u6539\u5f53\u524d\u7a97\u53e3\u7f16\u53f7\uff1b\u76f8\u5f53\u4e8e\u7a97\u53e3\u91cd\u65b0\u6392\u5e8f f // \u5728\u6240\u6709\u7a97\u53e3\u4e2d\u67e5\u627e\u6307\u5b9a\u6587\u672c \u9762\u677f\u64cd\u4f5c \u201d // \u5c06\u5f53\u524d\u9762\u677f\u5e73\u5206\u4e3a\u4e0a\u4e0b\u4e24\u5757 % // \u5c06\u5f53\u524d\u9762\u677f\u5e73\u5206\u4e3a\u5de6\u53f3\u4e24\u5757 x // \u5173\u95ed\u5f53\u524d\u9762\u677f ! // \u5c06\u5f53\u524d\u9762\u677f\u7f6e\u4e8e\u65b0\u7a97\u53e3\uff1b\u5373\u65b0\u5efa\u4e00\u4e2a\u7a97\u53e3\uff0c\u5176\u4e2d\u4ec5\u5305\u542b\u5f53\u524d\u9762\u677f Ctrl+\u65b9\u5411\u952e // \u4ee51\u4e2a\u5355\u5143\u683c\u4e3a\u5355\u4f4d\u79fb\u52a8\u8fb9\u7f18\u4ee5\u8c03\u6574\u5f53\u524d\u9762\u677f\u5927\u5c0f Alt+\u65b9\u5411\u952e // \u4ee55\u4e2a\u5355\u5143\u683c\u4e3a\u5355\u4f4d\u79fb\u52a8\u8fb9\u7f18\u4ee5\u8c03\u6574\u5f53\u524d\u9762\u677f\u5927\u5c0f Space // \u5728\u9884\u7f6e\u7684\u9762\u677f\u5e03\u5c40\u4e2d\u5faa\u73af\u5207\u6362\uff1b\u4f9d\u6b21\u5305\u62eceven-horizontal\u3001even-vertical\u3001main-horizontal\u3001main-vertical\u3001tiled q // \u663e\u793a\u9762\u677f\u7f16\u53f7 o // \u5728\u5f53\u524d\u7a97\u53e3\u4e2d\u9009\u62e9\u4e0b\u4e00\u9762\u677f \u65b9\u5411\u952e // \u79fb\u52a8\u5149\u6807\u4ee5\u9009\u62e9\u9762\u677f { // \u5411\u524d\u7f6e\u6362\u5f53\u524d\u9762\u677f } // \u5411\u540e\u7f6e\u6362\u5f53\u524d\u9762\u677f Alt+o // \u9006\u65f6\u9488\u65cb\u8f6c\u5f53\u524d\u7a97\u53e3\u7684\u9762\u677f Ctrl+o // \u987a\u65f6\u9488\u65cb\u8f6c\u5f53\u524d\u7a97\u53e3\u7684\u9762\u677f","title":"tmux"},{"location":"tools/vim/","text":"vim \u547d\u4ee4 \u5149\u6807\u79fb\u52a8 \u64cd\u4f5c \u8bf4\u660e \u5907\u6ce8 + \u5149\u6807\u79fb\u52a8\u5230\u4e0b\u4e00\u884c\u975e\u7a7a\u683c\u5904 - \u5149\u6807\u79fb\u52a8\u5230\u4e0a\u4e00\u884c\u975e\u7a7a\u683c\u5904 0 \u5149\u6807\u79fb\u52a8\u5230\u8fd9\u4e00\u884c\u7684\u6700\u524d\u9762\u5b57\u7b26\u5904 \u6216\u529f\u80fd\u952e Home $ \u5149\u6807\u79fb\u52a8\u5230\u8fd9\u4e00\u884c\u7684\u6700\u540e\u9762\u5b57\u7b26\u5904 \u6216\u529f\u80fd\u952e End \uff0c $ \u5728\u6b63\u5219\u91cc\u9762\u8868\u793a\u662f\u7ed3\u5c3e H \u5149\u6807\u79fb\u52a8\u5230\u5c4f\u5e55\u6700\u4e0a\u65b9\u4e00\u884c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26 H \u662f _header_\u7684\u7f29\u5199 M \u5149\u6807\u79fb\u52a8\u5230\u5c4f\u5e55\u4e2d\u592c\u90a3\u4e00\u884c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26 M \u662f _middle_\u7684\u7f29\u5199 L \u5149\u6807\u79fb\u52a8\u5230\u5c4f\u5e55\u6700\u4e0b\u65b9\u4e00\u884c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26 L \u662f _last_\u7684\u7f29\u5199 * \u5149\u6807\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a, \u5149\u6807\u5f53\u524d\u6240\u5728\u7684\u5355\u8bcd # \u662f\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a Vim\u5149\u6807\u4ee5\u5355\u8bcd\u4e3a\u5355\u4f4d\u79fb\u52a8 w \u6216 W\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u5355\u8bcd\u9996 b \u6216 B\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u4e0a\u4e00\u4e2a\u5355\u8bcd\u7684\u5355\u8bcd\u9996 e \u6216 E\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u5355\u8bcd\u5c3e nw \u6216 nW\uff1an \u4e3a\u6570\u5b57\uff0c\u8868\u793a\u5149\u6807\u5411\u53f3\u79fb\u52a8 n \u4e2a\u5355\u8bcd nb \u6216 nB\uff1an \u4e3a\u6570\u5b57\uff0c\u8868\u793a\u5149\u6807\u5411\u5de6\u79fb\u52a8 n \u4e2a\u5355\u8bcd Vim\u5149\u6807\u79fb\u52a8\u81f3\u884c\u9996\u6216\u884c\u5c3e 0 \u6216 ^\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u5f53\u524d\u884c\u7684\u884c\u9996 $\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u5f53\u524d\u884c\u7684\u884c\u5c3e n$\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u5f53\u524d\u884c\u53ea\u6709 n \u884c\u7684\u884c\u5c3e\uff0cn\u4e3a\u6570\u5b57 Vim\u5149\u6807\u79fb\u52a8\u81f3\u6307\u5b9a\u5b57\u7b26 fx\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u5f53\u524d\u884c\u4e2d\u4e0b\u4e00\u4e2a x \u5b57\u7b26\u5904 Fx\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u5f53\u524d\u884c\u4e2d\u4e0b\u4e00\u4e2a x \u5b57\u7b26\u5904 Vim\u5149\u6807\u79fb\u52a8\u5230\u6307\u5b9a\u884c gg\uff1a\u5149\u6807\u79fb\u52a8\u5230\u6587\u4ef6\u5f00\u5934 G\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u6587\u4ef6\u672b\u5c3e nG\uff1a\u5149\u6807\u79fb\u52a8\u5230\u7b2c n \u884c\uff0cn \u4e3a\u6570\u5b57 :n\uff1a\u7f16\u8f91\u6a21\u5f0f\u4e0b\u4f7f\u7528\u7684\u5feb\u6377\u952e\uff0c\u53ef\u4ee5\u5c06\u5149\u6807\u5feb\u901f\u5b9a\u4e49\u5230\u6307\u5b9a\u884c\u7684\u884c\u9996 \u67e5\u627e\u548c\u66ff\u6362 \u5220\u9664\u7a7a\u683c %s/\\ \\+//g \u5c06\u6bcf\u884c\u4ee50\u6216\u591a\u4e2a\u7a7a\u683c\u5f00\u59cb\u3001\u4e2d\u95f4\u5305\u542b0\u6216\u591a\u4e2a\u6570\u5b57\u3001\u5e76\u4ee50\u6216\u591a\u4e2a\u7a7a\u683c\u7ed3\u675f\u7684\u5b57\u7b26\u4e32\u66ff\u6362\u4e3a\u7a7a\u3002 :%s/^\\s*[0-9]*\\s*//gc % \u4ee3\u8868\u9488\u5bf9\u88ab\u7f16\u8f91\u6587\u4ef6\u7684\u6bcf\u4e00\u884c\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\uff1b ^ \u8868\u793a\u884c\u9996\uff08 $ \u8868\u793a\u884c\u5c3e\uff09\uff0c \\s \u8868\u793a\u7a7a\u683c\uff0c [0-9] \u8868\u793a0~9\u7684\u6570\u5b57\uff0c * \u8868\u793a0\u6216\u591a\u4e2a \u67e5\u627e aa \u6216 bb \uff1a /aa\\|bb \u66ff\u6362\u524d\u663e\u793a\u63d0\u793a\u5b57\u7b26\u7ed9\u7528\u6237\u786e\u8ba4 (confirm) \u662f\u5426\u9700\u8981\u66ff\u6362\uff1a :%s/string1/string2/gc \u5220\u9664\u7a7a\u884c\uff1a %s/^\\n//gc \u5220\u9664\u884c\u5c3e\u7684\u7a7a\u683c\uff1a :%s/ *$//gc or :%s/\\s\\+$//gc \u5220\u9664\u884c\u9996\u7684\u7a7a\u683c\uff1a :%s/^ *//gc \u884c\u9996\u6dfb\u52a0\u5b57\u7b26\u4e32 string \uff1a %s/^/string/gc \u884c\u5c3e\u6dfb\u52a0\u5b57\u7b26\u4e32 string \uff1a %s/$/string/gc \u57282-7\u884c\u4e4b\u95f4\uff0c\u5c06ddd\u66ff\u6362\u6210fff\uff1a :2,7s/ddd/fff/g \u57286~10\u884c\u7684\u884c\u9996\u52a0\u4e00\u4e2a # \u53f7\uff1a :6,10s/^/#/gc \\ \u53d6\u6d88\u540e\u9762\u6240\u8ddf\u5b57\u7b26\u7684\u7279\u6b8a\u542b\u4e49\u3002\u6bd4\u5982 \\[vim\\] \u5339\u914d\u5b57\u7b26\u4e32\u201c[vim]\u201d [] \u5339\u914d\u5176\u4e2d\u4e4b\u4e00\u3002\u6bd4\u5982 [vim] \u5339\u914d\u5b57\u6bcd\u201cv\u201d\u3001\u201ci\u201d\u6216\u8005\u201cm\u201d\uff0c[a-zA-Z] \u5339\u914d\u4efb\u610f\u5b57\u6bcd [^] \u5339\u914d\u975e\u5176\u4e2d\u4e4b\u4e00\u3002\u6bd4\u5982 [^vim] \u5339\u914d\u9664\u5b57\u6bcd\u201cv\u201d\u3001\u201ci\u201d\u548c\u201cm\u201d\u4e4b\u5916\u7684\u6240\u6709\u5b57\u7b26 . \u5339\u914d\u4efb\u610f\u5b57\u7b26 * \u5339\u914d\u524d\u4e00\u5b57\u7b26\u5927\u4e8e\u7b49\u4e8e\u96f6\u904d\u3002\u6bd4\u5982 vi*m \u5339\u914d\u201cvm\u201d\u3001\u201cvim\u201d\u3001\u201cviim\u201d\u2026\u2026 \\+ \u5339\u914d\u524d\u4e00\u5b57\u7b26\u5927\u4e8e\u7b49\u4e8e\u4e00\u904d\u3002\u6bd4\u5982 vi\\+m \u5339\u914d\u201cvim\u201d\u3001\u201cviim\u201d\u3001\u201cviiim\u201d\u2026\u2026 \\? \u5339\u914d\u524d\u4e00\u5b57\u7b26\u96f6\u904d\u6216\u8005\u4e00\u904d\u3002\u6bd4\u5982 vi\\?m \u5339\u914d\u201cvm\u201d\u6216\u8005\u201cvim\u201d ^ \u5339\u914d\u884c\u9996\u3002\u4f8b\u5982 /^hello \u67e5\u627e\u51fa\u73b0\u5728\u884c\u9996\u7684\u5355\u8bcd hello $ \u5339\u914d\u884c\u672b\u3002\u4f8b\u5982 /hello$ \u67e5\u627e\u51fa\u73b0\u5728\u884c\u672b\u7684\u5355\u8bcd hello \\(\\) \u62ec\u4f4f\u67d0\u6bb5\u6b63\u89c4\u8868\u8fbe\u5f0f \\\u6570\u5b57 \u91cd\u590d\u5339\u914d\u524d\u9762\u67d0\u6bb5\u62ec\u4f4f\u7684\u8868\u8fbe\u5f0f\u3002\u4f8b\u5982 \\(hello\\).*\\1 \u5339\u914d\u4e00\u4e2a\u5f00\u59cb\u548c\u672b\u5c3e\u90fd\u662f\u201chello\u201d\uff0c\u4e2d\u95f4\u662f\u4efb\u610f\u5b57\u7b26\u4e32\u7684\u5b57\u7b26\u4e32","title":"vim"},{"location":"tools/vim/#vim","text":"","title":"vim \u547d\u4ee4"},{"location":"tools/vim/#_1","text":"\u64cd\u4f5c \u8bf4\u660e \u5907\u6ce8 + \u5149\u6807\u79fb\u52a8\u5230\u4e0b\u4e00\u884c\u975e\u7a7a\u683c\u5904 - \u5149\u6807\u79fb\u52a8\u5230\u4e0a\u4e00\u884c\u975e\u7a7a\u683c\u5904 0 \u5149\u6807\u79fb\u52a8\u5230\u8fd9\u4e00\u884c\u7684\u6700\u524d\u9762\u5b57\u7b26\u5904 \u6216\u529f\u80fd\u952e Home $ \u5149\u6807\u79fb\u52a8\u5230\u8fd9\u4e00\u884c\u7684\u6700\u540e\u9762\u5b57\u7b26\u5904 \u6216\u529f\u80fd\u952e End \uff0c $ \u5728\u6b63\u5219\u91cc\u9762\u8868\u793a\u662f\u7ed3\u5c3e H \u5149\u6807\u79fb\u52a8\u5230\u5c4f\u5e55\u6700\u4e0a\u65b9\u4e00\u884c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26 H \u662f _header_\u7684\u7f29\u5199 M \u5149\u6807\u79fb\u52a8\u5230\u5c4f\u5e55\u4e2d\u592c\u90a3\u4e00\u884c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26 M \u662f _middle_\u7684\u7f29\u5199 L \u5149\u6807\u79fb\u52a8\u5230\u5c4f\u5e55\u6700\u4e0b\u65b9\u4e00\u884c\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26 L \u662f _last_\u7684\u7f29\u5199 * \u5149\u6807\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a, \u5149\u6807\u5f53\u524d\u6240\u5728\u7684\u5355\u8bcd # \u662f\u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a Vim\u5149\u6807\u4ee5\u5355\u8bcd\u4e3a\u5355\u4f4d\u79fb\u52a8 w \u6216 W\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u5355\u8bcd\u9996 b \u6216 B\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u4e0a\u4e00\u4e2a\u5355\u8bcd\u7684\u5355\u8bcd\u9996 e \u6216 E\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u4e0b\u4e00\u4e2a\u5355\u8bcd\u7684\u5355\u8bcd\u5c3e nw \u6216 nW\uff1an \u4e3a\u6570\u5b57\uff0c\u8868\u793a\u5149\u6807\u5411\u53f3\u79fb\u52a8 n \u4e2a\u5355\u8bcd nb \u6216 nB\uff1an \u4e3a\u6570\u5b57\uff0c\u8868\u793a\u5149\u6807\u5411\u5de6\u79fb\u52a8 n \u4e2a\u5355\u8bcd Vim\u5149\u6807\u79fb\u52a8\u81f3\u884c\u9996\u6216\u884c\u5c3e 0 \u6216 ^\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u5f53\u524d\u884c\u7684\u884c\u9996 $\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u5f53\u524d\u884c\u7684\u884c\u5c3e n$\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u5f53\u524d\u884c\u53ea\u6709 n \u884c\u7684\u884c\u5c3e\uff0cn\u4e3a\u6570\u5b57 Vim\u5149\u6807\u79fb\u52a8\u81f3\u6307\u5b9a\u5b57\u7b26 fx\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u5f53\u524d\u884c\u4e2d\u4e0b\u4e00\u4e2a x \u5b57\u7b26\u5904 Fx\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u5f53\u524d\u884c\u4e2d\u4e0b\u4e00\u4e2a x \u5b57\u7b26\u5904 Vim\u5149\u6807\u79fb\u52a8\u5230\u6307\u5b9a\u884c gg\uff1a\u5149\u6807\u79fb\u52a8\u5230\u6587\u4ef6\u5f00\u5934 G\uff1a\u5149\u6807\u79fb\u52a8\u81f3\u6587\u4ef6\u672b\u5c3e nG\uff1a\u5149\u6807\u79fb\u52a8\u5230\u7b2c n \u884c\uff0cn \u4e3a\u6570\u5b57 :n\uff1a\u7f16\u8f91\u6a21\u5f0f\u4e0b\u4f7f\u7528\u7684\u5feb\u6377\u952e\uff0c\u53ef\u4ee5\u5c06\u5149\u6807\u5feb\u901f\u5b9a\u4e49\u5230\u6307\u5b9a\u884c\u7684\u884c\u9996","title":"\u5149\u6807\u79fb\u52a8"},{"location":"tools/vim/#_2","text":"\u5220\u9664\u7a7a\u683c %s/\\ \\+//g \u5c06\u6bcf\u884c\u4ee50\u6216\u591a\u4e2a\u7a7a\u683c\u5f00\u59cb\u3001\u4e2d\u95f4\u5305\u542b0\u6216\u591a\u4e2a\u6570\u5b57\u3001\u5e76\u4ee50\u6216\u591a\u4e2a\u7a7a\u683c\u7ed3\u675f\u7684\u5b57\u7b26\u4e32\u66ff\u6362\u4e3a\u7a7a\u3002 :%s/^\\s*[0-9]*\\s*//gc % \u4ee3\u8868\u9488\u5bf9\u88ab\u7f16\u8f91\u6587\u4ef6\u7684\u6bcf\u4e00\u884c\u8fdb\u884c\u540e\u7eed\u64cd\u4f5c\uff1b ^ \u8868\u793a\u884c\u9996\uff08 $ \u8868\u793a\u884c\u5c3e\uff09\uff0c \\s \u8868\u793a\u7a7a\u683c\uff0c [0-9] \u8868\u793a0~9\u7684\u6570\u5b57\uff0c * \u8868\u793a0\u6216\u591a\u4e2a \u67e5\u627e aa \u6216 bb \uff1a /aa\\|bb \u66ff\u6362\u524d\u663e\u793a\u63d0\u793a\u5b57\u7b26\u7ed9\u7528\u6237\u786e\u8ba4 (confirm) \u662f\u5426\u9700\u8981\u66ff\u6362\uff1a :%s/string1/string2/gc \u5220\u9664\u7a7a\u884c\uff1a %s/^\\n//gc \u5220\u9664\u884c\u5c3e\u7684\u7a7a\u683c\uff1a :%s/ *$//gc or :%s/\\s\\+$//gc \u5220\u9664\u884c\u9996\u7684\u7a7a\u683c\uff1a :%s/^ *//gc \u884c\u9996\u6dfb\u52a0\u5b57\u7b26\u4e32 string \uff1a %s/^/string/gc \u884c\u5c3e\u6dfb\u52a0\u5b57\u7b26\u4e32 string \uff1a %s/$/string/gc \u57282-7\u884c\u4e4b\u95f4\uff0c\u5c06ddd\u66ff\u6362\u6210fff\uff1a :2,7s/ddd/fff/g \u57286~10\u884c\u7684\u884c\u9996\u52a0\u4e00\u4e2a # \u53f7\uff1a :6,10s/^/#/gc \\ \u53d6\u6d88\u540e\u9762\u6240\u8ddf\u5b57\u7b26\u7684\u7279\u6b8a\u542b\u4e49\u3002\u6bd4\u5982 \\[vim\\] \u5339\u914d\u5b57\u7b26\u4e32\u201c[vim]\u201d [] \u5339\u914d\u5176\u4e2d\u4e4b\u4e00\u3002\u6bd4\u5982 [vim] \u5339\u914d\u5b57\u6bcd\u201cv\u201d\u3001\u201ci\u201d\u6216\u8005\u201cm\u201d\uff0c[a-zA-Z] \u5339\u914d\u4efb\u610f\u5b57\u6bcd [^] \u5339\u914d\u975e\u5176\u4e2d\u4e4b\u4e00\u3002\u6bd4\u5982 [^vim] \u5339\u914d\u9664\u5b57\u6bcd\u201cv\u201d\u3001\u201ci\u201d\u548c\u201cm\u201d\u4e4b\u5916\u7684\u6240\u6709\u5b57\u7b26 . \u5339\u914d\u4efb\u610f\u5b57\u7b26 * \u5339\u914d\u524d\u4e00\u5b57\u7b26\u5927\u4e8e\u7b49\u4e8e\u96f6\u904d\u3002\u6bd4\u5982 vi*m \u5339\u914d\u201cvm\u201d\u3001\u201cvim\u201d\u3001\u201cviim\u201d\u2026\u2026 \\+ \u5339\u914d\u524d\u4e00\u5b57\u7b26\u5927\u4e8e\u7b49\u4e8e\u4e00\u904d\u3002\u6bd4\u5982 vi\\+m \u5339\u914d\u201cvim\u201d\u3001\u201cviim\u201d\u3001\u201cviiim\u201d\u2026\u2026 \\? \u5339\u914d\u524d\u4e00\u5b57\u7b26\u96f6\u904d\u6216\u8005\u4e00\u904d\u3002\u6bd4\u5982 vi\\?m \u5339\u914d\u201cvm\u201d\u6216\u8005\u201cvim\u201d ^ \u5339\u914d\u884c\u9996\u3002\u4f8b\u5982 /^hello \u67e5\u627e\u51fa\u73b0\u5728\u884c\u9996\u7684\u5355\u8bcd hello $ \u5339\u914d\u884c\u672b\u3002\u4f8b\u5982 /hello$ \u67e5\u627e\u51fa\u73b0\u5728\u884c\u672b\u7684\u5355\u8bcd hello \\(\\) \u62ec\u4f4f\u67d0\u6bb5\u6b63\u89c4\u8868\u8fbe\u5f0f \\\u6570\u5b57 \u91cd\u590d\u5339\u914d\u524d\u9762\u67d0\u6bb5\u62ec\u4f4f\u7684\u8868\u8fbe\u5f0f\u3002\u4f8b\u5982 \\(hello\\).*\\1 \u5339\u914d\u4e00\u4e2a\u5f00\u59cb\u548c\u672b\u5c3e\u90fd\u662f\u201chello\u201d\uff0c\u4e2d\u95f4\u662f\u4efb\u610f\u5b57\u7b26\u4e32\u7684\u5b57\u7b26\u4e32","title":"\u67e5\u627e\u548c\u66ff\u6362"}]}